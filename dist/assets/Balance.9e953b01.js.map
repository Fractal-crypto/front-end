{"version":3,"file":"Balance.9e953b01.js","sources":["../../node_modules/vue-material-design-icons/EyeOff.vue?vue&type=template&lang.js","../../node_modules/vue-material-design-icons/EyeOff.vue","../../node_modules/vue-material-design-icons/Eye.vue?vue&type=template&lang.js","../../node_modules/vue-material-design-icons/Eye.vue","../../node_modules/echarts/lib/label/labelGuideHelper.js","../../node_modules/echarts/lib/label/LabelManager.js","../../node_modules/echarts/lib/label/installLabelLayout.js","../../node_modules/echarts/lib/chart/pie/pieLayout.js","../../node_modules/echarts/lib/processor/dataFilter.js","../../node_modules/echarts/lib/chart/pie/labelLayout.js","../../node_modules/echarts/lib/chart/helper/pieHelper.js","../../node_modules/echarts/lib/chart/pie/PieView.js","../../node_modules/echarts/lib/visual/LegendVisualProvider.js","../../node_modules/echarts/lib/chart/pie/PieSeries.js","../../node_modules/echarts/lib/processor/negativeDataFilter.js","../../node_modules/echarts/lib/chart/pie/install.js","../../src/components/charts/BalanceChart.vue","../../src/components/charts/BalanceChart.vue?vue&type=template&lang.js","../../src/components/ftbot/Balance.vue","../../src/components/ftbot/Balance.vue?vue&type=template&lang.js"],"sourcesContent":["\n<span :aria-hidden=\"!title\"\n      :aria-label=\"title\"\n      class=\"material-design-icon eye-off-icon\"\n      role=\"img\"\n      v-bind=\"$attrs\"\n      @click=\"$emit('click', $event)\">\n  <svg :fill=\"fillColor\"\n       class=\"material-design-icon__svg\"\n       :width=\"size\"\n       :height=\"size\"\n       viewBox=\"0 0 24 24\">\n    <path d=\"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z\">\n      <title v-if=\"title\">{{ title }}</title>\n    </path>\n  </svg>\n</span>\n","<template>\n  <span :aria-hidden=\"!title\"\n        :aria-label=\"title\"\n        class=\"material-design-icon eye-off-icon\"\n        role=\"img\"\n        v-bind=\"$attrs\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"EyeOffIcon\",\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","\n<span :aria-hidden=\"!title\"\n      :aria-label=\"title\"\n      class=\"material-design-icon eye-icon\"\n      role=\"img\"\n      v-bind=\"$attrs\"\n      @click=\"$emit('click', $event)\">\n  <svg :fill=\"fillColor\"\n       class=\"material-design-icon__svg\"\n       :width=\"size\"\n       :height=\"size\"\n       viewBox=\"0 0 24 24\">\n    <path d=\"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z\">\n      <title v-if=\"title\">{{ title }}</title>\n    </path>\n  </svg>\n</span>\n","<template>\n  <span :aria-hidden=\"!title\"\n        :aria-label=\"title\"\n        class=\"material-design-icon eye-icon\"\n        role=\"img\"\n        v-bind=\"$attrs\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"EyeIcon\",\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { Point, Path, Polyline } from '../util/graphic.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nimport { cubicProjectPoint, quadraticProjectPoint } from 'zrender/lib/core/curve.js';\nimport { defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport { DISPLAY_STATES, SPECIAL_STATES } from '../util/states.js';\nvar PI2 = Math.PI * 2;\nvar CMD = PathProxy.CMD;\nvar DEFAULT_SEARCH_SPACE = ['top', 'right', 'bottom', 'left'];\n\nfunction getCandidateAnchor(pos, distance, rect, outPt, outDir) {\n  var width = rect.width;\n  var height = rect.height;\n\n  switch (pos) {\n    case 'top':\n      outPt.set(rect.x + width / 2, rect.y - distance);\n      outDir.set(0, -1);\n      break;\n\n    case 'bottom':\n      outPt.set(rect.x + width / 2, rect.y + height + distance);\n      outDir.set(0, 1);\n      break;\n\n    case 'left':\n      outPt.set(rect.x - distance, rect.y + height / 2);\n      outDir.set(-1, 0);\n      break;\n\n    case 'right':\n      outPt.set(rect.x + width + distance, rect.y + height / 2);\n      outDir.set(1, 0);\n      break;\n  }\n}\n\nfunction projectPointToArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y, out) {\n  x -= cx;\n  y -= cy;\n  var d = Math.sqrt(x * x + y * y);\n  x /= d;\n  y /= d; // Intersect point.\n\n  var ox = x * r + cx;\n  var oy = y * r + cy;\n\n  if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n    // Is a circle\n    out[0] = ox;\n    out[1] = oy;\n    return d - r;\n  }\n\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  var angle = Math.atan2(y, x);\n\n  if (angle < 0) {\n    angle += PI2;\n  }\n\n  if (angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle) {\n    // Project point is on the arc.\n    out[0] = ox;\n    out[1] = oy;\n    return d - r;\n  }\n\n  var x1 = r * Math.cos(startAngle) + cx;\n  var y1 = r * Math.sin(startAngle) + cy;\n  var x2 = r * Math.cos(endAngle) + cx;\n  var y2 = r * Math.sin(endAngle) + cy;\n  var d1 = (x1 - x) * (x1 - x) + (y1 - y) * (y1 - y);\n  var d2 = (x2 - x) * (x2 - x) + (y2 - y) * (y2 - y);\n\n  if (d1 < d2) {\n    out[0] = x1;\n    out[1] = y1;\n    return Math.sqrt(d1);\n  } else {\n    out[0] = x2;\n    out[1] = y2;\n    return Math.sqrt(d2);\n  }\n}\n\nfunction projectPointToLine(x1, y1, x2, y2, x, y, out, limitToEnds) {\n  var dx = x - x1;\n  var dy = y - y1;\n  var dx1 = x2 - x1;\n  var dy1 = y2 - y1;\n  var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n  dx1 /= lineLen;\n  dy1 /= lineLen; // dot product\n\n  var projectedLen = dx * dx1 + dy * dy1;\n  var t = projectedLen / lineLen;\n\n  if (limitToEnds) {\n    t = Math.min(Math.max(t, 0), 1);\n  }\n\n  t *= lineLen;\n  var ox = out[0] = x1 + t * dx1;\n  var oy = out[1] = y1 + t * dy1;\n  return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n}\n\nfunction projectPointToRect(x1, y1, width, height, x, y, out) {\n  if (width < 0) {\n    x1 = x1 + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y1 = y1 + height;\n    height = -height;\n  }\n\n  var x2 = x1 + width;\n  var y2 = y1 + height;\n  var ox = out[0] = Math.min(Math.max(x, x1), x2);\n  var oy = out[1] = Math.min(Math.max(y, y1), y2);\n  return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n}\n\nvar tmpPt = [];\n\nfunction nearestPointOnRect(pt, rect, out) {\n  var dist = projectPointToRect(rect.x, rect.y, rect.width, rect.height, pt.x, pt.y, tmpPt);\n  out.set(tmpPt[0], tmpPt[1]);\n  return dist;\n}\n/**\n * Calculate min distance corresponding point.\n * This method won't evaluate if point is in the path.\n */\n\n\nfunction nearestPointOnPath(pt, path, out) {\n  var xi = 0;\n  var yi = 0;\n  var x0 = 0;\n  var y0 = 0;\n  var x1;\n  var y1;\n  var minDist = Infinity;\n  var data = path.data;\n  var x = pt.x;\n  var y = pt.y;\n\n  for (var i = 0; i < data.length;) {\n    var cmd = data[i++];\n\n    if (i === 1) {\n      xi = data[i];\n      yi = data[i + 1];\n      x0 = xi;\n      y0 = yi;\n    }\n\n    var d = minDist;\n\n    switch (cmd) {\n      case CMD.M:\n        // moveTo 命令重新创建一个新的 subpath, 并且更新新的起点\n        // 在 closePath 的时候使用\n        x0 = data[i++];\n        y0 = data[i++];\n        xi = x0;\n        yi = y0;\n        break;\n\n      case CMD.L:\n        d = projectPointToLine(xi, yi, data[i], data[i + 1], x, y, tmpPt, true);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.C:\n        d = cubicProjectPoint(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.Q:\n        d = quadraticProjectPoint(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.A:\n        // TODO Arc 判断的开销比较大\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++]; // TODO Arc 旋转\n\n        i += 1;\n        var anticlockwise = !!(1 - data[i++]);\n        x1 = Math.cos(theta) * rx + cx;\n        y1 = Math.sin(theta) * ry + cy; // 不是直接使用 arc 命令\n\n        if (i <= 1) {\n          // 第一个命令起点还未定义\n          x0 = x1;\n          y0 = y1;\n        } // zr 使用scale来模拟椭圆, 这里也对x做一定的缩放\n\n\n        var _x = (x - cx) * ry / rx + cx;\n\n        d = projectPointToArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y, tmpPt);\n        xi = Math.cos(theta + dTheta) * rx + cx;\n        yi = Math.sin(theta + dTheta) * ry + cy;\n        break;\n\n      case CMD.R:\n        x0 = xi = data[i++];\n        y0 = yi = data[i++];\n        var width = data[i++];\n        var height = data[i++];\n        d = projectPointToRect(x0, y0, width, height, x, y, tmpPt);\n        break;\n\n      case CMD.Z:\n        d = projectPointToLine(xi, yi, x0, y0, x, y, tmpPt, true);\n        xi = x0;\n        yi = y0;\n        break;\n    }\n\n    if (d < minDist) {\n      minDist = d;\n      out.set(tmpPt[0], tmpPt[1]);\n    }\n  }\n\n  return minDist;\n} // Temporal varible for intermediate usage.\n\n\nvar pt0 = new Point();\nvar pt1 = new Point();\nvar pt2 = new Point();\nvar dir = new Point();\nvar dir2 = new Point();\n/**\n * Calculate a proper guide line based on the label position and graphic element definition\n * @param label\n * @param labelRect\n * @param target\n * @param targetRect\n */\n\nexport function updateLabelLinePoints(target, labelLineModel) {\n  if (!target) {\n    return;\n  }\n\n  var labelLine = target.getTextGuideLine();\n  var label = target.getTextContent(); // Needs to create text guide in each charts.\n\n  if (!(label && labelLine)) {\n    return;\n  }\n\n  var labelGuideConfig = target.textGuideLineConfig || {};\n  var points = [[0, 0], [0, 0], [0, 0]];\n  var searchSpace = labelGuideConfig.candidates || DEFAULT_SEARCH_SPACE;\n  var labelRect = label.getBoundingRect().clone();\n  labelRect.applyTransform(label.getComputedTransform());\n  var minDist = Infinity;\n  var anchorPoint = labelGuideConfig.anchor;\n  var targetTransform = target.getComputedTransform();\n  var targetInversedTransform = targetTransform && invert([], targetTransform);\n  var len = labelLineModel.get('length2') || 0;\n\n  if (anchorPoint) {\n    pt2.copy(anchorPoint);\n  }\n\n  for (var i = 0; i < searchSpace.length; i++) {\n    var candidate = searchSpace[i];\n    getCandidateAnchor(candidate, 0, labelRect, pt0, dir);\n    Point.scaleAndAdd(pt1, pt0, dir, len); // Transform to target coord space.\n\n    pt1.transform(targetInversedTransform); // Note: getBoundingRect will ensure the `path` being created.\n\n    var boundingRect = target.getBoundingRect();\n    var dist = anchorPoint ? anchorPoint.distance(pt1) : target instanceof Path ? nearestPointOnPath(pt1, target.path, pt2) : nearestPointOnRect(pt1, boundingRect, pt2); // TODO pt2 is in the path\n\n    if (dist < minDist) {\n      minDist = dist; // Transform back to global space.\n\n      pt1.transform(targetTransform);\n      pt2.transform(targetTransform);\n      pt2.toArray(points[0]);\n      pt1.toArray(points[1]);\n      pt0.toArray(points[2]);\n    }\n  }\n\n  limitTurnAngle(points, labelLineModel.get('minTurnAngle'));\n  labelLine.setShape({\n    points: points\n  });\n} // Temporal variable for the limitTurnAngle function\n\nvar tmpArr = [];\nvar tmpProjPoint = new Point();\n/**\n * Reduce the line segment attached to the label to limit the turn angle between two segments.\n * @param linePoints\n * @param minTurnAngle Radian of minimum turn angle. 0 - 180\n */\n\nexport function limitTurnAngle(linePoints, minTurnAngle) {\n  if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {\n    return;\n  }\n\n  minTurnAngle = minTurnAngle / 180 * Math.PI; // The line points can be\n  //      /pt1----pt2 (label)\n  //     /\n  // pt0/\n\n  pt0.fromArray(linePoints[0]);\n  pt1.fromArray(linePoints[1]);\n  pt2.fromArray(linePoints[2]);\n  Point.sub(dir, pt0, pt1);\n  Point.sub(dir2, pt2, pt1);\n  var len1 = dir.len();\n  var len2 = dir2.len();\n\n  if (len1 < 1e-3 || len2 < 1e-3) {\n    return;\n  }\n\n  dir.scale(1 / len1);\n  dir2.scale(1 / len2);\n  var angleCos = dir.dot(dir2);\n  var minTurnAngleCos = Math.cos(minTurnAngle);\n\n  if (minTurnAngleCos < angleCos) {\n    // Smaller than minTurnAngle\n    // Calculate project point of pt0 on pt1-pt2\n    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n    tmpProjPoint.fromArray(tmpArr); // Calculate new projected length with limited minTurnAngle and get the new connect point\n\n    tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle)); // Limit the new calculated connect point between pt1 and pt2.\n\n    var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n\n    if (isNaN(t)) {\n      return;\n    }\n\n    if (t < 0) {\n      Point.copy(tmpProjPoint, pt1);\n    } else if (t > 1) {\n      Point.copy(tmpProjPoint, pt2);\n    }\n\n    tmpProjPoint.toArray(linePoints[1]);\n  }\n}\n/**\n * Limit the angle of line and the surface\n * @param maxSurfaceAngle Radian of minimum turn angle. 0 - 180. 0 is same direction to normal. 180 is opposite\n */\n\nexport function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {\n  if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {\n    return;\n  }\n\n  maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;\n  pt0.fromArray(linePoints[0]);\n  pt1.fromArray(linePoints[1]);\n  pt2.fromArray(linePoints[2]);\n  Point.sub(dir, pt1, pt0);\n  Point.sub(dir2, pt2, pt1);\n  var len1 = dir.len();\n  var len2 = dir2.len();\n\n  if (len1 < 1e-3 || len2 < 1e-3) {\n    return;\n  }\n\n  dir.scale(1 / len1);\n  dir2.scale(1 / len2);\n  var angleCos = dir.dot(surfaceNormal);\n  var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);\n\n  if (angleCos < maxSurfaceAngleCos) {\n    // Calculate project point of pt0 on pt1-pt2\n    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n    tmpProjPoint.fromArray(tmpArr);\n    var HALF_PI = Math.PI / 2;\n    var angle2 = Math.acos(dir2.dot(surfaceNormal));\n    var newAngle = HALF_PI + angle2 - maxSurfaceAngle;\n\n    if (newAngle >= HALF_PI) {\n      // parallel\n      Point.copy(tmpProjPoint, pt2);\n    } else {\n      // Calculate new projected length with limited minTurnAngle and get the new connect point\n      tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle)); // Limit the new calculated connect point between pt1 and pt2.\n\n      var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n\n      if (isNaN(t)) {\n        return;\n      }\n\n      if (t < 0) {\n        Point.copy(tmpProjPoint, pt1);\n      } else if (t > 1) {\n        Point.copy(tmpProjPoint, pt2);\n      }\n    }\n\n    tmpProjPoint.toArray(linePoints[1]);\n  }\n}\n\nfunction setLabelLineState(labelLine, ignore, stateName, stateModel) {\n  var isNormal = stateName === 'normal';\n  var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName); // Make sure display.\n\n  stateObj.ignore = ignore; // Set smooth\n\n  var smooth = stateModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.3;\n  }\n\n  stateObj.shape = stateObj.shape || {};\n\n  if (smooth > 0) {\n    stateObj.shape.smooth = smooth;\n  }\n\n  var styleObj = stateModel.getModel('lineStyle').getLineStyle();\n  isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;\n}\n\nfunction buildLabelLinePath(path, shape) {\n  var smooth = shape.smooth;\n  var points = shape.points;\n\n  if (!points) {\n    return;\n  }\n\n  path.moveTo(points[0][0], points[0][1]);\n\n  if (smooth > 0 && points.length >= 3) {\n    var len1 = vector.dist(points[0], points[1]);\n    var len2 = vector.dist(points[1], points[2]);\n\n    if (!len1 || !len2) {\n      path.lineTo(points[1][0], points[1][1]);\n      path.lineTo(points[2][0], points[2][1]);\n      return;\n    }\n\n    var moveLen = Math.min(len1, len2) * smooth;\n    var midPoint0 = vector.lerp([], points[1], points[0], moveLen / len1);\n    var midPoint2 = vector.lerp([], points[1], points[2], moveLen / len2);\n    var midPoint1 = vector.lerp([], midPoint0, midPoint2, 0.5);\n    path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);\n    path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points[2][0], points[2][1]);\n  } else {\n    for (var i = 1; i < points.length; i++) {\n      path.lineTo(points[i][0], points[i][1]);\n    }\n  }\n}\n/**\n * Create a label line if necessary and set it's style.\n */\n\n\nexport function setLabelLineStyle(targetEl, statesModels, defaultStyle) {\n  var labelLine = targetEl.getTextGuideLine();\n  var label = targetEl.getTextContent();\n\n  if (!label) {\n    // Not show label line if there is no label.\n    if (labelLine) {\n      targetEl.removeTextGuideLine();\n    }\n\n    return;\n  }\n\n  var normalModel = statesModels.normal;\n  var showNormal = normalModel.get('show');\n  var labelIgnoreNormal = label.ignore;\n\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateName = DISPLAY_STATES[i];\n    var stateModel = statesModels[stateName];\n    var isNormal = stateName === 'normal';\n\n    if (stateModel) {\n      var stateShow = stateModel.get('show');\n      var isLabelIgnored = isNormal ? labelIgnoreNormal : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);\n\n      if (isLabelIgnored // Not show when label is not shown in this state.\n      || !retrieve2(stateShow, showNormal) // Use normal state by default if not set.\n      ) {\n          var stateObj = isNormal ? labelLine : labelLine && labelLine.states.normal;\n\n          if (stateObj) {\n            stateObj.ignore = true;\n          }\n\n          continue;\n        } // Create labelLine if not exists\n\n\n      if (!labelLine) {\n        labelLine = new Polyline();\n        targetEl.setTextGuideLine(labelLine); // Reset state of normal because it's new created.\n        // NOTE: NORMAL should always been the first!\n\n        if (!isNormal && (labelIgnoreNormal || !showNormal)) {\n          setLabelLineState(labelLine, true, 'normal', statesModels.normal);\n        } // Use same state proxy.\n\n\n        if (targetEl.stateProxy) {\n          labelLine.stateProxy = targetEl.stateProxy;\n        }\n      }\n\n      setLabelLineState(labelLine, false, stateName, stateModel);\n    }\n  }\n\n  if (labelLine) {\n    defaults(labelLine.style, defaultStyle); // Not fill.\n\n    labelLine.style.fill = null;\n    var showAbove = normalModel.get('showAbove');\n    var labelLineConfig = targetEl.textGuideLineConfig = targetEl.textGuideLineConfig || {};\n    labelLineConfig.showAbove = showAbove || false; // Custom the buildPath.\n\n    labelLine.buildPath = buildLabelLinePath;\n  }\n}\nexport function getLabelLineStatesModels(itemModel, labelLineName) {\n  labelLineName = labelLineName || 'labelLine';\n  var statesModels = {\n    normal: itemModel.getModel(labelLineName)\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);\n  }\n\n  return statesModels;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO: move labels out of viewport.\nimport { BoundingRect, updateProps, initProps, isElementRemoved } from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { parsePercent } from '../util/number.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { updateLabelLinePoints, setLabelLineStyle, getLabelLineStatesModels } from './labelGuideHelper.js';\nimport { makeInner } from '../util/model.js';\nimport { retrieve2, each, keys, isFunction, filter, indexOf } from 'zrender/lib/core/util.js';\nimport { prepareLayoutList, hideOverlap, shiftLayoutOnX, shiftLayoutOnY } from './labelLayoutHelper.js';\nimport { labelInner, animateLabelValue } from './labelStyle.js';\n\nfunction cloneArr(points) {\n  if (points) {\n    var newPoints = [];\n\n    for (var i = 0; i < points.length; i++) {\n      newPoints.push(points[i].slice());\n    }\n\n    return newPoints;\n  }\n}\n\nfunction prepareLayoutCallbackParams(labelItem, hostEl) {\n  var label = labelItem.label;\n  var labelLine = hostEl && hostEl.getTextGuideLine();\n  return {\n    dataIndex: labelItem.dataIndex,\n    dataType: labelItem.dataType,\n    seriesIndex: labelItem.seriesModel.seriesIndex,\n    text: labelItem.label.style.text,\n    rect: labelItem.hostRect,\n    labelRect: labelItem.rect,\n    // x: labelAttr.x,\n    // y: labelAttr.y,\n    align: label.style.align,\n    verticalAlign: label.style.verticalAlign,\n    labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n  };\n}\n\nvar LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\nvar dummyTransformable = new Transformable();\nvar labelLayoutInnerStore = makeInner();\nvar labelLineAnimationStore = makeInner();\n\nfunction extendWithKeys(target, source, keys) {\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n\n    if (source[key] != null) {\n      target[key] = source[key];\n    }\n  }\n}\n\nvar LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\n\nvar LabelManager =\n/** @class */\nfunction () {\n  function LabelManager() {\n    this._labelList = [];\n    this._chartViewList = [];\n  }\n\n  LabelManager.prototype.clearLabels = function () {\n    this._labelList = [];\n    this._chartViewList = [];\n  };\n  /**\n   * Add label to manager\n   */\n\n\n  LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n    var labelStyle = label.style;\n    var hostEl = label.__hostTarget;\n    var textConfig = hostEl.textConfig || {}; // TODO: If label is in other state.\n\n    var labelTransform = label.getComputedTransform();\n    var labelRect = label.getBoundingRect().plain();\n    BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n\n    if (labelTransform) {\n      dummyTransformable.setLocalTransform(labelTransform);\n    } else {\n      // Identity transform.\n      dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n      dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n    }\n\n    var host = label.__hostTarget;\n    var hostRect;\n\n    if (host) {\n      hostRect = host.getBoundingRect().plain();\n      var transform = host.getComputedTransform();\n      BoundingRect.applyTransform(hostRect, hostRect, transform);\n    }\n\n    var labelGuide = hostRect && host.getTextGuideLine();\n\n    this._labelList.push({\n      label: label,\n      labelLine: labelGuide,\n      seriesModel: seriesModel,\n      dataIndex: dataIndex,\n      dataType: dataType,\n      layoutOption: layoutOption,\n      computedLayoutOption: null,\n      rect: labelRect,\n      hostRect: hostRect,\n      // Label with lower priority will be hidden when overlapped\n      // Use rect size as default priority\n      priority: hostRect ? hostRect.width * hostRect.height : 0,\n      // Save default label attributes.\n      // For restore if developers want get back to default value in callback.\n      defaultAttr: {\n        ignore: label.ignore,\n        labelGuideIgnore: labelGuide && labelGuide.ignore,\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY,\n        rotation: dummyTransformable.rotation,\n        style: {\n          x: labelStyle.x,\n          y: labelStyle.y,\n          align: labelStyle.align,\n          verticalAlign: labelStyle.verticalAlign,\n          width: labelStyle.width,\n          height: labelStyle.height,\n          fontSize: labelStyle.fontSize\n        },\n        cursor: label.cursor,\n        attachedPos: textConfig.position,\n        attachedRot: textConfig.rotation\n      }\n    });\n  };\n\n  LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n    var _this = this;\n\n    this._chartViewList.push(chartView);\n\n    var seriesModel = chartView.__model;\n    var layoutOption = seriesModel.get('labelLayout');\n    /**\n     * Ignore layouting if it's not specified anything.\n     */\n\n    if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\n      return;\n    }\n\n    chartView.group.traverse(function (child) {\n      if (child.ignore) {\n        return true; // Stop traverse descendants.\n      } // Only support label being hosted on graphic elements.\n\n\n      var textEl = child.getTextContent();\n      var ecData = getECData(child); // Can only attach the text on the element with dataIndex\n\n      if (textEl && !textEl.disableLabelLayout) {\n        _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n      }\n    });\n  };\n\n  LabelManager.prototype.updateLayoutConfig = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n\n    function createDragHandler(el, labelLineModel) {\n      return function () {\n        updateLabelLinePoints(el, labelLineModel);\n      };\n    }\n\n    for (var i = 0; i < this._labelList.length; i++) {\n      var labelItem = this._labelList[i];\n      var label = labelItem.label;\n      var hostEl = label.__hostTarget;\n      var defaultLabelAttr = labelItem.defaultAttr;\n      var layoutOption = void 0; // TODO A global layout option?\n\n      if (isFunction(labelItem.layoutOption)) {\n        layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n      } else {\n        layoutOption = labelItem.layoutOption;\n      }\n\n      layoutOption = layoutOption || {};\n      labelItem.computedLayoutOption = layoutOption;\n      var degreeToRadian = Math.PI / 180; // TODO hostEl should always exists.\n      // Or label should not have parent because the x, y is all in global space.\n\n      if (hostEl) {\n        hostEl.setTextConfig({\n          // Force to set local false.\n          local: false,\n          // Ignore position and rotation config on the host el if x or y is changed.\n          position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n          // Ignore rotation config on the host el if rotation is changed.\n          rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n          offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n        });\n      }\n\n      var needsUpdateLabelLine = false;\n\n      if (layoutOption.x != null) {\n        // TODO width of chart view.\n        label.x = parsePercent(layoutOption.x, width);\n        label.setStyle('x', 0); // Ignore movement in style. TODO: origin.\n\n        needsUpdateLabelLine = true;\n      } else {\n        label.x = defaultLabelAttr.x;\n        label.setStyle('x', defaultLabelAttr.style.x);\n      }\n\n      if (layoutOption.y != null) {\n        // TODO height of chart view.\n        label.y = parsePercent(layoutOption.y, height);\n        label.setStyle('y', 0); // Ignore movement in style.\n\n        needsUpdateLabelLine = true;\n      } else {\n        label.y = defaultLabelAttr.y;\n        label.setStyle('y', defaultLabelAttr.style.y);\n      }\n\n      if (layoutOption.labelLinePoints) {\n        var guideLine = hostEl.getTextGuideLine();\n\n        if (guideLine) {\n          guideLine.setShape({\n            points: layoutOption.labelLinePoints\n          }); // Not update\n\n          needsUpdateLabelLine = false;\n        }\n      }\n\n      var labelLayoutStore = labelLayoutInnerStore(label);\n      labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n      label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n      label.scaleX = defaultLabelAttr.scaleX;\n      label.scaleY = defaultLabelAttr.scaleY;\n\n      for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n        var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n        label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n      }\n\n      if (layoutOption.draggable) {\n        label.draggable = true;\n        label.cursor = 'move';\n\n        if (hostEl) {\n          var hostModel = labelItem.seriesModel;\n\n          if (labelItem.dataIndex != null) {\n            var data = labelItem.seriesModel.getData(labelItem.dataType);\n            hostModel = data.getItemModel(labelItem.dataIndex);\n          }\n\n          label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n        }\n      } else {\n        // TODO Other drag functions?\n        label.off('drag');\n        label.cursor = defaultLabelAttr.cursor;\n      }\n    }\n  };\n\n  LabelManager.prototype.layout = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var labelList = prepareLayoutList(this._labelList);\n    var labelsNeedsAdjustOnX = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftX';\n    });\n    var labelsNeedsAdjustOnY = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftY';\n    });\n    shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n    shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n    var labelsNeedsHideOverlap = filter(labelList, function (item) {\n      return item.layoutOption.hideOverlap;\n    });\n    hideOverlap(labelsNeedsHideOverlap);\n  };\n  /**\n   * Process all labels. Not only labels with layoutOption.\n   */\n\n\n  LabelManager.prototype.processLabelsOverall = function () {\n    var _this = this;\n\n    each(this._chartViewList, function (chartView) {\n      var seriesModel = chartView.__model;\n      var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n      var animationEnabled = seriesModel.isAnimationEnabled();\n      chartView.group.traverse(function (child) {\n        if (child.ignore && !child.forceLabelAnimation) {\n          return true; // Stop traverse descendants.\n        }\n\n        var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n        var label = child.getTextContent();\n\n        if (!needsUpdateLabelLine && label) {\n          needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n        }\n\n        if (needsUpdateLabelLine) {\n          _this._updateLabelLine(child, seriesModel);\n        }\n\n        if (animationEnabled) {\n          _this._animateLabels(child, seriesModel);\n        }\n      });\n    });\n  };\n\n  LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n    // Only support label being hosted on graphic elements.\n    var textEl = el.getTextContent(); // Update label line style.\n\n    var ecData = getECData(el);\n    var dataIndex = ecData.dataIndex; // Only support labelLine on the labels represent data.\n\n    if (textEl && dataIndex != null) {\n      var data = seriesModel.getData(ecData.dataType);\n      var itemModel = data.getItemModel(dataIndex);\n      var defaultStyle = {};\n      var visualStyle = data.getItemVisual(dataIndex, 'style');\n      var visualType = data.getVisual('drawType'); // Default to be same with main color\n\n      defaultStyle.stroke = visualStyle[visualType];\n      var labelLineModel = itemModel.getModel('labelLine');\n      setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\n      updateLabelLinePoints(el, labelLineModel);\n    }\n  };\n\n  LabelManager.prototype._animateLabels = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var guideLine = el.getTextGuideLine(); // Animate\n\n    if (textEl // `forceLabelAnimation` has the highest priority\n    && (el.forceLabelAnimation || !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !isElementRemoved(el))) {\n      var layoutStore = labelLayoutInnerStore(textEl);\n      var oldLayout = layoutStore.oldLayout;\n      var ecData = getECData(el);\n      var dataIndex = ecData.dataIndex;\n      var newProps = {\n        x: textEl.x,\n        y: textEl.y,\n        rotation: textEl.rotation\n      };\n      var data = seriesModel.getData(ecData.dataType);\n\n      if (!oldLayout) {\n        textEl.attr(newProps); // Disable fade in animation if value animation is enabled.\n\n        if (!labelInner(textEl).valueAnimation) {\n          var oldOpacity = retrieve2(textEl.style.opacity, 1); // Fade in animation\n\n          textEl.style.opacity = 0;\n          initProps(textEl, {\n            style: {\n              opacity: oldOpacity\n            }\n          }, seriesModel, dataIndex);\n        }\n      } else {\n        textEl.attr(oldLayout); // Make sure the animation from is in the right status.\n\n        var prevStates = el.prevStates;\n\n        if (prevStates) {\n          if (indexOf(prevStates, 'select') >= 0) {\n            textEl.attr(layoutStore.oldLayoutSelect);\n          }\n\n          if (indexOf(prevStates, 'emphasis') >= 0) {\n            textEl.attr(layoutStore.oldLayoutEmphasis);\n          }\n        }\n\n        updateProps(textEl, newProps, seriesModel, dataIndex);\n      }\n\n      layoutStore.oldLayout = newProps;\n\n      if (textEl.states.select) {\n        var layoutSelect = layoutStore.oldLayoutSelect = {};\n        extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n      }\n\n      if (textEl.states.emphasis) {\n        var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n        extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n      }\n\n      animateLabelValue(textEl, dataIndex, data, seriesModel, seriesModel);\n    }\n\n    if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n      var layoutStore = labelLineAnimationStore(guideLine);\n      var oldLayout = layoutStore.oldLayout;\n      var newLayout = {\n        points: guideLine.shape.points\n      };\n\n      if (!oldLayout) {\n        guideLine.setShape(newLayout);\n        guideLine.style.strokePercent = 0;\n        initProps(guideLine, {\n          style: {\n            strokePercent: 1\n          }\n        }, seriesModel);\n      } else {\n        guideLine.attr({\n          shape: oldLayout\n        });\n        updateProps(guideLine, {\n          shape: newLayout\n        }, seriesModel);\n      }\n\n      layoutStore.oldLayout = newLayout;\n    }\n  };\n\n  return LabelManager;\n}();\n\nexport default LabelManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../util/model.js';\nimport LabelManager from './LabelManager.js';\nvar getLabelManager = makeInner();\nexport function installLabelLayout(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var labelManager = getLabelManager(api).labelManager;\n\n    if (!labelManager) {\n      labelManager = getLabelManager(api).labelManager = new LabelManager();\n    }\n\n    labelManager.clearLabels();\n  });\n  registers.registerUpdateLifecycle('series:layoutlabels', function (ecModel, api, params) {\n    var labelManager = getLabelManager(api).labelManager;\n    params.updatedSeries.forEach(function (series) {\n      labelManager.addLabelsOfSeries(api.getViewOfSeriesModel(series));\n    });\n    labelManager.updateLayoutConfig(api);\n    labelManager.layout(api);\n    labelManager.processLabelsOverall();\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport function getBasicPieLayout(seriesModel, api) {\n  var viewRect = getViewRect(seriesModel, api);\n  var center = seriesModel.get('center');\n  var radius = seriesModel.get('radius');\n\n  if (!zrUtil.isArray(radius)) {\n    radius = [0, radius];\n  }\n\n  if (!zrUtil.isArray(center)) {\n    center = [center, center];\n  }\n\n  var width = parsePercent(viewRect.width, api.getWidth());\n  var height = parsePercent(viewRect.height, api.getHeight());\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], width) + viewRect.x;\n  var cy = parsePercent(center[1], height) + viewRect.y;\n  var r0 = parsePercent(radius[0], size / 2);\n  var r = parsePercent(radius[1], size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r\n  };\n}\nexport default function pieLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n\n    var _a = getBasicPieLayout(seriesModel, api),\n        cx = _a.cx,\n        cy = _a.cy,\n        r = _a.r,\n        r0 = _a.r0;\n\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.setLayout({\n      viewRect: viewRect,\n      r: r\n    });\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle_1 = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_1 = data.getItemLayout(idx);\n            layout_1.angle = angle_1;\n            layout_1.startAngle = startAngle + dir * idx * angle_1;\n            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_2 = data.getItemLayout(idx);\n            var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\n            layout_2.startAngle = currentAngle;\n            layout_2.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nimport { parsePercent } from '../../util/number.js';\nimport { Point } from '../../util/graphic.js';\nimport { each, isNumber } from 'zrender/lib/core/util.js';\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper.js';\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper.js';\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  if (list.length < 2) {\n    return;\n  }\n\n  ;\n\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n    var rB = semi.rB;\n    var rB2 = rB * rB;\n\n    for (var i = 0; i < semi.list.length; i++) {\n      var item = semi.list[i];\n      var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\n\n      var rA = r + item.len;\n      var rA2 = rA * rA; // Use ellipse implicit function to calculate x\n\n      var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\n      var newX = cx + (dx + item.len2) * dir;\n      var deltaX = newX - item.label.x;\n      var newTargetWidth = item.targetTextWidth - deltaX * dir; // text x is changed, so need to recalculate width.\n\n      constrainTextWidth(item, newTargetWidth, true);\n      item.label.x = newX;\n    }\n  } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n\n\n  function recalculateX(items) {\n    // Extremes of\n    var topSemi = {\n      list: [],\n      maxY: 0\n    };\n    var bottomSemi = {\n      list: [],\n      maxY: 0\n    };\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var item = items[i];\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\n      var dy = Math.abs(item.label.y - cy);\n\n      if (dy >= semi.maxY) {\n        var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\n\n        var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\n\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n        semi.rB = rB;\n        semi.maxY = dy;\n      }\n\n      semi.list.push(item);\n    }\n\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n  }\n\n  var len = list.length;\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].label.x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].label.x = farthestX;\n    }\n  }\n\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n    recalculateX(list);\n  }\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var label = labelLayoutList[i].label;\n\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (label.x < cx) {\n      leftmostX = Math.min(leftmostX, label.x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, label.x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      if (layout.labelStyleWidth != null) {\n        continue;\n      }\n\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var targetTextWidth = void 0;\n\n      if (layout.labelAlignTo === 'edge') {\n        if (label.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n        }\n      } else if (layout.labelAlignTo === 'labelLine') {\n        if (label.x < cx) {\n          targetTextWidth = leftmostX - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - rightmostX - layout.bleedMargin;\n        }\n      } else {\n        if (label.x < cx) {\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n        }\n      }\n\n      layout.targetTextWidth = targetTextWidth;\n      constrainTextWidth(layout, targetTextWidth);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var padding = label.style.padding;\n      var paddingH = padding ? padding[1] + padding[3] : 0; // textRect.width already contains paddingH if bgColor is set\n\n      var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;\n      var realTextWidth = layout.rect.width + extraPaddingH;\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          linePoints[2][0] = label.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = label.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = label.y;\n    }\n  }\n}\n/**\n * Set max width of each label, and then wrap each label to the max width.\n *\n * @param layout label layout\n * @param availableWidth max width for the label to display\n * @param forceRecalculate recaculate the text layout even if the current width\n * is smaller than `availableWidth`. This is useful when the text was previously\n * wrapped by calling `constrainTextWidth` but now `availableWidth` changed, in\n * which case, previous wrapping should be redo.\n */\n\n\nfunction constrainTextWidth(layout, availableWidth, forceRecalculate) {\n  if (forceRecalculate === void 0) {\n    forceRecalculate = false;\n  }\n\n  if (layout.labelStyleWidth != null) {\n    // User-defined style.width has the highest priority.\n    return;\n  }\n\n  var label = layout.label;\n  var style = label.style;\n  var textRect = layout.rect;\n  var bgColor = style.backgroundColor;\n  var padding = style.padding;\n  var paddingH = padding ? padding[1] + padding[3] : 0;\n  var overflow = style.overflow; // textRect.width already contains paddingH if bgColor is set\n\n  var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);\n\n  if (availableWidth < oldOuterWidth || forceRecalculate) {\n    var oldHeight = textRect.height;\n\n    if (overflow && overflow.match('break')) {\n      // Temporarily set background to be null to calculate\n      // the bounding box without backgroud.\n      label.setStyle('backgroundColor', null); // Set constraining width\n\n      label.setStyle('width', availableWidth - paddingH); // This is the real bounding box of the text without padding\n\n      var innerRect = label.getBoundingRect();\n      label.setStyle('width', Math.ceil(innerRect.width));\n      label.setStyle('backgroundColor', bgColor);\n    } else {\n      var availableInnerWidth = availableWidth - paddingH;\n      var newWidth = availableWidth < oldOuterWidth // Current text is too wide, use `availableWidth` as max width.\n      ? availableInnerWidth : // Current available width is enough, but the text may have\n      // already been wrapped with a smaller available width.\n      forceRecalculate ? availableInnerWidth > layout.unconstrainedWidth // Current available is larger than text width,\n      // so don't constrain width (otherwise it may have\n      // empty space in the background).\n      ? null // Current available is smaller than text width, so\n      // use the current available width as constraining\n      // width.\n      : availableInnerWidth : // Current available width is enough, so no need to\n      // constrain.\n      null;\n      label.setStyle('width', newWidth);\n    }\n\n    var newRect = label.getBoundingRect();\n    textRect.width = newRect.width;\n    var margin = (label.style.margin || 0) + 2.1;\n    textRect.height = newRect.height + margin;\n    textRect.y -= (textRect.height - oldHeight) / 2;\n  }\n}\n\nfunction isPositionCenter(sectorShape) {\n  // Not change x for center label\n  return sectorShape.position === 'center';\n}\n\nexport default function pieLabelLayout(seriesModel) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  var viewRect = data.getLayout('viewRect');\n  var r = data.getLayout('r');\n  var viewWidth = viewRect.width;\n  var viewLeft = viewRect.x;\n  var viewTop = viewRect.y;\n  var viewHeight = viewRect.height;\n\n  function setNotShow(el) {\n    el.ignore = true;\n  }\n\n  function isLabelShown(label) {\n    if (!label.ignore) {\n      return true;\n    }\n\n    for (var key in label.states) {\n      if (label.states[key].ignore === false) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  data.each(function (idx) {\n    var sector = data.getItemGraphicEl(idx);\n    var sectorShape = sector.shape;\n    var label = sector.getTextContent();\n    var labelLine = sector.getTextGuideLine();\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n      each(label.states, setNotShow);\n      label.ignore = true;\n      return;\n    }\n\n    if (!isLabelShown(label)) {\n      return;\n    }\n\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n    var nx = Math.cos(midAngle);\n    var ny = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = sectorShape.cx;\n    cy = sectorShape.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = sectorShape.cx;\n      textY = sectorShape.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n      textX = x1 + nx * 3;\n      textY = y1 + ny * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n        } else {\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n    }\n\n    var PI = Math.PI;\n    var labelRotate = 0;\n    var rotate = labelModel.get('rotate');\n\n    if (isNumber(rotate)) {\n      labelRotate = rotate * (PI / 180);\n    } else if (labelPosition === 'center') {\n      labelRotate = 0;\n    } else if (rotate === 'radial' || rotate === true) {\n      var radialAngle = nx < 0 ? -midAngle + PI : -midAngle;\n      labelRotate = radialAngle;\n    } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\n      var rad = Math.atan2(nx, ny);\n\n      if (rad < 0) {\n        rad = PI * 2 + rad;\n      }\n\n      var isDown = ny > 0;\n\n      if (isDown) {\n        rad = PI + rad;\n      }\n\n      labelRotate = rad - PI;\n    }\n\n    hasLabelRotate = !!labelRotate;\n    label.x = textX;\n    label.y = textY;\n    label.rotation = labelRotate;\n    label.setStyle({\n      verticalAlign: 'middle'\n    }); // Not sectorShape the inside label\n\n    if (!isLabelInside) {\n      var textRect = label.getBoundingRect().clone();\n      textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\n\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.y -= margin / 2;\n      textRect.height += margin;\n      labelLayoutList.push({\n        label: label,\n        labelLine: labelLine,\n        position: labelPosition,\n        len: labelLineLen,\n        len2: labelLineLen2,\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n        surfaceNormal: new Point(nx, ny),\n        linePoints: linePoints,\n        textAlign: textAlign,\n        labelDistance: labelDistance,\n        labelAlignTo: labelAlignTo,\n        edgeDistance: edgeDistance,\n        bleedMargin: bleedMargin,\n        rect: textRect,\n        unconstrainedWidth: textRect.width,\n        labelStyleWidth: label.style.width\n      });\n    } else {\n      label.setStyle({\n        align: textAlign\n      });\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    sector.setTextConfig({\n      inside: isLabelInside\n    });\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n    var labelLine = layout.labelLine;\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\n\n    if (label) {\n      label.setStyle({\n        align: layout.textAlign\n      });\n\n      if (notShowLabel) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n      }\n\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    if (labelLine) {\n      var linePoints = layout.linePoints;\n\n      if (notShowLabel || !linePoints) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      } else {\n        limitTurnAngle(linePoints, layout.minTurnAngle);\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n        labelLine.setShape({\n          points: linePoints\n        }); // Set the anchor to the midpoint of sector\n\n        label.__hostTarget.textGuideLineConfig = {\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\n        };\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray, map } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nexport function getSectorCornerRadius(model, shape, zeroIfNull) {\n  var cornerRadius = model.get('borderRadius');\n\n  if (cornerRadius == null) {\n    return zeroIfNull ? {\n      cornerRadius: 0\n    } : null;\n  }\n\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\n  }\n\n  var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\n  return {\n    cornerRadius: map(cornerRadius, function (cr) {\n      return parsePercent(cr, dr);\n    })\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { extend, retrieve3 } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport labelLayout from './labelLayout.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getSectorCornerRadius } from '../helper/pieHelper.js';\nimport { saveOldStyle } from '../../animation/basicTrasition.js';\nimport { getBasicPieLayout } from './pieLayout.js';\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar PiePiece =\n/** @class */\nfunction (_super) {\n  __extends(PiePiece, _super);\n\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = 2;\n    var text = new graphic.Text();\n\n    _this.setTextContent(text);\n\n    _this.updateData(data, idx, startAngle, true);\n\n    return _this;\n  }\n\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx); // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\n    // see `setItemLayout` in `pieLayout.ts`.\n\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout); // Ignore NaN data.\n\n    if (isNaN(sectorShape.startAngle)) {\n      // Use NaN shape to avoid drawing shape.\n      sector.setShape(sectorShape);\n      return;\n    }\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n\n      if (seriesModel.ecModel.ssr) {\n        // Use scale animation in SSR mode(opacity?)\n        // Because CSS SVG animation doesn't support very customized shape animation.\n        graphic.initProps(sector, {\n          scaleX: 0,\n          scaleY: 0\n        }, seriesModel, {\n          dataIndex: idx,\n          isFrom: true\n        });\n        sector.originX = sectorShape.cx;\n        sector.originY = sectorShape.cy;\n      } else if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      } // Expansion\n      else {\n          if (startAngle != null) {\n            sector.setShape({\n              startAngle: startAngle,\n              endAngle: startAngle\n            });\n            graphic.initProps(sector, {\n              shape: {\n                startAngle: layout.startAngle,\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          } else {\n            sector.shape.endAngle = layout.startAngle;\n            graphic.updateProps(sector, {\n              shape: {\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          }\n        }\n    } else {\n      saveOldStyle(sector); // Transition animation from the old shape\n\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n\n    this._updateLabel(seriesModel, data, idx);\n\n    sector.ensureState('emphasis').shape = extend({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    extend(sector.ensureState('blur'), {\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    labelLine && extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    }); // TODO: needs dx, dy in zrender?\n\n    extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent(); // Set textConfig on sector.\n\n    sector.setTextConfig({\n      // reset position, rotation\n      position: null,\n      rotation: null\n    }); // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    labelText.attr({\n      z2: 10\n    });\n    var labelPosition = seriesModel.get(['label', 'position']);\n\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n      sector.removeTextGuideLine();\n    } else {\n      var polyline = this.getTextGuideLine();\n\n      if (!polyline) {\n        polyline = new graphic.Polyline();\n        this.setTextGuideLine(polyline);\n      } // Default use item visual color\n\n\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n        stroke: visualColor,\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n      });\n    }\n  };\n\n  return PiePiece;\n}(graphic.Sector); // Pie view\n\n\nvar PieView =\n/** @class */\nfunction (_super) {\n  __extends(PieView, _super);\n\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  PieView.prototype.init = function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  };\n\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle; // First render\n\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    } // remove empty-circle if it exists\n\n\n    if (this._emptyCircleSector) {\n      group.remove(this._emptyCircleSector);\n    } // when all data are filtered, show lightgray empty circle\n\n\n    if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\n      var sector = new graphic.Sector({\n        shape: getBasicPieLayout(seriesModel, api)\n      });\n      sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\n      this._emptyCircleSector = sector;\n      group.add(sector);\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout(seriesModel); // Always use initial animation.\n\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n\n  PieView.prototype.dispose = function () {};\n\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  PieView.type = 'pie';\n  return PieView;\n}(ChartView);\n\nexport default PieView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { getPercentWithPrecision } from '../../util/number.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar PieSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PieSeriesModel, _super);\n\n  function PieSeriesModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n\n    this._defaultLabelLine(option);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.mergeOption = function () {\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getInitialData = function () {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex); // FIXME toFixed?\n\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  };\n\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n\n  PieSeriesModel.type = 'series.pie';\n  PieSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // color: 'inherit',\n      // If rotate around circle\n      rotate: 0,\n      show: true,\n      overflow: 'truncate',\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      edgeDistance: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见TEXTSTYLE\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      minTurnAngle: 90,\n      maxSurfaceAngle: 90,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderJoin: 'round'\n    },\n    showEmptyCircle: true,\n    emptyCircleStyle: {\n      color: 'lightgray',\n      opacity: 1\n    },\n    labelLayout: {\n      // Hide the overlapped label.\n      hideOverlap: true\n    },\n    emphasis: {\n      scale: true,\n      scaleSize: 5\n    },\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasingUpdate: 'cubicInOut',\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut'\n  };\n  return PieSeriesModel;\n}(SeriesModel);\n\nexport default PieSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function negativeDataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        // handle negative value condition\n        var valueDim = data.mapDimension('value');\n        var curValue = data.get(valueDim, idx);\n\n        if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\nimport pieLayout from '../pie/pieLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport PieView from './PieView.js';\nimport PieSeriesModel from './PieSeries.js';\nimport negativeDataFilter from '../../processor/negativeDataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(PieView);\n  registers.registerSeriesModel(PieSeriesModel);\n  createLegacyDataSelectAction('pie', registers.registerAction);\n  registers.registerLayout(curry(pieLayout, 'pie'));\n  registers.registerProcessor(dataFilter('pie'));\n  registers.registerProcessor(negativeDataFilter('pie'));\n}","<template>\n  <v-chart v-if=\"currencies\" :option=\"balanceChartOptions\" :theme=\"getChartTheme\" autoresize />\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { Getter } from 'vuex-class';\nimport ECharts from 'vue-echarts';\nimport { EChartsOption } from 'echarts';\n\nimport { use } from 'echarts/core';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { PieChart } from 'echarts/charts';\nimport { LabelLayout } from 'echarts/features';\nimport {\n  DatasetComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n} from 'echarts/components';\n\nimport { BalanceRecords } from '@/types';\nimport { formatPriceCurrency } from '@/shared/formatters';\n\nuse([\n  PieChart,\n  CanvasRenderer,\n  DatasetComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n  LabelLayout,\n]);\n\n@Component({\n  components: {\n    'v-chart': ECharts,\n  },\n})\nexport default class BalanceChart extends Vue {\n  @Prop({ required: true }) currencies!: BalanceRecords[];\n\n  @Prop({ default: false, type: Boolean }) showTitle!: boolean;\n\n  @Getter getChartTheme!: string;\n\n  get balanceChartOptions(): EChartsOption {\n    return {\n      title: {\n        text: 'Balance',\n        show: this.showTitle,\n      },\n      center: ['50%', '50%'],\n      backgroundColor: 'rgba(0, 0, 0, 0)',\n      dataset: {\n        dimensions: ['balance', 'currency', 'est_stake', 'free', 'used', 'stake'],\n        source: this.currencies,\n      },\n      tooltip: {\n        trigger: 'item',\n        formatter: (params) => {\n          return `${formatPriceCurrency(params.value.balance, params.value.currency, 8)}<br />${\n            params.percent\n          }% (${formatPriceCurrency(params.value.est_stake, params.value.stake)})`;\n        },\n      },\n      // legend: {\n      //   orient: 'vertical',\n      //   right: 10,\n      //   top: 20,\n      //   bottom: 20,\n      // },\n      series: [\n        {\n          type: 'pie',\n          radius: ['40%', '70%'],\n\n          encode: {\n            value: 'est_stake',\n            itemName: 'currency',\n            tooltip: ['balance', 'currency'],\n          },\n          label: {\n            formatter: '{b} - {d}%',\n          },\n          tooltip: {\n            show: true,\n          },\n        },\n      ],\n    };\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.echarts {\n  width: 100%;\n  height: 100%;\n  min-height: 240px;\n}\n</style>\n","\n<v-chart v-if=\"currencies\" :option=\"balanceChartOptions\" :theme=\"getChartTheme\" autoresize />\n","<template>\n  <div>\n    <div class=\"mb-2\">\n      <label class=\"mr-auto h3\">Balance</label>\n      <b-button class=\"float-right\" size=\"sm\" @click=\"getBalance\">&#x21bb;</b-button>\n      <b-form-checkbox\n        v-model=\"hideSmallBalances\"\n        class=\"float-right\"\n        size=\"sm\"\n        title=\"Hide small balances\"\n        button\n      >\n        <HideIcon v-if=\"hideSmallBalances\" :size=\"16\" />\n        <ShowIcon v-else :size=\"16\" />\n      </b-form-checkbox>\n    </div>\n    <BalanceChart v-if=\"balanceCurrencies\" :currencies=\"balanceCurrencies\" />\n    <div>\n      <p v-if=\"balance.note\">\n        <strong>{{ balance.note }}</strong>\n      </p>\n      <b-table class=\"table-sm\" :items=\"balanceCurrencies\" :fields=\"tableFields\">\n        <template slot=\"bottom-row\">\n          <td><strong>Total</strong></td>\n          <td>\n            <span class=\"font-italic\" title=\"Increase over initial capital\">{{\n              formatPercent(balance.starting_capital_ratio)\n            }}</span>\n          </td>\n          <!-- this is a computed prop that adds up all the expenses in the visible rows -->\n          <td>\n            <strong>{{ formatCurrency(balance.total) }}</strong>\n          </td>\n        </template>\n      </b-table>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator';\nimport { namespace } from 'vuex-class';\nimport { BalanceInterface } from '@/types';\nimport HideIcon from 'vue-material-design-icons/EyeOff.vue';\nimport ShowIcon from 'vue-material-design-icons/Eye.vue';\nimport BalanceChart from '@/components/charts/BalanceChart.vue';\nimport { BotStoreGetters } from '@/store/modules/ftbot';\nimport StoreModules from '@/store/storeSubModules';\nimport { formatPercent } from '@/shared/formatters';\nconst ftbot = namespace(StoreModules.ftbot);\n\n@Component({\n  components: { HideIcon, ShowIcon, BalanceChart },\n})\nexport default class Balance extends Vue {\n  @ftbot.Action getBalance;\n\n  @ftbot.Getter [BotStoreGetters.balance]!: BalanceInterface;\n\n  @ftbot.Getter [BotStoreGetters.stakeCurrencyDecimals]!: number;\n\n  hideSmallBalances = true;\n  formatPercent = formatPercent;\n\n  get smallBalance(): number {\n    return Number((0.1 ** this.stakeCurrencyDecimals).toFixed(8));\n  }\n\n  get balanceCurrencies() {\n    if (!this.hideSmallBalances) {\n      return this.balance.currencies;\n    }\n\n    return this.balance?.currencies?.filter((v) => v.est_stake >= this.smallBalance);\n  }\n\n  get tableFields() {\n    return [\n      { key: 'currency', label: 'Currency' },\n      { key: 'free', label: 'Available', formatter: 'formatCurrency' },\n      { key: 'est_stake', label: `in ${this.balance.stake}`, formatter: 'formatCurrency' },\n    ];\n  }\n\n  mounted() {\n    this.getBalance();\n  }\n\n  formatCurrency(value) {\n    return value ? value.toFixed(5) : '';\n  }\n}\n</script>\n","\n<div>\n  <div class=\"mb-2\">\n    <label class=\"mr-auto h3\">Balance</label>\n    <b-button class=\"float-right\" size=\"sm\" @click=\"getBalance\">&#x21bb;</b-button>\n    <b-form-checkbox\n      v-model=\"hideSmallBalances\"\n      class=\"float-right\"\n      size=\"sm\"\n      title=\"Hide small balances\"\n      button\n    >\n      <HideIcon v-if=\"hideSmallBalances\" :size=\"16\" />\n      <ShowIcon v-else :size=\"16\" />\n    </b-form-checkbox>\n  </div>\n  <BalanceChart v-if=\"balanceCurrencies\" :currencies=\"balanceCurrencies\" />\n  <div>\n    <p v-if=\"balance.note\">\n      <strong>{{ balance.note }}</strong>\n    </p>\n    <b-table class=\"table-sm\" :items=\"balanceCurrencies\" :fields=\"tableFields\">\n      <template slot=\"bottom-row\">\n        <td><strong>Total</strong></td>\n        <td>\n          <span class=\"font-italic\" title=\"Increase over initial capital\">{{\n            formatPercent(balance.starting_capital_ratio)\n          }}</span>\n        </td>\n        <!-- this is a computed prop that adds up all the expenses in the visible rows -->\n        <td>\n          <strong>{{ formatCurrency(balance.total) }}</strong>\n        </td>\n      </template>\n    </b-table>\n  </div>\n</div>\n"],"names":["render","staticRenderFns","PI2","vector.dist","vector.lerp","LabelManager","RADIAN","layout.getLayoutRect","zrUtil.isArray","parsePercent","graphic.Text","graphic.initProps","graphic.updateProps","graphic.Polyline","graphic.Sector","graphic.Group","graphic.removeElementWithFadeOut","labelLayout","LegendVisualProvider","zrUtil.bind","zrUtil.curry","modelUtil.defaultEmphasis","PieView","PieSeriesModel","BalanceChart","Balance"],"mappings":"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"}