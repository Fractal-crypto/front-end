{"version":3,"file":"TradesList.7aafc3cb.js","sources":["../../src/components/ftbot/CustomTradeListEntry.vue","../../src/components/ftbot/CustomTradeListEntry.vue?vue&type=template&lang.js","../../src/components/ftbot/CustomTradeList.vue","../../src/components/ftbot/CustomTradeList.vue?vue&type=template&lang.js","../../node_modules/vue-material-design-icons/ArrowLeft.vue?vue&type=template&lang.js","../../node_modules/vue-material-design-icons/ArrowLeft.vue","../../src/views/TradesList.vue","../../src/views/TradesList.vue?vue&type=template&lang.js"],"sourcesContent":["<template>\n  <div class=\"d-flex\">\n    <div\n      class=\"px-1 d-flex flex-row flex-fill text-left justify-content-between align-items-center\"\n    >\n      <span>\n        <span class=\"mr-1 font-weight-bold\">{{ trade.pair }}</span>\n        <small class=\"text-secondary\">(#{{ trade.trade_id }})</small>\n      </span>\n      <small>\n        <DateTimeTZ :date=\"trade.open_timestamp\" :date-only=\"true\" title=\"open Date\" />\n      </small>\n    </div>\n    <trade-profit class=\"col-5\" :trade=\"trade\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from '@vue/composition-api';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { formatPercent, formatPrice } from '@/shared/formatters';\nimport { Trade } from '@/types';\nimport DateTimeTZ from '@/components/general/DateTimeTZ.vue';\nimport TradeProfit from './TradeProfit.vue';\n\nexport default defineComponent({\n  components: {\n    DateTimeTZ,\n    TradeProfit,\n  },\n  props: {\n    trade: {\n      type: Object as () => Trade,\n      required: true,\n    },\n    stakeCurrencyDecimals: {\n      type: Number,\n      required: true,\n    },\n    showDetails: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup() {\n    return {\n      formatPrice,\n      formatPercent,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.card-body {\n  padding: 0 0.2em;\n}\n.table-sm {\n  font-size: $fontsize-small;\n}\n.btn-xs {\n  padding: 0.1rem 0.25rem;\n  font-size: 0.75rem;\n}\n</style>\n","\n<div class=\"d-flex\">\n  <div\n    class=\"px-1 d-flex flex-row flex-fill text-left justify-content-between align-items-center\"\n  >\n    <span>\n      <span class=\"mr-1 font-weight-bold\">{{ trade.pair }}</span>\n      <small class=\"text-secondary\">(#{{ trade.trade_id }})</small>\n    </span>\n    <small>\n      <DateTimeTZ :date=\"trade.open_timestamp\" :date-only=\"true\" title=\"open Date\" />\n    </small>\n  </div>\n  <trade-profit class=\"col-5\" :trade=\"trade\" />\n</div>\n","<template>\n  <div class=\"h-100 overflow-auto p-1\">\n    <b-list-group id=\"tradeList\">\n      <b-list-group-item\n        v-for=\"trade in filteredTrades\"\n        :key=\"trade.trade_id\"\n        class=\"border border-secondary rounded my-05 px-1\"\n        @click=\"tradeClick(trade)\"\n      >\n        <CustomTradeListEntry :trade=\"trade\" :stake-currency-decimals=\"stakeCurrencyDecimals\" />\n      </b-list-group-item>\n    </b-list-group>\n\n    <span v-if=\"trades.length == 0\" class=\"mt-5\">{{ emptyText }}</span>\n\n    <div class=\"w-100 d-flex justify-content-between mt-1\">\n      <b-pagination\n        v-if=\"!activeTrades\"\n        v-model=\"currentPage\"\n        :total-rows=\"rows\"\n        :per-page=\"perPage\"\n        aria-controls=\"tradeList\"\n      ></b-pagination>\n      <b-input\n        v-if=\"showFilter\"\n        v-model=\"filterText\"\n        type=\"text\"\n        placeholder=\"Filter\"\n        size=\"sm\"\n        style=\"width: unset\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { namespace } from 'vuex-class';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { formatPercent, formatPrice } from '@/shared/formatters';\nimport { MultiDeletePayload, MultiForcesellPayload, Trade } from '@/types';\nimport DeleteIcon from 'vue-material-design-icons/Delete.vue';\nimport ForceSellIcon from 'vue-material-design-icons/CloseBoxMultiple.vue';\nimport ActionIcon from 'vue-material-design-icons/GestureTap.vue';\nimport DateTimeTZ from '@/components/general/DateTimeTZ.vue';\nimport StoreModules from '@/store/storeSubModules';\nimport CustomTradeListEntry from '@/components/ftbot/CustomTradeListEntry.vue';\nimport TradeProfit from './TradeProfit.vue';\n\nconst ftbot = namespace(StoreModules.ftbot);\n\n@Component({\n  components: {\n    DeleteIcon,\n    ForceSellIcon,\n    ActionIcon,\n    DateTimeTZ,\n    TradeProfit,\n    CustomTradeListEntry,\n  },\n})\nexport default class CustomTradeList extends Vue {\n  $refs!: {\n    tradesTable: HTMLFormElement;\n  };\n\n  formatPercent = formatPercent;\n\n  formatPrice = formatPrice;\n\n  @Prop({ required: true }) trades!: Array<Trade>;\n\n  @Prop({ default: 'Trades' }) title!: string;\n\n  @Prop({ required: false, default: '' }) stakeCurrency!: string;\n\n  @Prop({ default: false }) activeTrades!: boolean;\n\n  @Prop({ default: false }) showFilter!: boolean;\n\n  @Prop({ default: false, type: Boolean }) multiBotView!: boolean;\n\n  @Prop({ default: 'No Trades to show.' }) emptyText!: string;\n\n  @Prop({ default: 3, type: Number }) stakeCurrencyDecimals!: number;\n\n  @ftbot.Action setDetailTrade;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action forceSellMulti!: (payload: MultiForcesellPayload) => Promise<string>;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action deleteTradeMulti!: (payload: MultiDeletePayload) => Promise<string>;\n\n  currentPage = 1;\n\n  selectedItemIndex? = undefined;\n\n  filterText = '';\n\n  get rows(): number {\n    return this.trades.length;\n  }\n\n  perPage = this.activeTrades ? 200 : 25;\n\n  get filteredTrades() {\n    return this.trades.slice(\n      (this.currentPage - 1) * this.perPage,\n      this.currentPage * this.perPage,\n    );\n  }\n\n  formatPriceWithDecimals(price) {\n    return formatPrice(price, this.stakeCurrencyDecimals);\n  }\n\n  forcesellHandler(item: Trade, ordertype: string | undefined = undefined) {\n    this.$bvModal\n      .msgBoxConfirm(`Really forcesell trade ${item.trade_id} (Pair ${item.pair})?`)\n      .then((value: boolean) => {\n        if (value) {\n          const payload: MultiForcesellPayload = {\n            tradeid: String(item.trade_id),\n            botId: item.botId,\n          };\n          if (ordertype) {\n            payload.ordertype = ordertype;\n          }\n          this.forceSellMulti(payload)\n            .then((xxx) => console.log(xxx))\n            .catch((error) => console.log(error.response));\n        }\n      });\n  }\n\n  handleContextMenuEvent(item, index, event) {\n    // stop browser context menu from appearing\n    if (!this.activeTrades) {\n      return;\n    }\n    event.preventDefault();\n    // log the selected item to the console\n    console.log(item);\n  }\n\n  removeTradeHandler(item) {\n    console.log(item);\n    this.$bvModal\n      .msgBoxConfirm(`Really delete trade ${item.trade_id} (Pair ${item.pair})?`)\n      .then((value: boolean) => {\n        if (value) {\n          const payload: MultiDeletePayload = {\n            tradeid: String(item.trade_id),\n            botId: item.botId,\n          };\n          this.deleteTradeMulti(payload).catch((error) => console.log(error.response));\n        }\n      });\n  }\n\n  tradeClick(trade) {\n    this.setDetailTrade(trade);\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.my-05 {\n  margin-top: 0.125rem;\n  margin-bottom: 0.125rem;\n}\n</style>\n","\n<div class=\"h-100 overflow-auto p-1\">\n  <b-list-group id=\"tradeList\">\n    <b-list-group-item\n      v-for=\"trade in filteredTrades\"\n      :key=\"trade.trade_id\"\n      class=\"border border-secondary rounded my-05 px-1\"\n      @click=\"tradeClick(trade)\"\n    >\n      <CustomTradeListEntry :trade=\"trade\" :stake-currency-decimals=\"stakeCurrencyDecimals\" />\n    </b-list-group-item>\n  </b-list-group>\n\n  <span v-if=\"trades.length == 0\" class=\"mt-5\">{{ emptyText }}</span>\n\n  <div class=\"w-100 d-flex justify-content-between mt-1\">\n    <b-pagination\n      v-if=\"!activeTrades\"\n      v-model=\"currentPage\"\n      :total-rows=\"rows\"\n      :per-page=\"perPage\"\n      aria-controls=\"tradeList\"\n    ></b-pagination>\n    <b-input\n      v-if=\"showFilter\"\n      v-model=\"filterText\"\n      type=\"text\"\n      placeholder=\"Filter\"\n      size=\"sm\"\n      style=\"width: unset\"\n    />\n  </div>\n</div>\n","\n<span :aria-hidden=\"!title\"\n      :aria-label=\"title\"\n      class=\"material-design-icon arrow-left-icon\"\n      role=\"img\"\n      v-bind=\"$attrs\"\n      @click=\"$emit('click', $event)\">\n  <svg :fill=\"fillColor\"\n       class=\"material-design-icon__svg\"\n       :width=\"size\"\n       :height=\"size\"\n       viewBox=\"0 0 24 24\">\n    <path d=\"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z\">\n      <title v-if=\"title\">{{ title }}</title>\n    </path>\n  </svg>\n</span>\n","<template>\n  <span :aria-hidden=\"!title\"\n        :aria-label=\"title\"\n        class=\"material-design-icon arrow-left-icon\"\n        role=\"img\"\n        v-bind=\"$attrs\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ArrowLeftIcon\",\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <div>\n    <!-- <TradeList\n      class=\"open-trades\"\n      :trades=\"openTrades\"\n      title=\"Open trades\"\n      :active-trades=\"true\"\n      empty-text=\"Currently no open trades.\"\n    /> -->\n    <CustomTradeList\n      v-if=\"!history && !detailTradeId\"\n      :trades=\"openTrades\"\n      title=\"Open trades\"\n      :active-trades=\"true\"\n      :stake-currency-decimals=\"stakeCurrencyDecimals\"\n      empty-text=\"No open Trades.\"\n    />\n    <CustomTradeList\n      v-if=\"history && !detailTradeId\"\n      :trades=\"closedTrades\"\n      title=\"Trade history\"\n      :stake-currency-decimals=\"stakeCurrencyDecimals\"\n      empty-text=\"No closed trades so far.\"\n    />\n    <div v-if=\"detailTradeId\" class=\"d-flex flex-column\">\n      <b-button size=\"sm\" class=\"align-self-start mt-1 ml-1\" @click=\"setDetailTrade(null)\"\n        ><BackIcon /> Back</b-button\n      >\n      <TradeDetail :trade=\"tradeDetail\" :stake-currency=\"stakeCurrency\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { namespace } from 'vuex-class';\nimport CustomTradeList from '@/components/ftbot/CustomTradeList.vue';\nimport TradeDetail from '@/components/ftbot/TradeDetail.vue';\nimport BackIcon from 'vue-material-design-icons/ArrowLeft.vue';\n\nimport { Trade } from '@/types';\nimport { BotStoreGetters } from '@/store/modules/ftbot';\nimport StoreModules from '@/store/storeSubModules';\n\nconst ftbot = namespace(StoreModules.ftbot);\n// TODO: TradeDetail could be extracted into a sub-route to allow direct access\n@Component({\n  components: {\n    CustomTradeList,\n    TradeDetail,\n    BackIcon,\n  },\n})\nexport default class TradesList extends Vue {\n  @Prop({ default: false }) history!: boolean;\n\n  @ftbot.Getter [BotStoreGetters.openTrades]!: Trade[];\n\n  @ftbot.Getter [BotStoreGetters.closedTrades]!: Trade[];\n\n  @ftbot.Getter [BotStoreGetters.stakeCurrencyDecimals]!: number;\n\n  @ftbot.Getter [BotStoreGetters.stakeCurrency]!: string;\n\n  @ftbot.Getter [BotStoreGetters.detailTradeId]?: number;\n\n  @ftbot.Getter [BotStoreGetters.tradeDetail]!: Trade;\n\n  @ftbot.Action setDetailTrade;\n}\n</script>\n\n<style scoped></style>\n","\n<div>\n  <!-- <TradeList\n    class=\"open-trades\"\n    :trades=\"openTrades\"\n    title=\"Open trades\"\n    :active-trades=\"true\"\n    empty-text=\"Currently no open trades.\"\n  /> -->\n  <CustomTradeList\n    v-if=\"!history && !detailTradeId\"\n    :trades=\"openTrades\"\n    title=\"Open trades\"\n    :active-trades=\"true\"\n    :stake-currency-decimals=\"stakeCurrencyDecimals\"\n    empty-text=\"No open Trades.\"\n  />\n  <CustomTradeList\n    v-if=\"history && !detailTradeId\"\n    :trades=\"closedTrades\"\n    title=\"Trade history\"\n    :stake-currency-decimals=\"stakeCurrencyDecimals\"\n    empty-text=\"No closed trades so far.\"\n  />\n  <div v-if=\"detailTradeId\" class=\"d-flex flex-column\">\n    <b-button size=\"sm\" class=\"align-self-start mt-1 ml-1\" @click=\"setDetailTrade(null)\"\n      ><BackIcon /> Back</b-button\n    >\n    <TradeDetail :trade=\"tradeDetail\" :stake-currency=\"stakeCurrency\" />\n  </div>\n</div>\n"],"names":["render","staticRenderFns","CustomTradeList","TradesList"],"mappings":"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"}