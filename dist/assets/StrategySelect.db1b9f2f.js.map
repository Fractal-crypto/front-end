{"version":3,"file":"StrategySelect.db1b9f2f.js","sources":["../../src/components/ftbot/TimeRangeSelect.vue","../../src/components/ftbot/TimeRangeSelect.vue?vue&type=template&lang.js","../../src/components/ftbot/TimeframeSelect.vue","../../src/components/ftbot/TimeframeSelect.vue?vue&type=template&lang.js","../../src/components/ftbot/StrategySelect.vue","../../src/components/ftbot/StrategySelect.vue?vue&type=template&lang.js"],"sourcesContent":["<template>\n  <div>\n    <div class=\"d-flex\">\n      <b-form-group class=\"col-md-6\" label=\"Start date\" label-for=\"dp_dateFrom\">\n        <b-input-group>\n          <b-input-group-prepend>\n            <b-form-datepicker v-model=\"dateFrom\" class=\"mb-1\" button-only></b-form-datepicker>\n          </b-input-group-prepend>\n          <b-form-input\n            id=\"dp_dateFrom\"\n            v-model=\"dateFrom\"\n            type=\"text\"\n            placeholder=\"YYYY-MM-DD\"\n            autocomplete=\"off\"\n          ></b-form-input>\n        </b-input-group>\n      </b-form-group>\n      <b-form-group class=\"ml-2 col-md-6\" label=\"End date\" label-for=\"dp_dateTo\">\n        <b-input-group>\n          <b-input-group-prepend>\n            <b-form-datepicker v-model=\"dateTo\" class=\"mb-1\" button-only></b-form-datepicker>\n          </b-input-group-prepend>\n          <b-form-input\n            id=\"dp_dateTo\"\n            v-model=\"dateTo\"\n            type=\"text\"\n            placeholder=\"YYYY-MM-DD\"\n            autocomplete=\"off\"\n          ></b-form-input>\n        </b-input-group>\n      </b-form-group>\n    </div>\n    <label class=\"text-left\">\n      Timerange: <b>{{ timeRange }}</b>\n    </label>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Emit, Prop, Watch } from 'vue-property-decorator';\nimport { dateFromString, dateStringToTimeRange, timestampToDateString } from '@/shared/formatters';\n\nconst now = new Date();\n@Component({})\nexport default class TimeRangeSelect extends Vue {\n  dateFrom = '';\n\n  dateTo = '';\n\n  @Prop() value!: string;\n\n  @Emit('input')\n  emitTimeRange() {\n    return this.timeRange;\n  }\n\n  @Watch('value')\n  valueChanged(val) {\n    console.log('TimeRange', val);\n    if (val !== this.value) {\n      this.updateInput();\n    }\n  }\n\n  updateInput() {\n    const tr = this.value.split('-');\n    if (tr[0]) {\n      this.dateFrom = timestampToDateString(dateFromString(tr[0], 'yyyyMMdd'));\n    }\n    if (tr.length > 1 && tr[1]) {\n      this.dateTo = timestampToDateString(dateFromString(tr[1], 'yyyyMMdd'));\n    }\n  }\n\n  created() {\n    if (!this.value) {\n      this.dateFrom = timestampToDateString(new Date(now.getFullYear(), now.getMonth() - 1, 1));\n    } else {\n      this.updateInput();\n    }\n    this.emitTimeRange();\n  }\n\n  updated() {\n    this.emitTimeRange();\n  }\n\n  get timeRange() {\n    if (this.dateFrom !== '' || this.dateTo !== '') {\n      return `${dateStringToTimeRange(this.dateFrom)}-${dateStringToTimeRange(this.dateTo)}`;\n    }\n    return '';\n  }\n}\n</script>\n\n<style scoped></style>\n","\n<div>\n  <div class=\"d-flex\">\n    <b-form-group class=\"col-md-6\" label=\"Start date\" label-for=\"dp_dateFrom\">\n      <b-input-group>\n        <b-input-group-prepend>\n          <b-form-datepicker v-model=\"dateFrom\" class=\"mb-1\" button-only></b-form-datepicker>\n        </b-input-group-prepend>\n        <b-form-input\n          id=\"dp_dateFrom\"\n          v-model=\"dateFrom\"\n          type=\"text\"\n          placeholder=\"YYYY-MM-DD\"\n          autocomplete=\"off\"\n        ></b-form-input>\n      </b-input-group>\n    </b-form-group>\n    <b-form-group class=\"ml-2 col-md-6\" label=\"End date\" label-for=\"dp_dateTo\">\n      <b-input-group>\n        <b-input-group-prepend>\n          <b-form-datepicker v-model=\"dateTo\" class=\"mb-1\" button-only></b-form-datepicker>\n        </b-input-group-prepend>\n        <b-form-input\n          id=\"dp_dateTo\"\n          v-model=\"dateTo\"\n          type=\"text\"\n          placeholder=\"YYYY-MM-DD\"\n          autocomplete=\"off\"\n        ></b-form-input>\n      </b-input-group>\n    </b-form-group>\n  </div>\n  <label class=\"text-left\">\n    Timerange: <b>{{ timeRange }}</b>\n  </label>\n</div>\n","<template>\n  <b-form-select\n    v-model=\"selectedTimeframe\"\n    placeholder=\"Use strategy default\"\n    :options=\"availableTimeframes\"\n    @change=\"emitSelectedTimeframe\"\n  ></b-form-select>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Emit, Prop, Vue, Watch } from 'vue-property-decorator';\n\n@Component({})\nexport default class Template extends Vue {\n  selectedTimeframe = '';\n\n  @Prop({ default: '' }) value!: string;\n\n  // Filter available timeframes to be lower than this timeframe.\n  @Prop({ default: '', required: false }) belowTimeframe!: string;\n\n  @Emit('input')\n  emitSelectedTimeframe() {\n    return this.selectedTimeframe;\n  }\n\n  @Watch('value')\n  watchValue() {\n    this.selectedTimeframe = this.value;\n  }\n\n  get availableTimeframes() {\n    if (!this.belowTimeframe) {\n      return this.availableTimeframesBase;\n    }\n    const idx = this.availableTimeframesBase.findIndex((v) => v === this.belowTimeframe);\n\n    return [...this.availableTimeframesBase].splice(0, idx);\n  }\n\n  // The below list must always remain sorted correctly!\n  availableTimeframesBase = [\n    // Placeholder value\n    { value: '', text: 'Use strategy default' },\n    '1m',\n    '3m',\n    '5m',\n    '15m',\n    '30m',\n    '1h',\n    '2h',\n    '4h',\n    '6h',\n    '8h',\n    '12h',\n    '1d',\n    '3d',\n    '1w',\n    '2w',\n    '1M',\n    '1y',\n  ];\n}\n</script>\n\n<style scoped></style>\n","\n<b-form-select\n  v-model=\"selectedTimeframe\"\n  placeholder=\"Use strategy default\"\n  :options=\"availableTimeframes\"\n  @change=\"emitSelectedTimeframe\"\n></b-form-select>\n","<template>\n  <div>\n    <div class=\"w-100 d-flex\">\n      <b-form-select v-model=\"locStrategy\" :options=\"strategyList\" @change=\"strategyChanged\">\n      </b-form-select>\n      <div class=\"ml-2\">\n        <b-button @click=\"getStrategyList\">&#x21bb;</b-button>\n      </div>\n    </div>\n\n    <textarea v-if=\"showDetails && strategy\" v-model=\"strategyCode\" class=\"w-100 h-100\"></textarea>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { BotStoreGetters } from '@/store/modules/ftbot';\nimport StoreModules from '@/store/storeSubModules';\nimport { StrategyResult } from '@/types';\nimport { Component, Vue, Prop, Emit } from 'vue-property-decorator';\nimport { namespace } from 'vuex-class';\n\nconst ftbot = namespace(StoreModules.ftbot);\n\n@Component({})\nexport default class StrategySelect extends Vue {\n  @Prop() value!: string;\n\n  @Prop({ default: false, required: false }) showDetails!: boolean;\n\n  @ftbot.Action getStrategyList;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action getStrategy!: (strategy: string) => void;\n\n  @ftbot.Getter [BotStoreGetters.strategyList]!: string[];\n\n  @ftbot.Getter [BotStoreGetters.strategy]: StrategyResult;\n\n  @Emit('input')\n  emitStrategy(strategy: string) {\n    this.getStrategy(strategy);\n    return strategy;\n  }\n\n  get strategyCode(): string {\n    return this.strategy?.code;\n  }\n\n  get locStrategy() {\n    return this.value;\n  }\n\n  set locStrategy(val) {\n    this.emitStrategy(val);\n  }\n\n  strategyChanged(newVal) {\n    this.value = newVal;\n  }\n\n  mounted() {\n    if (this.strategyList.length === 0) {\n      this.getStrategyList();\n    }\n  }\n}\n</script>\n\n<style></style>\n","\n<div>\n  <div class=\"w-100 d-flex\">\n    <b-form-select v-model=\"locStrategy\" :options=\"strategyList\" @change=\"strategyChanged\">\n    </b-form-select>\n    <div class=\"ml-2\">\n      <b-button @click=\"getStrategyList\">&#x21bb;</b-button>\n    </div>\n  </div>\n\n  <textarea v-if=\"showDetails && strategy\" v-model=\"strategyCode\" class=\"w-100 h-100\"></textarea>\n</div>\n"],"names":["TimeRangeSelect","render","staticRenderFns","StrategySelect"],"mappings":"uVA0CA,iBAEA,sBAAA,+rBAAAA,YAAAA,GC5CA,GAAIC,GAAS,UAAY,CAAC,GAAI,GAAI,KAAS,EAAG,EAAI,eAAmB,EAAG,EAAI,MAAM,IAAI,EAAG,MAAO,GAAG,MAAM,CAAC,EAAG,MAAM,CAAC,YAAY,UAAU,CAAC,EAAG,eAAe,CAAC,YAAY,WAAW,MAAM,CAAC,MAAQ,aAAa,YAAY,gBAAgB,CAAC,EAAG,gBAAgB,CAAC,EAAG,wBAAwB,CAAC,EAAG,oBAAoB,CAAC,YAAY,OAAO,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,MAAO,EAAI,SAAU,SAAS,SAAU,EAAK,CAAC,EAAI,SAAS,GAAK,WAAW,eAAe,GAAG,EAAG,eAAe,CAAC,MAAM,CAAC,GAAK,cAAc,KAAO,OAAO,YAAc,aAAa,aAAe,OAAO,MAAM,CAAC,MAAO,EAAI,SAAU,SAAS,SAAU,EAAK,CAAC,EAAI,SAAS,GAAK,WAAW,eAAe,IAAI,GAAG,EAAG,eAAe,CAAC,YAAY,gBAAgB,MAAM,CAAC,MAAQ,WAAW,YAAY,cAAc,CAAC,EAAG,gBAAgB,CAAC,EAAG,wBAAwB,CAAC,EAAG,oBAAoB,CAAC,YAAY,OAAO,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,MAAO,EAAI,OAAQ,SAAS,SAAU,EAAK,CAAC,EAAI,OAAO,GAAK,WAAW,aAAa,GAAG,EAAG,eAAe,CAAC,MAAM,CAAC,GAAK,YAAY,KAAO,OAAO,YAAc,aAAa,aAAe,OAAO,MAAM,CAAC,MAAO,EAAI,OAAQ,SAAS,SAAU,EAAK,CAAC,EAAI,OAAO,GAAK,WAAW,aAAa,IAAI,IAAI,GAAG,EAAG,QAAQ,CAAC,YAAY,aAAa,CAAC,EAAI,GAAG,gBAAgB,EAAG,IAAI,CAAC,EAAI,GAAG,EAAI,GAAG,EAAI,mBACnvCC,EAAkB,GACtBD,EAAO,cAAgB,8XCWvB,sBAAA,kuBAAA,YAAA,GCbA,GAAIA,GAAS,UAAY,CAAC,GAAI,GAAI,KAAS,EAAG,EAAI,eAAmB,EAAG,EAAI,MAAM,IAAI,EAAG,MAAO,GAAG,gBAAgB,CAAC,MAAM,CAAC,YAAc,uBAAuB,QAAU,EAAI,qBAAqB,GAAG,CAAC,OAAS,EAAI,uBAAuB,MAAM,CAAC,MAAO,EAAI,kBAAmB,SAAS,SAAU,EAAK,CAAC,EAAI,kBAAkB,GAAK,WAAW,wBAC3UC,EAAkB,GACtBD,EAAO,cAAgB,kYCmBvB,mBAGA,gnBAAAE,YAAAA,GCxBA,GAAI,GAAS,UAAY,CAAC,GAAI,GAAI,KAAS,EAAG,EAAI,eAAmB,EAAG,EAAI,MAAM,IAAI,EAAG,MAAO,GAAG,MAAM,CAAC,EAAG,MAAM,CAAC,YAAY,gBAAgB,CAAC,EAAG,gBAAgB,CAAC,MAAM,CAAC,QAAU,EAAI,cAAc,GAAG,CAAC,OAAS,EAAI,iBAAiB,MAAM,CAAC,MAAO,EAAI,YAAa,SAAS,SAAU,EAAK,CAAC,EAAI,YAAY,GAAK,WAAW,iBAAiB,EAAG,MAAM,CAAC,YAAY,QAAQ,CAAC,EAAG,WAAW,CAAC,GAAG,CAAC,MAAQ,EAAI,kBAAkB,CAAC,EAAI,GAAG,aAAQ,IAAI,GAAI,EAAI,aAAe,EAAI,SAAU,EAAG,WAAW,CAAC,WAAW,CAAC,CAAC,KAAK,QAAQ,QAAQ,UAAU,MAAO,EAAI,aAAc,WAAW,iBAAiB,YAAY,cAAc,SAAS,CAAC,MAAS,EAAI,cAAe,GAAG,CAAC,MAAQ,SAAS,EAAO,CAAC,AAAG,EAAO,OAAO,WAAqB,GAAI,aAAa,EAAO,OAAO,WAAU,EAAI,QACxvB,EAAkB,GACtB,EAAO,cAAgB"}