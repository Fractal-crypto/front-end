var la=Object.defineProperty,ua=Object.defineProperties;var ca=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var ha=Object.prototype.hasOwnProperty,pa=Object.prototype.propertyIsEnumerable;var Se=(e,i,t)=>i in e?la(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,J=(e,i)=>{for(var t in i||(i={}))ha.call(i,t)&&Se(e,t,i[t]);if(xe)for(var t of xe(i))pa.call(i,t)&&Se(e,t,i[t]);return e},we=(e,i)=>ua(e,ca(i));import{b as $,W as lt,C as Lt,V as Mt,c as kt,E as ui,n as Bt,J as da,K as fa,G as ga}from"./vendor.4be520cf.js";import{C as Et,S as Nt,E as qt,g as Xt,B as tt,A as va,h as ma,i as ya}from"./index.3277bc57.js";import{_ as B,aa as ci,B as le,j as ue,a2 as Ot,ac as hi,t as pi,a4 as di,u as ce,ad as ct,C as A,a5 as X,ae as nt,af as ot,O as F,ag as fi,ah as ba,f as gi,g as bt,ai as _a,a6 as G,aj as Jt,ak as Ca,al as vi,am as xa,M as Y,R as vt,an as Pe,ao as Sa,ap as wa,G as Pa,I as Oa,V as Aa,W as Ta,aq as mi,ar as xt,as as yi,v as Tt,at as $t,au as Da,r as Qt,av as Ia,aw as he,ax as La,ay as Ma,az as st,aA as ka,p as St,Z as ft,aB as gt,aC as Oe,aD as pe,aE as Ba,K as bi,aF as Na,aG as za,aH as Ra,aI as Vt,aJ as Ft,aK as _i,aL as Ea,aM as $a,aN as Va,aO as Fa,aP as Wa,H as wt,aQ as de,aR as Ga,x as ja,aS as Za,aT as Ae,o as Ci,aU as xi,aV as Ua,aW as Ha,aX as Ya,aY as Ka,aZ as qa,a_ as Xa,a$ as Ja,b0 as Qa,b1 as tr,b2 as Te,b3 as er,b4 as De,b5 as Wt,Q as ir,b6 as ar,b7 as rr,b8 as nr,b9 as or,ba as sr,bb as lr,bc as ur,bd as cr,U as hr,be as pr,a as dr,b as fr,c as gr,d as vr,i as mr}from"./install.4ca6e0c9.js";import{d as yr,p as Si,S as br,e as _r,t as Cr,r as xr,f as Sr,D as wr,g as Pr,h as Or,s as Ar,A as Tr,j as Dr,b as Ir,c as Lr,k as Mr,i as kr,a as Br}from"./install.d2933d0c.js";import{c as Nr}from"./createSeriesDataSimply.6cdf1b95.js";var zr=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t.hasSymbolVisual=!0,t}return i.prototype.getInitialData=function(t,a){return yr(null,this,{useEncodeDefaulter:!0})},i.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?5e3:this.get("progressive"):t},i.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?1e4:this.get("progressiveThreshold"):t},i.prototype.brushSelector=function(t,a,r){return r.point(a.getItemLayout(t))},i.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},i.type="series.scatter",i.dependencies=["grid","polar","geo","singleAxis","calendar"],i.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},i}(ci),Rr=zr,wi=4,Er=function(){function e(){}return e}(),$r=function(e){B(i,e);function i(t){var a=e.call(this,t)||this;return a._off=0,a.hoverDataIdx=-1,a}return i.prototype.getDefaultShape=function(){return new Er},i.prototype.reset=function(){this.notClear=!1,this._off=0},i.prototype.buildPath=function(t,a){var r=a.points,n=a.size,o=this.symbolProxy,s=o.shape,u=t.getContext?t.getContext():t,c=u&&n[0]<wi,h=this.softClipShape,p;if(c){this._ctx=u;return}for(this._ctx=null,p=this._off;p<r.length;){var f=r[p++],g=r[p++];isNaN(f)||isNaN(g)||h&&!h.contain(f,g)||(s.x=f-n[0]/2,s.y=g-n[1]/2,s.width=n[0],s.height=n[1],o.buildPath(t,s,!0))}this.incremental&&(this._off=p,this.notClear=!0)},i.prototype.afterBrush=function(){var t=this.shape,a=t.points,r=t.size,n=this._ctx,o=this.softClipShape,s;if(!!n){for(s=this._off;s<a.length;){var u=a[s++],c=a[s++];isNaN(u)||isNaN(c)||o&&!o.contain(u,c)||n.fillRect(u-r[0]/2,c-r[1]/2,r[0],r[1])}this.incremental&&(this._off=s,this.notClear=!0)}},i.prototype.findDataIndex=function(t,a){for(var r=this.shape,n=r.points,o=r.size,s=Math.max(o[0],4),u=Math.max(o[1],4),c=n.length/2-1;c>=0;c--){var h=c*2,p=n[h]-s/2,f=n[h+1]-u/2;if(t>=p&&a>=f&&t<=p+s&&a<=f+u)return c}return-1},i.prototype.contain=function(t,a){var r=this.transformCoordToLocal(t,a),n=this.getBoundingRect();if(t=r[0],a=r[1],n.contain(t,a)){var o=this.hoverDataIdx=this.findDataIndex(t,a);return o>=0}return this.hoverDataIdx=-1,!1},i.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var a=this.shape,r=a.points,n=a.size,o=n[0],s=n[1],u=1/0,c=1/0,h=-1/0,p=-1/0,f=0;f<r.length;){var g=r[f++],m=r[f++];u=Math.min(g,u),h=Math.max(g,h),c=Math.min(m,c),p=Math.max(m,p)}t=this._rect=new le(u-o/2,c-s/2,h-u+o,p-c+s)}return t},i}(ue),Vr=function(){function e(){this.group=new Ot}return e.prototype.updateData=function(i,t){this._clear();var a=this._create();a.setShape({points:i.getLayout("points")}),this._setCommon(a,i,t)},e.prototype.updateLayout=function(i){var t=i.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var r=(a.endIndex-a.startIndex)*2,n=a.startIndex*4*2;t=new Float32Array(t.buffer,n,r)}a.setShape("points",t),a.reset()})},e.prototype.incrementalPrepareUpdate=function(i){this._clear()},e.prototype.incrementalUpdate=function(i,t,a){var r=this._newAdded[0],n=t.getLayout("points"),o=r&&r.shape.points;if(o&&o.length<2e4){var s=o.length,u=new Float32Array(s+n.length);u.set(o),u.set(n,s),r.endIndex=i.end,r.setShape({points:u})}else{this._newAdded=[];var c=this._create();c.startIndex=i.start,c.endIndex=i.end,c.incremental=!0,c.setShape({points:n}),this._setCommon(c,t,a)}},e.prototype.eachRendered=function(i){this._newAdded[0]&&i(this._newAdded[0])},e.prototype._create=function(){var i=new $r({cursor:"default"});return this.group.add(i),this._newAdded.push(i),i},e.prototype._setCommon=function(i,t,a){var r=t.hostModel;a=a||{};var n=t.getVisual("symbolSize");i.setShape("size",n instanceof Array?n:[n,n]),i.softClipShape=a.clipShape||null,i.symbolProxy=hi(t.getVisual("symbol"),0,0,0,0),i.setColor=i.symbolProxy.setColor;var o=i.shape.size[0]<wi;i.useStyle(r.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),u=s&&s.fill;u&&i.setColor(u);var c=pi(i);c.seriesIndex=r.seriesIndex,i.on("mousemove",function(h){c.dataIndex=null;var p=i.hoverDataIdx;p>=0&&(c.dataIndex=p+(i.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Fr=Vr,Wr=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.render=function(t,a,r){var n=t.getData(),o=this._updateSymbolDraw(n,t);o.updateData(n,{clipShape:this._getClipShape(t)}),this._finished=!0},i.prototype.incrementalPrepareRender=function(t,a,r){var n=t.getData(),o=this._updateSymbolDraw(n,t);o.incrementalPrepareUpdate(n),this._finished=!1},i.prototype.incrementalRender=function(t,a,r){this._symbolDraw.incrementalUpdate(t,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=t.end===a.getData().count()},i.prototype.updateTransform=function(t,a,r){var n=t.getData();if(this.group.dirty(),!this._finished||n.count()>1e4)return{update:!0};var o=Si("").reset(t,a,r);o.progress&&o.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout(n)},i.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},i.prototype._getClipShape=function(t){var a=t.coordinateSystem,r=a&&a.getArea&&a.getArea();return t.get("clip",!0)?r:null},i.prototype._updateSymbolDraw=function(t,a){var r=this._symbolDraw,n=a.pipelineContext,o=n.large;return(!r||o!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=o?new Fr:new br,this._isLargeDraw=o,this.group.removeAll()),this.group.add(r.group),r},i.prototype.remove=function(t,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},i.prototype.dispose=function(){},i.type="scatter",i}(di),Gr=Wr;function jr(e){ce(_r),e.registerSeriesModel(Rr),e.registerChartView(Gr),e.registerLayout(Si("scatter"))}var Zr={axisPointer:1,tooltip:1,brush:1};function Ur(e,i,t){var a=i.getComponentByElement(e.topTarget),r=a&&a.coordinateSystem;return a&&a!==t&&!Zr.hasOwnProperty(a.mainType)&&r&&r.model!==t}var ht=!0,Pt=Math.min,mt=Math.max,Hr=Math.pow,Yr=1e4,Kr=6,qr=6,Ie="globalPan",Xr={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Jr={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Le={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Qr=0,tn=function(e){B(i,e);function i(t){var a=e.call(this)||this;return a._track=[],a._covers=[],a._handlers={},ct(t),a._zr=t,a.group=new Ot,a._uid="brushController_"+Qr++,A(ln,function(r,n){this._handlers[n]=X(r,this)},a),a}return i.prototype.enableBrush=function(t){return ct(this._mounted),this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},i.prototype._doEnableBrush=function(t){var a=this._zr;this._enableGlobalPan||Cr(a,Ie,this._uid),A(this._handlers,function(r,n){a.on(n,r)}),this._brushType=t.brushType,this._brushOption=nt(ot(Le),t,!0)},i.prototype._doDisableBrush=function(){var t=this._zr;xr(t,Ie,this._uid),A(this._handlers,function(a,r){t.off(r,a)}),this._brushType=this._brushOption=null},i.prototype.setPanels=function(t){if(t&&t.length){var a=this._panels={};A(t,function(r){a[r.panelId]=ot(r)})}else this._panels=null;return this},i.prototype.mount=function(t){t=t||{},this._mounted=!0,this._enableGlobalPan=t.enableGlobalPan;var a=this.group;return this._zr.add(a),a.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=a.getLocalTransform(),this},i.prototype.updateCovers=function(t){ct(this._mounted),t=F(t,function(f){return nt(ot(Le),f,!0)});var a="\0-brush-index-",r=this._covers,n=this._covers=[],o=this,s=this._creatingCover;return new fi(r,t,c,u).add(h).update(h).remove(p).execute(),this;function u(f,g){return(f.id!=null?f.id:a+g)+"-"+f.brushType}function c(f,g){return u(f.__brushOption,g)}function h(f,g){var m=t[f];if(g!=null&&r[g]===s)n[f]=r[g];else{var b=n[f]=g!=null?(r[g].__brushOption=m,r[g]):Oi(o,Pi(o,m));fe(o,b)}}function p(f){r[f]!==s&&o.group.remove(r[f])}},i.prototype.unmount=function(){if(!!this._mounted)return this.enableBrush(!1),te(this),this._zr.remove(this.group),this._mounted=!1,this},i.prototype.dispose=function(){this.unmount(),this.off()},i}(ba);function Pi(e,i){var t=zt[i.brushType].createCover(e,i);return t.__brushOption=i,Ti(t,i),e.group.add(t),t}function Oi(e,i){var t=ge(i);return t.endCreating&&(t.endCreating(e,i),Ti(i,i.__brushOption)),i}function Ai(e,i){var t=i.__brushOption;ge(i).updateCoverShape(e,i,t.range,t)}function Ti(e,i){var t=i.z;t==null&&(t=Yr),e.traverse(function(a){a.z=t,a.z2=t})}function fe(e,i){ge(i).updateCommon(e,i),Ai(e,i)}function ge(e){return zt[e.__brushOption.brushType]}function ve(e,i,t){var a=e._panels;if(!a)return ht;var r,n=e._transform;return A(a,function(o){o.isTargetByCursor(i,t,n)&&(r=o)}),r}function Di(e,i){var t=e._panels;if(!t)return ht;var a=i.__brushOption.panelId;return a!=null?t[a]:ht}function te(e){var i=e._covers,t=i.length;return A(i,function(a){e.group.remove(a)},e),i.length=0,!!t}function pt(e,i){var t=F(e._covers,function(a){var r=a.__brushOption,n=ot(r.range);return{brushType:r.brushType,panelId:r.panelId,range:n}});e.trigger("brush",{areas:t,isEnd:!!i.isEnd,removeOnClick:!!i.removeOnClick})}function en(e){var i=e._track;if(!i.length)return!1;var t=i[i.length-1],a=i[0],r=t[0]-a[0],n=t[1]-a[1],o=Hr(r*r+n*n,.5);return o>Kr}function Ii(e){var i=e.length-1;return i<0&&(i=0),[e[0],e[i]]}function Li(e,i,t,a){var r=new Ot;return r.add(new Jt({name:"main",style:me(t),silent:!0,draggable:!0,cursor:"move",drift:G(Me,e,i,r,["n","s","w","e"]),ondragend:G(pt,i,{isEnd:!0})})),A(a,function(n){r.add(new Jt({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:G(Me,e,i,r,n),ondragend:G(pt,i,{isEnd:!0})}))}),r}function Mi(e,i,t,a){var r=a.brushStyle.lineWidth||0,n=mt(r,qr),o=t[0][0],s=t[1][0],u=o-r/2,c=s-r/2,h=t[0][1],p=t[1][1],f=h-n+r/2,g=p-n+r/2,m=h-o,b=p-s,_=m+r,y=b+r;Q(e,i,"main",o,s,m,b),a.transformable&&(Q(e,i,"w",u,c,n,y),Q(e,i,"e",f,c,n,y),Q(e,i,"n",u,c,_,n),Q(e,i,"s",u,g,_,n),Q(e,i,"nw",u,c,n,n),Q(e,i,"ne",f,c,n,n),Q(e,i,"sw",u,g,n,n),Q(e,i,"se",f,g,n,n))}function ee(e,i){var t=i.__brushOption,a=t.transformable,r=i.childAt(0);r.useStyle(me(t)),r.attr({silent:!a,cursor:a?"move":"default"}),A([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(n){var o=i.childOfName(n.join("")),s=n.length===1?ie(e,n[0]):rn(e,n);o&&o.attr({silent:!a,invisible:!a,cursor:a?Jr[s]+"-resize":null})})}function Q(e,i,t,a,r,n,o){var s=i.childOfName(t);s&&s.setShape(on(ye(e,i,[[a,r],[a+n,r+o]])))}function me(e){return bt({strokeNoScale:!0},e.brushStyle)}function ki(e,i,t,a){var r=[Pt(e,t),Pt(i,a)],n=[mt(e,t),mt(i,a)];return[[r[0],n[0]],[r[1],n[1]]]}function an(e){return vi(e.group)}function ie(e,i){var t={w:"left",e:"right",n:"top",s:"bottom"},a={left:"w",right:"e",top:"n",bottom:"s"},r=Ca(t[i],an(e));return a[r]}function rn(e,i){var t=[ie(e,i[0]),ie(e,i[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Me(e,i,t,a,r,n){var o=t.__brushOption,s=e.toRectRange(o.range),u=Bi(i,r,n);A(a,function(c){var h=Xr[c];s[h[0]][h[1]]+=u[h[0]]}),o.range=e.fromRectRange(ki(s[0][0],s[1][0],s[0][1],s[1][1])),fe(i,t),pt(i,{isEnd:!1})}function nn(e,i,t,a){var r=i.__brushOption.range,n=Bi(e,t,a);A(r,function(o){o[0]+=n[0],o[1]+=n[1]}),fe(e,i),pt(e,{isEnd:!1})}function Bi(e,i,t){var a=e.group,r=a.transformCoordToLocal(i,t),n=a.transformCoordToLocal(0,0);return[r[0]-n[0],r[1]-n[1]]}function ye(e,i,t){var a=Di(e,i);return a&&a!==ht?a.clipPath(t,e._transform):ot(t)}function on(e){var i=Pt(e[0][0],e[1][0]),t=Pt(e[0][1],e[1][1]),a=mt(e[0][0],e[1][0]),r=mt(e[0][1],e[1][1]);return{x:i,y:t,width:a-i,height:r-t}}function sn(e,i,t){if(!(!e._brushType||un(e,i.offsetX,i.offsetY))){var a=e._zr,r=e._covers,n=ve(e,i,t);if(!e._dragging)for(var o=0;o<r.length;o++){var s=r[o].__brushOption;if(n&&(n===ht||s.panelId===n.panelId)&&zt[s.brushType].contain(r[o],t[0],t[1]))return}n&&a.setCursorStyle("crosshair")}}function ae(e){var i=e.event;i.preventDefault&&i.preventDefault()}function re(e,i,t){return e.childOfName("main").contain(i,t)}function Ni(e,i,t,a){var r=e._creatingCover,n=e._creatingPanel,o=e._brushOption,s;if(e._track.push(t.slice()),en(e)||r){if(n&&!r){o.brushMode==="single"&&te(e);var u=ot(o);u.brushType=ke(u.brushType,n),u.panelId=n===ht?null:n.panelId,r=e._creatingCover=Pi(e,u),e._covers.push(r)}if(r){var c=zt[ke(e._brushType,n)],h=r.__brushOption;h.range=c.getCreatingRange(ye(e,r,e._track)),a&&(Oi(e,r),c.updateCommon(e,r)),Ai(e,r),s={isEnd:a}}}else a&&o.brushMode==="single"&&o.removeOnClick&&ve(e,i,t)&&te(e)&&(s={isEnd:a,removeOnClick:!0});return s}function ke(e,i){return e==="auto"?(ct(i&&i.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"'),i.defaultBrushType):e}var ln={mousedown:function(e){if(this._dragging)Be(this,e);else if(!e.target||!e.target.draggable){ae(e);var i=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var t=this._creatingPanel=ve(this,e,i);t&&(this._dragging=!0,this._track=[i.slice()])}},mousemove:function(e){var i=e.offsetX,t=e.offsetY,a=this.group.transformCoordToLocal(i,t);if(sn(this,e,a),this._dragging){ae(e);var r=Ni(this,e,a,!1);r&&pt(this,r)}},mouseup:function(e){Be(this,e)}};function Be(e,i){if(e._dragging){ae(i);var t=i.offsetX,a=i.offsetY,r=e.group.transformCoordToLocal(t,a),n=Ni(e,i,r,!0);e._dragging=!1,e._track=[],e._creatingCover=null,n&&pt(e,n)}}function un(e,i,t){var a=e._zr;return i<0||i>a.getWidth()||t<0||t>a.getHeight()}var zt={lineX:Ne(0),lineY:Ne(1),rect:{createCover:function(e,i){function t(a){return a}return Li({toRectRange:t,fromRectRange:t},e,i,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var i=Ii(e);return ki(i[1][0],i[1][1],i[0][0],i[0][1])},updateCoverShape:function(e,i,t,a){Mi(e,i,t,a)},updateCommon:ee,contain:re},polygon:{createCover:function(e,i){var t=new Ot;return t.add(new gi({name:"main",style:me(i),silent:!0})),t},getCreatingRange:function(e){return e},endCreating:function(e,i){i.remove(i.childAt(0)),i.add(new _a({name:"main",draggable:!0,drift:G(nn,e,i),ondragend:G(pt,e,{isEnd:!0})}))},updateCoverShape:function(e,i,t,a){i.childAt(0).setShape({points:ye(e,i,t)})},updateCommon:ee,contain:re}};function Ne(e){return{createCover:function(i,t){return Li({toRectRange:function(a){var r=[a,[0,100]];return e&&r.reverse(),r},fromRectRange:function(a){return a[e]}},i,t,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(i){var t=Ii(i),a=Pt(t[0][e],t[1][e]),r=mt(t[0][e],t[1][e]);return[a,r]},updateCoverShape:function(i,t,a,r){var n,o=Di(i,t);if(o!==ht&&o.getLinearBrushOtherExtent)n=o.getLinearBrushOtherExtent(e);else{var s=i._zr;n=[0,[s.getWidth(),s.getHeight()][1-e]]}var u=[a,n];e&&u.reverse(),Mi(i,t,u,r)},updateCommon:ee,contain:re}}var cn=tn;function hn(e){return e=be(e),function(i){return xa(i,e)}}function pn(e,i){return e=be(e),function(t){var a=i!=null?i:t,r=a?e.width:e.height,n=a?e.x:e.y;return[n,n+(r||0)]}}function dn(e,i,t){var a=be(e);return function(r,n){return a.contain(n[0],n[1])&&!Ur(r,i,t)}}function be(e){return le.create(e)}var fn=function(){function e(){}return e.prototype.getInitialData=function(i,t){var a,r=t.getComponent("xAxis",this.get("xAxisIndex")),n=t.getComponent("yAxis",this.get("yAxisIndex")),o=r.get("type"),s=n.get("type"),u;o==="category"?(i.layout="horizontal",a=r.getOrdinalMeta(),u=!0):s==="category"?(i.layout="vertical",a=n.getOrdinalMeta(),u=!0):i.layout=i.layout||"horizontal";var c=["x","y"],h=i.layout==="horizontal"?0:1,p=this._baseAxisDim=c[h],f=c[1-h],g=[r,n],m=g[h].get("type"),b=g[1-h].get("type"),_=i.data;if(_&&u){var y=[];A(_,function(w,P){var O;Y(w)?(O=w.slice(),w.unshift(P)):Y(w.value)?(O=vt({},w),O.value=O.value.slice(),w.value.unshift(P)):O=w,y.push(O)}),i.data=y}var S=this.defaultValueDimensions,C=[{name:p,type:Pe(m),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:Pe(b),dimsDef:S.slice()}];return Nr(this,{coordDimensions:C,dimensionsCount:S.length+1,encodeDefaulter:G(Sa,C,this)})},e.prototype.getBaseAxis=function(){var i=this._baseAxisDim;return this.ecModel.getComponent(i+"Axis",this.get(i+"AxisIndex")).axis},e}(),gn=["color","borderColor"],vn=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.render=function(t,a,r){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},i.prototype.incrementalPrepareRender=function(t,a,r){this._clear(),this._updateDrawMode(t)},i.prototype.incrementalRender=function(t,a,r,n){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,a):this._incrementalRenderNormal(t,a)},i.prototype.eachRendered=function(t){wa(this._progressiveEls||this.group,t)},i.prototype._updateDrawMode=function(t){var a=t.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},i.prototype._renderNormal=function(t){var a=t.getData(),r=this._data,n=this.group,o=a.getLayout("isSimpleBox"),s=t.get("clip",!0),u=t.coordinateSystem,c=u.getArea&&u.getArea();this._data||n.removeAll(),a.diff(r).add(function(h){if(a.hasValue(h)){var p=a.getItemLayout(h);if(s&&ze(c,p))return;var f=Gt(p,h,!0);Pa(f,{shape:{points:p.ends}},t,h),jt(f,a,h,o),n.add(f),a.setItemGraphicEl(h,f)}}).update(function(h,p){var f=r.getItemGraphicEl(p);if(!a.hasValue(h)){n.remove(f);return}var g=a.getItemLayout(h);if(s&&ze(c,g)){n.remove(f);return}f?(Oa(f,{shape:{points:g.ends}},t,h),Aa(f)):f=Gt(g),jt(f,a,h,o),n.add(f),a.setItemGraphicEl(h,f)}).remove(function(h){var p=r.getItemGraphicEl(h);p&&n.remove(p)}).execute(),this._data=a},i.prototype._renderLarge=function(t){this._clear(),Ee(t,this.group);var a=t.get("clip",!0)?Sr(t.coordinateSystem,!1,t):null;a?this.group.setClipPath(a):this.group.removeClipPath()},i.prototype._incrementalRenderNormal=function(t,a){for(var r=a.getData(),n=r.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var s=r.getItemLayout(o),u=Gt(s);jt(u,r,o,n),u.incremental=!0,this.group.add(u),this._progressiveEls.push(u)}},i.prototype._incrementalRenderLarge=function(t,a){Ee(a,this.group,this._progressiveEls,!0)},i.prototype.remove=function(t){this._clear()},i.prototype._clear=function(){this.group.removeAll(),this._data=null},i.type="candlestick",i}(di),mn=function(){function e(){}return e}(),yn=function(e){B(i,e);function i(t){var a=e.call(this,t)||this;return a.type="normalCandlestickBox",a}return i.prototype.getDefaultShape=function(){return new mn},i.prototype.buildPath=function(t,a){var r=a.points;this.__simpleBox?(t.moveTo(r[4][0],r[4][1]),t.lineTo(r[6][0],r[6][1])):(t.moveTo(r[0][0],r[0][1]),t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]),t.lineTo(r[3][0],r[3][1]),t.closePath(),t.moveTo(r[4][0],r[4][1]),t.lineTo(r[5][0],r[5][1]),t.moveTo(r[6][0],r[6][1]),t.lineTo(r[7][0],r[7][1]))},i}(ue);function Gt(e,i,t){var a=e.ends;return new yn({shape:{points:t?bn(a,e):a},z2:100})}function ze(e,i){for(var t=!0,a=0;a<i.ends.length;a++)if(e.contain(i.ends[a][0],i.ends[a][1])){t=!1;break}return t}function jt(e,i,t,a){var r=i.getItemModel(t);e.useStyle(i.getItemVisual(t,"style")),e.style.strokeNoScale=!0,e.__simpleBox=a,Ta(e,r)}function bn(e,i){return F(e,function(t){return t=t.slice(),t[1]=i.initBaseline,t})}var _n=function(){function e(){}return e}(),Re=function(e){B(i,e);function i(t){var a=e.call(this,t)||this;return a.type="largeCandlestickBox",a}return i.prototype.getDefaultShape=function(){return new _n},i.prototype.buildPath=function(t,a){for(var r=a.points,n=0;n<r.length;)if(this.__sign===r[n++]){var o=r[n++];t.moveTo(o,r[n++]),t.lineTo(o,r[n++])}else n+=3},i}(ue);function Ee(e,i,t,a){var r=e.getData(),n=r.getLayout("largePoints"),o=new Re({shape:{points:n},__sign:1});i.add(o);var s=new Re({shape:{points:n},__sign:-1});i.add(s),$e(1,o,e),$e(-1,s,e),a&&(o.incremental=!0,s.incremental=!0),t&&t.push(o,s)}function $e(e,i,t,a){var r=t.get(["itemStyle",e>0?"borderColor":"borderColor0"])||t.get(["itemStyle",e>0?"color":"color0"]),n=t.getModel("itemStyle").getItemStyle(gn);i.useStyle(n),i.style.fill=null,i.style.stroke=r}var Cn=vn,zi=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return i.prototype.getShadowDim=function(){return"open"},i.prototype.brushSelector=function(t,a,r){var n=a.getItemLayout(t);return n&&r.rect(n.brushRect)},i.type="series.candlestick",i.dependencies=["xAxis","yAxis","grid"],i.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},i}(ci);mi(zi,fn,!0);var xn=zi;function Sn(e){!e||!Y(e.series)||A(e.series,function(i){xt(i)&&i.type==="k"&&(i.type="candlestick")})}var wn=["itemStyle","borderColor"],Pn=["itemStyle","borderColor0"],On=["itemStyle","color"],An=["itemStyle","color0"],Tn={seriesType:"candlestick",plan:yi(),performRawSeries:!0,reset:function(e,i){function t(n,o){return o.get(n>0?On:An)}function a(n,o){return o.get(n>0?wn:Pn)}if(!i.isSeriesFiltered(e)){var r=e.pipelineContext.large;return!r&&{progress:function(n,o){for(var s;(s=n.next())!=null;){var u=o.getItemModel(s),c=o.getItemLayout(s).sign,h=u.getItemStyle();h.fill=t(c,u),h.stroke=a(c,u)||h.fill;var p=o.ensureUniqueItemVisual(s,"style");vt(p,h)}}}}}},Dn=Tn,In={seriesType:"candlestick",plan:yi(),reset:function(e){var i=e.coordinateSystem,t=e.getData(),a=Ln(e,t),r=0,n=1,o=["x","y"],s=t.getDimensionIndex(t.mapDimension(o[r])),u=F(t.mapDimensionsAll(o[n]),t.getDimensionIndex,t),c=u[0],h=u[1],p=u[2],f=u[3];if(t.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),s<0||u.length<4)return;return{progress:e.pipelineContext.large?m:g};function g(b,_){for(var y,S=_.getStore();(y=b.next())!=null;){var C=S.get(s,y),w=S.get(c,y),P=S.get(h,y),O=S.get(p,y),I=S.get(f,y),L=Math.min(w,P),k=Math.max(w,P),l=T(L,C),d=T(k,C),v=T(O,C),x=T(I,C),D=[];W(D,d,0),W(D,l,1),D.push(E(x),E(d),E(v),E(l)),_.setItemLayout(y,{sign:Ve(S,y,w,P,h),initBaseline:w>P?d[n]:l[n],ends:D,brushRect:rt(O,I,C)})}function T(M,Z){var U=[];return U[r]=Z,U[n]=M,isNaN(Z)||isNaN(M)?[NaN,NaN]:i.dataToPoint(U)}function W(M,Z,U){var R=Z.slice(),q=Z.slice();R[r]=$t(R[r]+a/2,1,!1),q[r]=$t(q[r]-a/2,1,!0),U?M.push(R,q):M.push(q,R)}function rt(M,Z,U){var R=T(M,U),q=T(Z,U);return R[r]-=a/2,q[r]-=a/2,{x:R[0],y:R[1],width:a,height:q[1]-R[1]}}function E(M){return M[r]=$t(M[r],1),M}}function m(b,_){for(var y=Da(b.count*4),S=0,C,w=[],P=[],O,I=_.getStore();(O=b.next())!=null;){var L=I.get(s,O),k=I.get(c,O),l=I.get(h,O),d=I.get(p,O),v=I.get(f,O);if(isNaN(L)||isNaN(d)||isNaN(v)){y[S++]=NaN,S+=3;continue}y[S++]=Ve(I,O,k,l,h),w[r]=L,w[n]=d,C=i.dataToPoint(w,null,P),y[S++]=C?C[0]:NaN,y[S++]=C?C[1]:NaN,w[n]=v,C=i.dataToPoint(w,null,P),y[S++]=C?C[1]:NaN}_.setLayout("largePoints",y)}}};function Ve(e,i,t,a,r){var n;return t>a?n=-1:t<a?n=1:n=i>0?e.get(r,i-1)<=a?1:-1:1,n}function Ln(e,i){var t=e.getBaseAxis(),a,r=t.type==="category"?t.getBandWidth():(a=t.getExtent(),Math.abs(a[1]-a[0])/i.count()),n=Tt(Qt(e.get("barMaxWidth"),r),r),o=Tt(Qt(e.get("barMinWidth"),1),r),s=e.get("barWidth");return s!=null?Tt(s,r):Math.max(Math.min(r/2,n),o)}var Mn=In;function kn(e){e.registerChartView(Cn),e.registerSeriesModel(xn),e.registerPreprocessor(Sn),e.registerVisual(Dn),e.registerLayout(Mn)}var Bn=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.init=function(t,a,r){var n=Ia(t);e.prototype.init.apply(this,arguments),Fe(t,n)},i.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),Fe(this.option,t)},i.prototype.getCellSize=function(){return this.option.cellSize},i.type="calendar",i.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},i}(he);function Fe(e,i){var t=e.cellSize,a;Y(t)?a=t:a=e.cellSize=[t,t],a.length===1&&(a[1]=a[0]);var r=F([0,1],function(n){return La(i,n)&&(a[n]="auto"),a[n]!=null&&a[n]!=="auto"});Ma(e,i,{type:"box",ignoreSize:r})}var Nn=Bn,zn=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.render=function(t,a,r){var n=this.group;n.removeAll();var o=t.coordinateSystem,s=o.getRangeInfo(),u=o.getOrient(),c=a.getLocaleModel();this._renderDayRect(t,s,n),this._renderLines(t,s,u,n),this._renderYearText(t,s,u,n),this._renderMonthText(t,c,u,n),this._renderWeekText(t,c,s,u,n)},i.prototype._renderDayRect=function(t,a,r){for(var n=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),s=n.getCellWidth(),u=n.getCellHeight(),c=a.start.time;c<=a.end.time;c=n.getNextNDay(c,1).time){var h=n.dataToRect([c],!1).tl,p=new Jt({shape:{x:h[0],y:h[1],width:s,height:u},cursor:"default",style:o});r.add(p)}},i.prototype._renderLines=function(t,a,r,n){var o=this,s=t.coordinateSystem,u=t.getModel(["splitLine","lineStyle"]).getLineStyle(),c=t.get(["splitLine","show"]),h=u.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var p=a.start,f=0;p.time<=a.end.time;f++){m(p.formatedDate),f===0&&(p=s.getDateInfo(a.start.y+"-"+a.start.m));var g=p.date;g.setMonth(g.getMonth()+1),p=s.getDateInfo(g)}m(s.getNextNDay(a.end.time,1).formatedDate);function m(b){o._firstDayOfMonth.push(s.getDateInfo(b)),o._firstDayPoints.push(s.dataToRect([b],!1).tl);var _=o._getLinePointsOfOneWeek(t,b,r);o._tlpoints.push(_[0]),o._blpoints.push(_[_.length-1]),c&&o._drawSplitline(_,u,n)}c&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,h,r),u,n),c&&this._drawSplitline(o._getEdgesPoints(o._blpoints,h,r),u,n)},i.prototype._getEdgesPoints=function(t,a,r){var n=[t[0].slice(),t[t.length-1].slice()],o=r==="horizontal"?0:1;return n[0][o]=n[0][o]-a/2,n[1][o]=n[1][o]+a/2,n},i.prototype._drawSplitline=function(t,a,r){var n=new gi({z2:20,shape:{points:t},style:a});r.add(n)},i.prototype._getLinePointsOfOneWeek=function(t,a,r){for(var n=t.coordinateSystem,o=n.getDateInfo(a),s=[],u=0;u<7;u++){var c=n.getNextNDay(o.time,u),h=n.dataToRect([c.time],!1);s[2*c.day]=h.tl,s[2*c.day+1]=h[r==="horizontal"?"bl":"tr"]}return s},i.prototype._formatterLabel=function(t,a){return st(t)&&t?ka(t,a):St(t)?t(a):a.nameMap},i.prototype._yearTextPositionControl=function(t,a,r,n,o){var s=a[0],u=a[1],c=["center","bottom"];n==="bottom"?(u+=o,c=["center","top"]):n==="left"?s-=o:n==="right"?(s+=o,c=["center","top"]):u-=o;var h=0;return(n==="left"||n==="right")&&(h=Math.PI/2),{rotation:h,x:s,y:u,style:{align:c[0],verticalAlign:c[1]}}},i.prototype._renderYearText=function(t,a,r,n){var o=t.getModel("yearLabel");if(!!o.get("show")){var s=o.get("margin"),u=o.get("position");u||(u=r!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],h=(c[0][0]+c[1][0])/2,p=(c[0][1]+c[1][1])/2,f=r==="horizontal"?0:1,g={top:[h,c[f][1]],bottom:[h,c[1-f][1]],left:[c[1-f][0],p],right:[c[f][0],p]},m=a.start.y;+a.end.y>+a.start.y&&(m=m+"-"+a.end.y);var b=o.get("formatter"),_={start:a.start.y,end:a.end.y,nameMap:m},y=this._formatterLabel(b,_),S=new ft({z2:30,style:gt(o,{text:y})});S.attr(this._yearTextPositionControl(S,g[u],r,u,s)),n.add(S)}},i.prototype._monthTextPositionControl=function(t,a,r,n,o){var s="left",u="top",c=t[0],h=t[1];return r==="horizontal"?(h=h+o,a&&(s="center"),n==="start"&&(u="bottom")):(c=c+o,a&&(u="middle"),n==="start"&&(s="right")),{x:c,y:h,align:s,verticalAlign:u}},i.prototype._renderMonthText=function(t,a,r,n){var o=t.getModel("monthLabel");if(!!o.get("show")){var s=o.get("nameMap"),u=o.get("margin"),c=o.get("position"),h=o.get("align"),p=[this._tlpoints,this._blpoints];(!s||st(s))&&(s&&(a=Oe(s)||a),s=a.get(["time","monthAbbr"])||[]);var f=c==="start"?0:1,g=r==="horizontal"?0:1;u=c==="start"?-u:u;for(var m=h==="center",b=0;b<p[f].length-1;b++){var _=p[f][b].slice(),y=this._firstDayOfMonth[b];if(m){var S=this._firstDayPoints[b];_[g]=(S[g]+p[0][b+1][g])/2}var C=o.get("formatter"),w=s[+y.m-1],P={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:w},O=this._formatterLabel(C,P),I=new ft({z2:30,style:vt(gt(o,{text:O}),this._monthTextPositionControl(_,m,r,c,u))});n.add(I)}}},i.prototype._weekTextPositionControl=function(t,a,r,n,o){var s="center",u="middle",c=t[0],h=t[1],p=r==="start";return a==="horizontal"?(c=c+n+(p?1:-1)*o[0]/2,s=p?"right":"left"):(h=h+n+(p?1:-1)*o[1]/2,u=p?"bottom":"top"),{x:c,y:h,align:s,verticalAlign:u}},i.prototype._renderWeekText=function(t,a,r,n,o){var s=t.getModel("dayLabel");if(!!s.get("show")){var u=t.coordinateSystem,c=s.get("position"),h=s.get("nameMap"),p=s.get("margin"),f=u.getFirstDayOfWeek();if(!h||st(h)){h&&(a=Oe(h)||a);var g=a.get(["time","dayOfWeekShort"]);h=g||F(a.get(["time","dayOfWeekAbbr"]),function(P){return P[0]})}var m=u.getNextNDay(r.end.time,7-r.lweek).time,b=[u.getCellWidth(),u.getCellHeight()];p=Tt(p,Math.min(b[1],b[0])),c==="start"&&(m=u.getNextNDay(r.start.time,-(7+r.fweek)).time,p=-p);for(var _=0;_<7;_++){var y=u.getNextNDay(m,_),S=u.dataToRect([y.time],!1).center,C=_;C=Math.abs((_+f)%7);var w=new ft({z2:30,style:vt(gt(s,{text:h[C]}),this._weekTextPositionControl(S,n,c,p,b))});o.add(w)}}},i.type="calendar",i}(pe),Rn=zn,Zt=864e5,En=function(){function e(i,t,a){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=i}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(i){i=Ba(i);var t=i.getFullYear(),a=i.getMonth()+1,r=a<10?"0"+a:""+a,n=i.getDate(),o=n<10?"0"+n:""+n,s=i.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:r,d:o,day:s,time:i.getTime(),formatedDate:t+"-"+r+"-"+o,date:i}},e.prototype.getNextNDay=function(i,t){return t=t||0,t===0?this.getDateInfo(i):(i=new Date(this.getDateInfo(i).time),i.setDate(i.getDate()+t),this.getDateInfo(i))},e.prototype.update=function(i,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var a=this._rangeInfo.weeks||1,r=["width","height"],n=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[a,7]:[7,a];A([0,1],function(p){h(n,p)&&(o[r[p]]=n[p]*s[p])});var u={width:t.getWidth(),height:t.getHeight()},c=this._rect=bi(o,u);A([0,1],function(p){h(n,p)||(n[p]=c[r[p]]/s[p])});function h(p,f){return p[f]!=null&&p[f]!=="auto"}this._sw=n[0],this._sh=n[1]},e.prototype.dataToPoint=function(i,t){Y(i)&&(i=i[0]),t==null&&(t=!0);var a=this.getDateInfo(i),r=this._rangeInfo,n=a.formatedDate;if(t&&!(a.time>=r.start.time&&a.time<r.end.time+Zt))return[NaN,NaN];var o=a.day,s=this._getRangeInfo([r.start.time,n]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},e.prototype.pointToData=function(i){var t=this.pointToDate(i);return t&&t.time},e.prototype.dataToRect=function(i,t){var a=this.dataToPoint(i,t);return{contentShape:{x:a[0]-(this._sw-this._lineWidth)/2,y:a[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},e.prototype.pointToDate=function(i){var t=Math.floor((i[0]-this._rect.x)/this._sw)+1,a=Math.floor((i[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(a,t-1,r):this._getDateByWeeksAndDay(t,a-1,r)},e.prototype.convertToPixel=function(i,t,a){var r=We(t);return r===this?r.dataToPoint(a):null},e.prototype.convertFromPixel=function(i,t,a){var r=We(t);return r===this?r.pointToData(a):null},e.prototype.containPoint=function(i){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var i=this._model.get("range"),t;if(Y(i)&&i.length===1&&(i=i[0]),Y(i))t=i;else{var a=i.toString();if(/^\d{4}$/.test(a)&&(t=[a+"-01-01",a+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(a)){var r=this.getDateInfo(a),n=r.date;n.setMonth(n.getMonth()+1);var o=this.getNextNDay(n,-1);t=[r.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)&&(t=[a,a])}if(!t)return Na("Invalid date range."),i;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},e.prototype._getRangeInfo=function(i){var t=[this.getDateInfo(i[0]),this.getDateInfo(i[1])],a;t[0].time>t[1].time&&(a=!0,t.reverse());var r=Math.floor(t[1].time/Zt)-Math.floor(t[0].time/Zt)+1,n=new Date(t[0].time),o=n.getDate(),s=t[1].date.getDate();n.setDate(o+r-1);var u=n.getDate();if(u!==s)for(var c=n.getTime()-t[1].time>0?1:-1;(u=n.getDate())!==s&&(n.getTime()-t[1].time)*c>0;)r-=c,n.setDate(u-c);var h=Math.floor((r+t[0].day+6)/7),p=a?-h+1:h-1;return a&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:r,weeks:h,nthWeek:p,fweek:t[0].day,lweek:t[1].day}},e.prototype._getDateByWeeksAndDay=function(i,t,a){var r=this._getRangeInfo(a);if(i>r.weeks||i===0&&t<r.fweek||i===r.weeks&&t>r.lweek)return null;var n=(i-1)*7-r.fweek+t,o=new Date(r.start.time);return o.setDate(+r.start.d+n),this.getDateInfo(o)},e.create=function(i,t){var a=[];return i.eachComponent("calendar",function(r){var n=new e(r,i,t);a.push(n),r.coordinateSystem=n}),i.eachSeries(function(r){r.get("coordinateSystem")==="calendar"&&(r.coordinateSystem=a[r.get("calendarIndex")||0])}),a},e.dimensions=["time","value"],e}();function We(e){var i=e.calendarModel,t=e.seriesModel,a=i?i.coordinateSystem:t?t.coordinateSystem:null;return a}var $n=En;function Vn(e){e.registerComponentModel(Nn),e.registerComponentView(Rn),e.registerCoordinateSystem("calendar",$n)}var Fn=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.type="dataZoom.select",i}(wr),Wn=Fn,Gn=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.type="dataZoom.select",i}(Pr),jn=Gn;function Zn(e){e.registerComponentModel(Wn),e.registerComponentView(jn),Or(e)}var H=function(){function e(){}return e}(),Ri={};function _t(e,i){Ri[e]=i}function Ei(e){return Ri[e]}var Un=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;A(this.option.feature,function(a,r){var n=Ei(r);n&&(n.getDefaultOption&&(n.defaultOption=n.getDefaultOption(t)),nt(a,n.defaultOption))})},i.type="toolbox",i.layoutMode={type:"box",ignoreSize:!0},i.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},i}(he),Hn=Un,Yn=function(e){B(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.render=function(t,a,r,n){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),u=t.get("feature")||{},c=this._features||(this._features={}),h=[];A(u,function(g,m){h.push(m)}),new fi(this._featureNames||[],h).add(p).update(p).remove(G(p,null)).execute(),this._featureNames=h;function p(g,m){var b=h[g],_=h[m],y=u[b],S=new za(y,t,t.ecModel),C;if(n&&n.newTitle!=null&&n.featureName===b&&(y.title=n.newTitle),b&&!_){if(Kn(b))C={onclick:S.option.onclick,featureName:b};else{var w=Ei(b);if(!w)return;C=new w}c[b]=C}else if(C=c[_],!C)return;C.uid=Ra("toolbox-feature"),C.model=S,C.ecModel=a,C.api=r;var P=C instanceof H;if(!b&&_){P&&C.dispose&&C.dispose(a,r);return}if(!S.get("show")||P&&C.unusable){P&&C.remove&&C.remove(a,r);return}f(S,C,b),S.setIconStatus=function(O,I){var L=this.option,k=this.iconPaths;L.iconStatus=L.iconStatus||{},L.iconStatus[O]=I,k[O]&&(I==="emphasis"?Vt:Ft)(k[O])},C instanceof H&&C.render&&C.render(S,a,r,n)}function f(g,m,b){var _=g.getModel("iconStyle"),y=g.getModel(["emphasis","iconStyle"]),S=m instanceof H&&m.getIcons?m.getIcons():g.get("icon"),C=g.get("title")||{},w,P;st(S)?(w={},w[b]=S):w=S,st(C)?(P={},P[b]=C):P=C;var O=g.iconPaths={};A(w,function(I,L){var k=_i(I,{},{x:-s/2,y:-s/2,width:s,height:s});k.setStyle(_.getItemStyle());var l=k.ensureState("emphasis");l.style=y.getItemStyle();var d=new ft({style:{text:P[L],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null},ignore:!0});k.setTextContent(d),Ea({el:k,componentModel:t,itemName:L,formatterParamsExtra:{title:P[L]}}),k.__title=P[L],k.on("mouseover",function(){var v=y.getItemStyle(),x=t.get("orient")==="vertical"?t.get("right")==null?"right":"left":t.get("bottom")==null?"bottom":"top";d.setStyle({fill:y.get("textFill")||v.fill||v.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),k.setTextConfig({position:y.get("textPosition")||x}),d.ignore=!t.get("showTitle"),Vt(this)}).on("mouseout",function(){g.get(["iconStatus",L])!=="emphasis"&&Ft(this),d.hide()}),(g.get(["iconStatus",L])==="emphasis"?Vt:Ft)(k),o.add(k),k.on("click",X(m.onclick,m,a,r,L)),O[L]=k})}$a(o,t,r),o.add(Va(o.getBoundingRect(),t)),o.eachChild(function(g){var m=g.__title,b=g.ensureState("emphasis"),_=b.textConfig||(b.textConfig={}),y=g.getTextContent(),S=y&&y.states.emphasis;if(S&&!St(S)&&m){var C=S.style||(S.style={}),w=Fa(m,ft.makeFont(C)),P=g.x+o.x,O=g.y+o.y+s,I=!1;O+w.height>r.getHeight()&&(_.position="top",I=!0);var L=I?-5-w.height:s+8;P+w.width/2>r.getWidth()?(_.position=["100%",L],C.align="right"):P-w.width/2<0&&(_.position=[0,L],C.align="left")}})},i.prototype.updateView=function(t,a,r,n){A(this._features,function(o){o instanceof H&&o.updateView&&o.updateView(o.model,a,r,n)})},i.prototype.remove=function(t,a){A(this._features,function(r){r instanceof H&&r.remove&&r.remove(t,a)}),this.group.removeAll()},i.prototype.dispose=function(t,a){A(this._features,function(r){r instanceof H&&r.dispose&&r.dispose(t,a)})},i.type="toolbox",i}(pe);function Kn(e){return e.indexOf("my")===0}var qn=Yn,Xn=function(e){B(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.onclick=function(t,a){var r=this.model,n=r.get("name")||t.get("title.0.text")||"echarts",o=a.getZr().painter.getType()==="svg",s=o?"svg":r.get("type",!0)||"png",u=a.getConnectedDataURL({type:s,backgroundColor:r.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:r.get("connectedBackgroundColor"),excludeComponents:r.get("excludeComponents"),pixelRatio:r.get("pixelRatio")}),c=Wa.browser;if(St(MouseEvent)&&(c.newEdge||!c.ie&&!c.edge)){var h=document.createElement("a");h.download=n+"."+s,h.target="_blank",h.href=u;var p=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});h.dispatchEvent(p)}else if(window.navigator.msSaveOrOpenBlob||o){var f=u.split(","),g=f[0].indexOf("base64")>-1,m=o?decodeURIComponent(f[1]):f[1];g&&(m=window.atob(m));var b=n+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var _=m.length,y=new Uint8Array(_);_--;)y[_]=m.charCodeAt(_);var S=new Blob([y]);window.navigator.msSaveOrOpenBlob(S,b)}else{var C=document.createElement("iframe");document.body.appendChild(C);var w=C.contentWindow,P=w.document;P.open("image/svg+xml","replace"),P.write(m),P.close(),w.focus(),P.execCommand("SaveAs",!0,b),document.body.removeChild(C)}}else{var O=r.get("lang"),I='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(O&&O[0]||"")+'" /></body>',L=window.open();L.document.write(I),L.document.title=n}},i.getDefaultOption=function(t){var a={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return a},i}(H),Jn=Xn,Ge="__ec_magicType_stack__",Qn=[["line","bar"],["stack"]],to=function(e){B(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getIcons=function(){var t=this.model,a=t.get("icon"),r={};return A(t.get("type"),function(n){a[n]&&(r[n]=a[n])}),r},i.getDefaultOption=function(t){var a={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return a},i.prototype.onclick=function(t,a,r){var n=this.model,o=n.get(["seriesIndex",r]);if(!!je[r]){var s={series:[]},u=function(p){var f=p.subType,g=p.id,m=je[r](f,g,p,n);m&&(bt(m,p.option),s.series.push(m));var b=p.coordinateSystem;if(b&&b.type==="cartesian2d"&&(r==="line"||r==="bar")){var _=b.getAxesByScale("ordinal")[0];if(_){var y=_.dim,S=y+"Axis",C=p.getReferringComponents(S,Ga).models[0],w=C.componentIndex;s[S]=s[S]||[];for(var P=0;P<=w;P++)s[S][w]=s[S][w]||{};s[S][w].boundaryGap=r==="bar"}}};A(Qn,function(p){wt(p,r)>=0&&A(p,function(f){n.setIconStatus(f,"normal")})}),n.setIconStatus(r,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},u);var c,h=r;r==="stack"&&(c=nt({stack:n.option.title.tiled,tiled:n.option.title.stack},n.option.title),n.get(["iconStatus",r])!=="emphasis"&&(h="tiled")),a.dispatchAction({type:"changeMagicType",currentType:h,newOption:s,newTitle:c,featureName:"magicType"})}},i}(H),je={line:function(e,i,t,a){if(e==="bar")return nt({id:i,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(e,i,t,a){if(e==="line")return nt({id:i,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(e,i,t,a){var r=t.get("stack")===Ge;if(e==="line"||e==="bar")return a.setIconStatus("stack",r?"normal":"emphasis"),nt({id:i,stack:r?"":Ge},a.get(["option","stack"])||{},!0)}};de({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,i){i.mergeOption(e.newOption)});var eo=to,Rt=new Array(60).join("-"),yt="	";function io(e){var i={},t=[],a=[];return e.eachRawSeries(function(r){var n=r.coordinateSystem;if(n&&(n.type==="cartesian2d"||n.type==="polar")){var o=n.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;i[s]||(i[s]={categoryAxis:o,valueAxis:n.getOtherAxis(o),series:[]},a.push({axisDim:o.dim,axisIndex:o.index})),i[s].series.push(r)}else t.push(r)}else t.push(r)}),{seriesGroupByCategoryAxis:i,other:t,meta:a}}function ao(e){var i=[];return A(e,function(t,a){var r=t.categoryAxis,n=t.valueAxis,o=n.dim,s=[" "].concat(F(t.series,function(g){return g.name})),u=[r.model.getCategories()];A(t.series,function(g){var m=g.getRawData();u.push(g.getRawData().mapArray(m.mapDimension(o),function(b){return b}))});for(var c=[s.join(yt)],h=0;h<u[0].length;h++){for(var p=[],f=0;f<u.length;f++)p.push(u[f][h]);c.push(p.join(yt))}i.push(c.join(`
`))}),i.join(`

`+Rt+`

`)}function ro(e){return F(e,function(i){var t=i.getRawData(),a=[i.name],r=[];return t.each(t.dimensions,function(){for(var n=arguments.length,o=arguments[n-1],s=t.getName(o),u=0;u<n-1;u++)r[u]=arguments[u];a.push((s?s+yt:"")+r.join(yt))}),a.join(`
`)}).join(`

`+Rt+`

`)}function no(e){var i=io(e);return{value:ja([ao(i.seriesGroupByCategoryAxis),ro(i.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+Rt+`

`),meta:i.meta}}function It(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function oo(e){var i=e.slice(0,e.indexOf(`
`));if(i.indexOf(yt)>=0)return!0}var ne=new RegExp("["+yt+"]+","g");function so(e){for(var i=e.split(/\n+/g),t=It(i.shift()).split(ne),a=[],r=F(t,function(u){return{name:u,data:[]}}),n=0;n<i.length;n++){var o=It(i[n]).split(ne);a.push(o.shift());for(var s=0;s<o.length;s++)r[s]&&(r[s].data[n]=o[s])}return{series:r,categories:a}}function lo(e){for(var i=e.split(/\n+/g),t=It(i.shift()),a=[],r=0;r<i.length;r++){var n=It(i[r]);if(!!n){var o=n.split(ne),s="",u=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),a[r]={name:s,value:[]},u=a[r].value):u=a[r]=[];for(var h=0;h<o.length;h++)u.push(+o[h]);u.length===1&&(c?a[r].value=u[0]:a[r]=u[0])}}return{name:t,data:a}}function uo(e,i){var t=e.split(new RegExp(`
*`+Rt+`
*`,"g")),a={series:[]};return A(t,function(r,n){if(oo(r)){var o=so(r),s=i[n],u=s.axisDim+"Axis";s&&(a[u]=a[u]||[],a[u][s.axisIndex]={data:o.categories},a.series=a.series.concat(o.series))}else{var o=lo(r);a.series.push(o)}}),a}var co=function(e){B(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.onclick=function(t,a){var r=a.getDom(),n=this.model;this._dom&&r.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=n.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=n.get("lang")||[];s.innerHTML=u[0]||n.get("title"),s.style.cssText="margin: 10px 20px;",s.style.color=n.get("textColor");var c=document.createElement("div"),h=document.createElement("textarea");c.style.cssText="display:block;width:100%;overflow:auto;";var p=n.get("optionToContent"),f=n.get("contentToOption"),g=no(t);if(St(p)){var m=p(a.getOption());st(m)?c.innerHTML=m:Za(m)&&c.appendChild(m)}else c.appendChild(h),h.readOnly=n.get("readOnly"),h.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",h.style.color=n.get("textColor"),h.style.borderColor=n.get("textareaBorderColor"),h.style.backgroundColor=n.get("textareaColor"),h.value=g.value;var b=g.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:0;left:0;right:0;";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),C=document.createElement("div");y+=";background-color:"+n.get("buttonColor"),y+=";color:"+n.get("buttonTextColor");var w=this;function P(){r.removeChild(o),w._dom=null}Ae(S,"click",P),Ae(C,"click",function(){if(f==null&&p!=null||f!=null&&p==null){console.warn("It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored."),P();return}var O;try{St(f)?O=f(c,a.getOption()):O=uo(h.value,b)}catch(I){throw P(),new Error("Data view format error "+I)}O&&a.dispatchAction({type:"changeDataView",newOption:O}),P()}),S.innerHTML=u[1],C.innerHTML=u[2],C.style.cssText=y,S.style.cssText=y,!n.get("readOnly")&&_.appendChild(C),_.appendChild(S),o.appendChild(s),o.appendChild(c),o.appendChild(_),c.style.height=r.clientHeight-80+"px",r.appendChild(o),this._dom=o},i.prototype.remove=function(t,a){this._dom&&a.getDom().removeChild(this._dom)},i.prototype.dispose=function(t,a){this.remove(t,a)},i.getDefaultOption=function(t){var a={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return a},i}(H);function ho(e,i){return F(e,function(t,a){var r=i&&i[a];if(xt(r)&&!Y(r)){var n=xt(t)&&!Y(t);n||(t={value:t});var o=r.name!=null&&t.name==null;return t=bt(t,r),o&&delete t.name,t}else return t})}de({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,i){var t=[];A(e.newOption.series,function(a){var r=i.getSeriesByName(a.name)[0];if(!r)t.push(vt({type:"scatter"},a));else{var n=r.get("data");t.push({name:a.name,data:ho(a.data,n)})}}),i.mergeOption(bt({series:t},e.newOption))});var po=co,$i=A,Vi=Ci();function fo(e,i){var t=_e(e);$i(i,function(a,r){for(var n=t.length-1;n>=0;n--){var o=t[n];if(o[r])break}if(n<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(s){var u=s.getPercentRange();t[0][r]={dataZoomId:r,start:u[0],end:u[1]}}}}),t.push(i)}function go(e){var i=_e(e),t=i[i.length-1];i.length>1&&i.pop();var a={};return $i(t,function(r,n){for(var o=i.length-1;o>=0;o--)if(r=i[o][n],r){a[n]=r;break}}),a}function vo(e){Vi(e).snapshots=null}function mo(e){return _e(e).length}function _e(e){var i=Vi(e);return i.snapshots||(i.snapshots=[{}]),i.snapshots}var yo=function(e){B(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.onclick=function(t,a){vo(t),a.dispatchAction({type:"restore",from:this.uid})},i.getDefaultOption=function(t){var a={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return a},i}(H);de({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,i){i.resetOption("recreate")});var bo=yo,_o=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Co=function(){function e(i,t,a){var r=this;this._targetInfoList=[];var n=Ze(t,i);A(xo,function(o,s){(!a||!a.include||wt(a.include,s)>=0)&&o(n,r._targetInfoList)})}return e.prototype.setOutputRanges=function(i,t){return this.matchOutputRanges(i,t,function(a,r,n){if((a.coordRanges||(a.coordRanges=[])).push(r),!a.coordRange){a.coordRange=r;var o=Ut[a.brushType](0,n,r);a.__rangeOffset={offset:Ke[a.brushType](o.values,a.range,[1,1]),xyMinMax:o.xyMinMax}}}),i},e.prototype.matchOutputRanges=function(i,t,a){A(i,function(r){var n=this.findTargetInfo(r,t);n&&n!==!0&&A(n.coordSyses,function(o){var s=Ut[r.brushType](1,o,r.range,!0);a(r,s.values,o,t)})},this)},e.prototype.setInputRanges=function(i,t){A(i,function(a){var r=this.findTargetInfo(a,t);if(ct(!r||r===!0||a.coordRange,"coordRange must be specified when coord index specified."),ct(!r||r!==!0||a.range,"range must be specified in global brush."),a.range=a.range||[],r&&r!==!0){a.panelId=r.panelId;var n=Ut[a.brushType](0,r.coordSys,a.coordRange),o=a.__rangeOffset;a.range=o?Ke[a.brushType](n.values,o.offset,So(n.xyMinMax,o.xyMinMax)):n.values}},this)},e.prototype.makePanelOpts=function(i,t){return F(this._targetInfoList,function(a){var r=a.getPanelRect();return{panelId:a.panelId,defaultBrushType:t?t(a):null,clipPath:hn(r),isTargetByCursor:dn(r,i,a.coordSysModel),getLinearBrushOtherExtent:pn(r)}})},e.prototype.controlSeries=function(i,t,a){var r=this.findTargetInfo(i,a);return r===!0||r&&wt(r.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(i,t){for(var a=this._targetInfoList,r=Ze(t,i),n=0;n<a.length;n++){var o=a[n],s=i.panelId;if(s){if(o.panelId===s)return o}else for(var u=0;u<Ue.length;u++)if(Ue[u](r,o))return o}return!0},e}();function oe(e){return e[0]>e[1]&&e.reverse(),e}function Ze(e,i){return xi(e,i,{includeMainTypes:_o})}var xo={grid:function(e,i){var t=e.xAxisModels,a=e.yAxisModels,r=e.gridModels,n=Ua(),o={},s={};!t&&!a&&!r||(A(t,function(u){var c=u.axis.grid.model;n.set(c.id,c),o[c.id]=!0}),A(a,function(u){var c=u.axis.grid.model;n.set(c.id,c),s[c.id]=!0}),A(r,function(u){n.set(u.id,u),o[u.id]=!0,s[u.id]=!0}),n.each(function(u){var c=u.coordinateSystem,h=[];A(c.getCartesians(),function(p,f){(wt(t,p.getAxis("x").model)>=0||wt(a,p.getAxis("y").model)>=0)&&h.push(p)}),i.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:h[0],coordSyses:h,getPanelRect:He.grid,xAxisDeclared:o[u.id],yAxisDeclared:s[u.id]})}))},geo:function(e,i){A(e.geoModels,function(t){var a=t.coordinateSystem;i.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:a,coordSyses:[a],getPanelRect:He.geo})})}},Ue=[function(e,i){var t=e.xAxisModel,a=e.yAxisModel,r=e.gridModel;return!r&&t&&(r=t.axis.grid.model),!r&&a&&(r=a.axis.grid.model),r&&r===i.gridModel},function(e,i){var t=e.geoModel;return t&&t===i.geoModel}],He={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,i=e.getBoundingRect().clone();return i.applyTransform(vi(e)),i}},Ut={lineX:G(Ye,0),lineY:G(Ye,1),rect:function(e,i,t,a){var r=e?i.pointToData([t[0][0],t[1][0]],a):i.dataToPoint([t[0][0],t[1][0]],a),n=e?i.pointToData([t[0][1],t[1][1]],a):i.dataToPoint([t[0][1],t[1][1]],a),o=[oe([r[0],n[0]]),oe([r[1],n[1]])];return{values:o,xyMinMax:o}},polygon:function(e,i,t,a){var r=[[1/0,-1/0],[1/0,-1/0]],n=F(t,function(o){var s=e?i.pointToData(o,a):i.dataToPoint(o,a);return r[0][0]=Math.min(r[0][0],s[0]),r[1][0]=Math.min(r[1][0],s[1]),r[0][1]=Math.max(r[0][1],s[0]),r[1][1]=Math.max(r[1][1],s[1]),s});return{values:n,xyMinMax:r}}};function Ye(e,i,t,a){ct(t.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.");var r=t.getAxis(["x","y"][e]),n=oe(F([0,1],function(s){return i?r.coordToData(r.toLocalCoord(a[s]),!0):r.toGlobalCoord(r.dataToCoord(a[s]))})),o=[];return o[e]=n,o[1-e]=[NaN,NaN],{values:n,xyMinMax:o}}var Ke={lineX:G(qe,0),lineY:G(qe,1),rect:function(e,i,t){return[[e[0][0]-t[0]*i[0][0],e[0][1]-t[0]*i[0][1]],[e[1][0]-t[1]*i[1][0],e[1][1]-t[1]*i[1][1]]]},polygon:function(e,i,t){return F(e,function(a,r){return[a[0]-t[0]*i[r][0],a[1]-t[1]*i[r][1]]})}};function qe(e,i,t,a){return[i[0]-a[e]*t[0],i[1]-a[e]*t[1]]}function So(e,i){var t=Xe(e),a=Xe(i),r=[t[0]/a[0],t[1]/a[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}function Xe(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var Fi=Co,se=A,wo=Ya("toolbox-dataZoom_"),Po=function(e){B(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.render=function(t,a,r,n){this._brushController||(this._brushController=new cn(r.getZr()),this._brushController.on("brush",X(this._onBrush,this)).mount()),To(t,a,this,n,r),Ao(t,a)},i.prototype.onclick=function(t,a,r){Oo[r].call(this)},i.prototype.remove=function(t,a){this._brushController&&this._brushController.unmount()},i.prototype.dispose=function(t,a){this._brushController&&this._brushController.dispose()},i.prototype._onBrush=function(t){var a=t.areas;if(!t.isEnd||!a.length)return;var r={},n=this.ecModel;this._brushController.updateCovers([]);var o=new Fi(Ce(this.model),n,{include:["grid"]});o.matchOutputRanges(a,n,function(c,h,p){if(p.type==="cartesian2d"){var f=c.brushType;f==="rect"?(s("x",p,h[0]),s("y",p,h[1])):s({lineX:"x",lineY:"y"}[f],p,h)}}),fo(n,r),this._dispatchZoomAction(r);function s(c,h,p){var f=h.getAxis(c),g=f.model,m=u(c,g,n),b=m.findRepresentativeAxisProxy(g).getMinMaxSpan();(b.minValueSpan!=null||b.maxValueSpan!=null)&&(p=Ar(0,p.slice(),f.scale.getExtent(),0,b.minValueSpan,b.maxValueSpan)),m&&(r[m.id]={dataZoomId:m.id,startValue:p[0],endValue:p[1]})}function u(c,h,p){var f;return p.eachComponent({mainType:"dataZoom",subType:"select"},function(g){var m=g.getAxisModel(c,h.componentIndex);m&&(f=g)}),f}},i.prototype._dispatchZoomAction=function(t){var a=[];se(t,function(r,n){a.push(ot(r))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},i.getDefaultOption=function(t){var a={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return a},i}(H),Oo={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(go(this.ecModel))}};function Ce(e){var i={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return i.xAxisIndex==null&&i.xAxisId==null&&(i.xAxisIndex="all"),i.yAxisIndex==null&&i.yAxisId==null&&(i.yAxisIndex="all"),i}function Ao(e,i){e.setIconStatus("back",mo(i)>1?"emphasis":"normal")}function To(e,i,t,a,r){var n=t._isZoomActive;a&&a.type==="takeGlobalCursor"&&(n=a.key==="dataZoomSelect"?a.dataZoomSelectActive:!1),t._isZoomActive=n,e.setIconStatus("zoom",n?"emphasis":"normal");var o=new Fi(Ce(e),i,{include:["grid"]}),s=o.makePanelOpts(r,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(n&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}Ha("dataZoom",function(e){var i=e.getComponent("toolbox",0),t=["feature","dataZoom"];if(!i||i.get(t)==null)return;var a=i.getModel(t),r=[],n=Ce(a),o=xi(e,n);se(o.xAxisModels,function(u){return s(u,"xAxis","xAxisIndex")}),se(o.yAxisModels,function(u){return s(u,"yAxis","yAxisIndex")});function s(u,c,h){var p=u.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:wo+c+p};f[h]=p,r.push(f)}return r});var Do=Po;function Io(e){e.registerComponentModel(Hn),e.registerComponentView(qn),_t("saveAsImage",Jn),_t("magicType",eo),_t("dataView",po),_t("dataZoom",Do),_t("restore",bo),ce(Zn)}var Lo=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t.layoutMode="box",t}return i.prototype.init=function(t,a,r){this.mergeDefaultAndTheme(t,r),this._initData()},i.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this._initData()},i.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var a=this._data.count();this.option.loop?t=(t%a+a)%a:(t>=a&&(t=a-1),t<0&&(t=0)),this.option.currentIndex=t},i.prototype.getCurrentIndex=function(){return this.option.currentIndex},i.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},i.prototype.setPlayState=function(t){this.option.autoPlay=!!t},i.prototype.getPlayState=function(){return!!this.option.autoPlay},i.prototype._initData=function(){var t=this.option,a=t.data||[],r=t.axisType,n=this._names=[],o;r==="category"?(o=[],A(a,function(c,h){var p=Ka(qa(c),""),f;xt(c)?(f=ot(c),f.value=h):f=h,o.push(f),n.push(p)})):o=a;var s={category:"ordinal",time:"time",value:"number"}[r]||"number",u=this._data=new Xa([{name:"value",type:s}],this);u.initData(o,n)},i.prototype.getData=function(){return this._data},i.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},i.type="timeline",i.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},i}(he),Je=Lo,Wi=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.type="timeline.slider",i.defaultOption=Ja(Je.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),i}(Je);mi(Wi,Qa.prototype);var Mo=Wi,ko=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.type="timeline",i}(pe),Bo=ko,No=function(e){B(i,e);function i(t,a,r,n){var o=e.call(this,t,a,r)||this;return o.type=n||"value",o}return i.prototype.getLabelModel=function(){return this.model.getModel("label")},i.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},i}(Tr),zo=No,Ht=Math.PI,Qe=Ci(),Ro=function(e){B(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.init=function(t,a){this.api=a},i.prototype.render=function(t,a,r){if(this.model=t,this.api=r,this.ecModel=a,this.group.removeAll(),t.get("show",!0)){var n=this._layout(t,r),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),u=this._axis=this._createAxis(n,t);t.formatTooltip=function(c){var h=u.scale.getLabel({value:c});return tr("nameValue",{noName:!0,value:h})},A(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](n,o,u,t)},this),this._renderAxisLabel(n,s,u,t),this._position(n,t)}this._doPlayStop(),this._updateTicksStatus()},i.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},i.prototype.dispose=function(){this._clearTimer()},i.prototype._layout=function(t,a){var r=t.get(["label","position"]),n=t.get("orient"),o=$o(t,a),s;r==null||r==="auto"?s=n==="horizontal"?o.y+o.height/2<a.getHeight()/2?"-":"+":o.x+o.width/2<a.getWidth()/2?"+":"-":st(r)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[n][r]:s=r;var u={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},h={horizontal:0,vertical:Ht/2},p=n==="vertical"?o.height:o.width,f=t.getModel("controlStyle"),g=f.get("show",!0),m=g?f.get("itemSize"):0,b=g?f.get("itemGap"):0,_=m+b,y=t.get(["label","rotate"])||0;y=y*Ht/180;var S,C,w,P=f.get("position",!0),O=g&&f.get("showPlayBtn",!0),I=g&&f.get("showPrevBtn",!0),L=g&&f.get("showNextBtn",!0),k=0,l=p;P==="left"||P==="bottom"?(O&&(S=[0,0],k+=_),I&&(C=[k,0],k+=_),L&&(w=[l-m,0],l-=_)):(O&&(S=[l-m,0],l-=_),I&&(C=[0,0],k+=_),L&&(w=[l-m,0],l-=_));var d=[k,l];return t.get("inverse")&&d.reverse(),{viewRect:o,mainLength:p,orient:n,rotation:h[n],labelRotation:y,labelPosOpt:s,labelAlign:t.get(["label","align"])||u[n],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[n],playPosition:S,prevBtnPosition:C,nextBtnPosition:w,axisExtent:d,controlSize:m,controlGap:b}},i.prototype._position=function(t,a){var r=this._mainGroup,n=this._labelGroup,o=t.viewRect;if(t.orient==="vertical"){var s=cr(),u=o.x,c=o.y+o.height;Te(s,s,[-u,-c]),er(s,s,-Ht/2),Te(s,s,[u,c]),o=o.clone(),o.applyTransform(s)}var h=S(o),p=S(r.getBoundingRect()),f=S(n.getBoundingRect()),g=[r.x,r.y],m=[n.x,n.y];m[0]=g[0]=h[0][0];var b=t.labelPosOpt;if(b==null||st(b)){var _=b==="+"?0:1;C(g,p,h,1,_),C(m,f,h,1,1-_)}else{var _=b>=0?0:1;C(g,p,h,1,_),m[1]=g[1]+b}r.setPosition(g),n.setPosition(m),r.rotation=n.rotation=t.rotation,y(r),y(n);function y(w){w.originX=h[0][0]-w.x,w.originY=h[1][0]-w.y}function S(w){return[[w.x,w.x+w.width],[w.y,w.y+w.height]]}function C(w,P,O,I,L){w[I]+=O[I][L]-P[I][L]}},i.prototype._createAxis=function(t,a){var r=a.getData(),n=a.get("axisType"),o=Eo(a,n);o.getTicks=function(){return r.mapArray(["value"],function(c){return{value:c}})};var s=r.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var u=new zo("value",o,t.axisExtent,n);return u.model=a,u},i.prototype._createGroup=function(t){var a=this[t]=new Ot;return this.group.add(a),a},i.prototype._renderAxisLine=function(t,a,r,n){var o=r.getExtent();if(!!n.get(["lineStyle","show"])){var s=new De({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:vt({lineCap:"round"},n.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});a.add(s);var u=this._progressLine=new De({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:bt({lineCap:"round",lineWidth:s.style.lineWidth},n.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});a.add(u)}},i.prototype._renderAxisTick=function(t,a,r,n){var o=this,s=n.getData(),u=r.scale.getTicks();this._tickSymbols=[],A(u,function(c){var h=r.dataToCoord(c.value),p=s.getItemModel(c.value),f=p.getModel("itemStyle"),g=p.getModel(["emphasis","itemStyle"]),m=p.getModel(["progress","itemStyle"]),b={x:h,y:0,onclick:X(o._changeTimeline,o,c.value)},_=ti(p,f,a,b);_.ensureState("emphasis").style=g.getItemStyle(),_.ensureState("progress").style=m.getItemStyle(),Wt(_);var y=pi(_);p.get("tooltip")?(y.dataIndex=c.value,y.dataModel=n):y.dataIndex=y.dataModel=null,o._tickSymbols.push(_)})},i.prototype._renderAxisLabel=function(t,a,r,n){var o=this,s=r.getLabelModel();if(!!s.get("show")){var u=n.getData(),c=r.getViewLabels();this._tickLabels=[],A(c,function(h){var p=h.tickValue,f=u.getItemModel(p),g=f.getModel("label"),m=f.getModel(["emphasis","label"]),b=f.getModel(["progress","label"]),_=r.dataToCoord(h.tickValue),y=new ft({x:_,y:0,rotation:t.labelRotation-t.rotation,onclick:X(o._changeTimeline,o,p),silent:!1,style:gt(g,{text:h.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});y.ensureState("emphasis").style=gt(m),y.ensureState("progress").style=gt(b),a.add(y),Wt(y),Qe(y).dataIndex=p,o._tickLabels.push(y)})}},i.prototype._renderControl=function(t,a,r,n){var o=t.controlSize,s=t.rotation,u=n.getModel("controlStyle").getItemStyle(),c=n.getModel(["emphasis","controlStyle"]).getItemStyle(),h=n.getPlayState(),p=n.get("inverse",!0);f(t.nextBtnPosition,"next",X(this._changeTimeline,this,p?"-":"+")),f(t.prevBtnPosition,"prev",X(this._changeTimeline,this,p?"+":"-")),f(t.playPosition,h?"stop":"play",X(this._handlePlayClick,this,!h),!0);function f(g,m,b,_){if(!!g){var y=ir(Qt(n.get(["controlStyle",m+"BtnSize"]),o),o),S=[0,-y/2,y,y],C=Vo(n,m+"Icon",S,{x:g[0],y:g[1],originX:o/2,originY:0,rotation:_?-s:0,rectHover:!0,style:u,onclick:b});C.ensureState("emphasis").style=c,a.add(C),Wt(C)}}},i.prototype._renderCurrentPointer=function(t,a,r,n){var o=n.getData(),s=n.getCurrentIndex(),u=o.getItemModel(s).getModel("checkpointStyle"),c=this,h={onCreate:function(p){p.draggable=!0,p.drift=X(c._handlePointerDrag,c),p.ondragend=X(c._handlePointerDragend,c),ei(p,c._progressLine,s,r,n,!0)},onUpdate:function(p){ei(p,c._progressLine,s,r,n)}};this._currentPointer=ti(u,u,this._mainGroup,{},this._currentPointer,h)},i.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},i.prototype._handlePointerDrag=function(t,a,r){this._clearTimer(),this._pointerChangeTimeline([r.offsetX,r.offsetY])},i.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},i.prototype._pointerChangeTimeline=function(t,a){var r=this._toAxisCoord(t)[0],n=this._axis,o=ar(n.getExtent().slice());r>o[1]&&(r=o[1]),r<o[0]&&(r=o[0]),this._currentPointer.x=r,this._currentPointer.markRedraw(),this._progressLine.shape.x2=r,this._progressLine.dirty();var s=this._findNearestTick(r),u=this.model;(a||s!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(s)},i.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var a=t.model;t._changeTimeline(a.getCurrentIndex()+(a.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},i.prototype._toAxisCoord=function(t){var a=this._mainGroup.getLocalTransform();return rr(t,a,!0)},i.prototype._findNearestTick=function(t){var a=this.model.getData(),r=1/0,n,o=this._axis;return a.each(["value"],function(s,u){var c=o.dataToCoord(s),h=Math.abs(c-t);h<r&&(r=h,n=u)}),n},i.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},i.prototype._changeTimeline=function(t){var a=this.model.getCurrentIndex();t==="+"?t=a+1:t==="-"&&(t=a-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},i.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),a=this._tickSymbols,r=this._tickLabels;if(a)for(var n=0;n<a.length;n++)a&&a[n]&&a[n].toggleState("progress",n<t);if(r)for(var n=0;n<r.length;n++)r&&r[n]&&r[n].toggleState("progress",Qe(r[n]).dataIndex<=t)},i.type="timeline.slider",i}(Bo);function Eo(e,i){if(i=i||e.get("type"),i)switch(i){case"category":return new sr({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new or({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new nr}}function $o(e,i){return bi(e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()},e.get("padding"))}function Vo(e,i,t,a){var r=a.style,n=_i(e.get(["controlStyle",i]),a||{},new le(t[0],t[1],t[2],t[3]));return r&&n.setStyle(r),n}function ti(e,i,t,a,r,n){var o=i.get("color");if(r)r.setColor(o),t.add(r),n&&n.onUpdate(r);else{var s=e.get("symbol");r=hi(s,-1,-1,2,2,o),r.setStyle("strokeNoScale",!0),t.add(r),n&&n.onCreate(r)}var u=i.getItemStyle(["color"]);r.setStyle(u),a=nt({rectHover:!0,z2:100},a,!0);var c=lr(e.get("symbolSize"));a.scaleX=c[0]/2,a.scaleY=c[1]/2;var h=ur(e.get("symbolOffset"),c);h&&(a.x=(a.x||0)+h[0],a.y=(a.y||0)+h[1]);var p=e.get("symbolRotate");return a.rotation=(p||0)*Math.PI/180||0,r.attr(a),r.updateTransform(),r}function ei(e,i,t,a,r,n){if(!e.dragging){var o=r.getModel("checkpointStyle"),s=a.dataToCoord(r.getData().get("value",t));if(n||!o.get("animation",!0))e.attr({x:s,y:0}),i&&i.attr({shape:{x2:s}});else{var u={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},u),i&&i.animateTo({shape:{x2:s}},u)}}}var Fo=Ro;function Wo(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(i,t,a){var r=t.getComponent("timeline");return r&&i.currentIndex!=null&&(r.setCurrentIndex(i.currentIndex),!r.get("loop",!0)&&r.isIndexMax()&&r.getPlayState()&&(r.setPlayState(!1),a.dispatchAction({type:"timelinePlayChange",playState:!1,from:i.from}))),t.resetOption("timeline",{replaceMerge:r.get("replaceMerge",!0)}),bt({currentIndex:r.option.currentIndex},i)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(i,t){var a=t.getComponent("timeline");a&&i.playState!=null&&a.setPlayState(i.playState)})}function Go(e){var i=e&&e.timeline;Y(i)||(i=i?[i]:[]),A(i,function(t){!t||jo(t)})}function jo(e){var i=e.type,t={number:"value",time:"time"};if(t[i]&&(e.axisType=t[i],delete e.type),ii(e),ut(e,"controlPosition")){var a=e.controlStyle||(e.controlStyle={});ut(a,"position")||(a.position=e.controlPosition),a.position==="none"&&!ut(a,"show")&&(a.show=!1,delete a.position),delete e.controlPosition}A(e.data||[],function(r){xt(r)&&!Y(r)&&(!ut(r,"value")&&ut(r,"name")&&(r.value=r.name),ii(r))})}function ii(e){var i=e.itemStyle||(e.itemStyle={}),t=i.emphasis||(i.emphasis={}),a=e.label||e.label||{},r=a.normal||(a.normal={}),n={normal:1,emphasis:1};A(a,function(o,s){!n[s]&&!ut(r,s)&&(r[s]=o)}),t.label&&!ut(a,"emphasis")&&(a.emphasis=t.label,delete t.label)}function ut(e,i){return e.hasOwnProperty(i)}function Zo(e){e.registerComponentModel(Mo),e.registerComponentView(Fo),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),Wo(e),e.registerPreprocessor(Go)}function Dt(){return`#${(Math.random()*16777215<<0).toString(16)}`}const Uo=2,Ho=3;function ai(e,i,t=Ho){const a=i%e;return i-a+(t===Uo?e:0)}var Yo=Object.defineProperty,Ko=Object.getOwnPropertyDescriptor,it=(e,i,t,a)=>{for(var r=a>1?void 0:a?Ko(i,t):i,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(a?o(i,t,r):o(r))||r);return a&&r&&Yo(i,t,r),r};ce([pr,Vn,dr,Dr,Ir,fr,Zo,gr,Io,vr,Lr,Mr,kn,kr,Br,jr,mr]);const Yt="5.5%",Kt="1%",ri=55,Ct=8,qo="#26A69A",Xo="#26A69A",Jo="#EF5350",Qo="#EF5350",ts="#00ff26",es="#00ff26",is="#faba25",as="#faba25",rs="cyan",ns="pink";let K=class extends Mt{constructor(){super(...arguments);this.buyData=[],this.sellData=[],this.chartOptions={}}datasetChanged(){this.updateChart()}plotConfigChanged(){this.initializeChartOptions()}get strategy(){return this.dataset?this.dataset.strategy:""}get pair(){return this.dataset?this.dataset.pair:""}get timeframe(){return this.dataset?this.dataset.timeframe:""}get timeframems(){return this.dataset?this.dataset.timeframe_ms:0}get datasetColumns(){return this.dataset?this.dataset.columns:[]}get hasData(){return this.dataset!==null&&typeof this.dataset=="object"}get filteredTrades(){return this.trades.filter(e=>e.pair===this.pair)}mounted(){this.initializeChartOptions()}get chartTitle(){return`${this.strategy} - ${this.pair} - ${this.timeframe}`}initializeChartOptions(){this.chartOptions={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:this.useUTC,animation:!1,legend:{data:["Candles","Volume","Buy","Sell"],right:"1%"},tooltip:{show:!0,trigger:"axis",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(e,i,t,a,r){const n={top:60};return n[["left","right"][+(e[0]<r.viewSize[0]/2)]]=5,n}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:ri,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",bottom:10,start:80,end:100}]},console.log("Initialized"),this.updateChart(!0)}updateChart(e=!1){var w,P,O,I,L,k,l;if(!this.hasData)return;((w=this.chartOptions)==null?void 0:w.title)&&(this.chartOptions.title[0].text=this.chartTitle);const i=this.dataset.columns.findIndex(d=>d==="__date_ts"),t=this.dataset.columns.findIndex(d=>d==="open"),a=this.dataset.columns.findIndex(d=>d==="high"),r=this.dataset.columns.findIndex(d=>d==="low"),n=this.dataset.columns.findIndex(d=>d==="close"),o=this.dataset.columns.findIndex(d=>d==="volume"),s=this.dataset.columns.findIndex(d=>d==="_buy_signal_open"||d==="_buy_signal_close"||d==="_enter_long_signal_close"),u=this.dataset.columns.findIndex(d=>d==="_sell_signal_open"||d==="_sell_signal_close"||d==="_exit_long_signal_close"),c=this.dataset.enter_short_signals&&this.dataset.enter_short_signals>0&&this.dataset.exit_short_signals&&this.dataset.exit_short_signals>0,h=this.dataset.columns.findIndex(d=>d==="_enter_short_signal_close"),p=this.dataset.columns.findIndex(d=>d==="_exit_short_signal_close");console.log("short_exit",p);const f="subplots"in this.plotConfig?Object.keys(this.plotConfig.subplots).length+1:1;if(((P=this.chartOptions)==null?void 0:P.dataZoom)&&Array.isArray((O=this.chartOptions)==null?void 0:O.dataZoom))if(e){const d=(1-250/this.dataset.length)*100;this.chartOptions.dataZoom.forEach((v,x)=>{this.chartOptions&&this.chartOptions.dataZoom&&(this.chartOptions.dataZoom[x].start=d)})}else this.chartOptions.dataZoom.forEach((d,v)=>{this.chartOptions&&this.chartOptions.dataZoom&&(delete this.chartOptions.dataZoom[v].start,delete this.chartOptions.dataZoom[v].end)});const g={dataset:{source:this.dataset.data},grid:[{left:Yt,right:Kt,bottom:`${f*Ct+2}%`},{left:Yt,right:Kt,bottom:`${f*Ct}%`,height:`${Ct}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:qo,color0:Jo,borderColor:Xo,borderColor0:Qo},encode:{x:i,y:[t,n,r,a]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:i,y:o}},{name:"Buy",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:ts},encode:{x:i,y:s}},{name:"Sell",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:is},encode:{x:i,y:u}}]};if(c&&(!Array.isArray(this.chartOptions.legend)&&((I=this.chartOptions.legend)==null?void 0:I.data)&&(this.chartOptions.legend.data.push("Short"),this.chartOptions.legend.data.push("Short exit")),Array.isArray(g.series)&&(g.series.push({name:"Short",type:"scatter",symbol:"pin",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:es},encode:{x:i,y:h}}),g.series.push({name:"Short exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:as},encode:{x:i,y:p}}))),Object.assign(this.chartOptions,g),"main_plot"in this.plotConfig&&Object.entries(this.plotConfig.main_plot).forEach(([d,v])=>{var D;const x=this.dataset.columns.findIndex(T=>T===d);if(x>1){!Array.isArray(this.chartOptions.legend)&&((D=this.chartOptions.legend)==null?void 0:D.data)&&this.chartOptions.legend.data.push(d);const T={name:d,type:v.type||"line",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:v.color},encode:{x:i,y:x},showSymbol:!1};Array.isArray(this.chartOptions.series)&&this.chartOptions.series.push(T)}else console.log(`element ${d} for main plot not found in columns.`)}),"subplots"in this.plotConfig){let d=2;Object.entries(this.plotConfig.subplots).forEach(([v,x])=>{const D=d;Array.isArray(this.chartOptions.yAxis)&&this.chartOptions.yAxis.length<=d&&this.chartOptions.yAxis.push({scale:!0,gridIndex:D,name:v,nameLocation:"middle",nameGap:ri,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(this.chartOptions.xAxis)&&this.chartOptions.xAxis.length<=d&&this.chartOptions.xAxis.push({type:"time",scale:!0,gridIndex:D,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(this.chartOptions.dataZoom)&&this.chartOptions.dataZoom.forEach(T=>T.xAxisIndex&&Array.isArray(T.xAxisIndex)?T.xAxisIndex.push(d):null),this.chartOptions.grid&&Array.isArray(this.chartOptions.grid)&&this.chartOptions.grid.push({left:Yt,right:Kt,bottom:`${(f-d+1)*Ct}%`,height:`${Ct}%`}),Object.entries(x).forEach(([T,W])=>{var E;const rt=this.dataset.columns.findIndex(M=>M===T);if(rt>0){!Array.isArray(this.chartOptions.legend)&&((E=this.chartOptions.legend)==null?void 0:E.data)&&this.chartOptions.legend.data.push(T);const M={name:T,type:W.type||"line",xAxisIndex:d,yAxisIndex:d,itemStyle:{color:W.color||Dt()},encode:{x:i,y:rt},showSymbol:!1};this.chartOptions.series&&Array.isArray(this.chartOptions.series)&&this.chartOptions.series.push(M)}else console.log(`element ${T} was not found in the columns.`)}),d+=1})}this.chartOptions.grid&&Array.isArray(this.chartOptions.grid)&&(this.chartOptions.grid[this.chartOptions.grid.length-1].bottom="50px",delete this.chartOptions.grid[this.chartOptions.grid.length-1].top);const{trades:m,tradesClose:b}=this.getTradeEntries(),_="Trades",y="Trades Close";!Array.isArray(this.chartOptions.legend)&&((L=this.chartOptions.legend)==null?void 0:L.data)&&this.chartOptions.legend.data.push(_);const S={name:_,type:"scatter",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:rs},data:m};Array.isArray((k=this.chartOptions)==null?void 0:k.series)&&this.chartOptions.series.push(S),!Array.isArray(this.chartOptions.legend)&&((l=this.chartOptions.legend)==null?void 0:l.data)&&this.chartOptions.legend.data.push(y);const C={name:y,type:"scatter",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:ns},data:b};this.chartOptions.series&&Array.isArray(this.chartOptions.series)&&this.chartOptions.series.push(C),console.log("chartOptions",this.chartOptions),this.$refs.candleChart.setOption(this.chartOptions)}getTradeEntries(){const e=[],i=[];for(let t=0,a=this.filteredTrades.length;t<a;t+=1){const r=this.filteredTrades[t];r.open_timestamp>=this.dataset.data_start_ts&&r.open_timestamp<=this.dataset.data_stop_ts&&e.push([ai(this.timeframems,r.open_timestamp),r.open_rate]),r.close_timestamp!==void 0&&r.close_timestamp<this.dataset.data_stop_ts&&r.close_timestamp>this.dataset.data_start_ts&&r.close_date!==void 0&&r.close_rate!==void 0&&i.push([ai(this.timeframems,r.close_timestamp),r.close_rate])}return{trades:e,tradesClose:i}}useUTCChanged(){this.initializeChartOptions()}};it([$({required:!1,default:[]})],K.prototype,"trades",2);it([$({required:!0})],K.prototype,"dataset",2);it([$({default:!0})],K.prototype,"useUTC",2);it([$({required:!0})],K.prototype,"plotConfig",2);it([$({default:"dark"})],K.prototype,"theme",2);it([lt("dataset")],K.prototype,"datasetChanged",1);it([lt("plotConfig")],K.prototype,"plotConfigChanged",1);it([lt("useUTC")],K.prototype,"useUTCChanged",1);K=it([Lt({components:{"v-chart":hr}})],K);var Gi=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"row flex-grow-1 chart-wrapper"},[e.hasData?t("v-chart",{ref:"candleChart",attrs:{theme:e.theme,autoresize:"","manual-update":""}}):e._e()],1)},os=[];Gi._withStripped=!0;const ni={};var ji=kt(K,Gi,os,!1,ss,"208b2ef2",null,null);function ss(e){for(let i in ni)this[i]=ni[i]}ji.options.__file="src/components/charts/CandleChart.vue";var ls=function(){return ji.exports}(),us=Object.defineProperty,cs=Object.getOwnPropertyDescriptor,dt=(e,i,t,a)=>{for(var r=a>1?void 0:a?cs(i,t):i,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(a?o(i,t,r):o(r))||r);return a&&r&&us(i,t,r),r};let et=class extends Mt{constructor(){super(...arguments);this.selColor=Dt(),this.graphType=Et.line,this.availableGraphTypes=Object.keys(Et),this.selAvailableIndicator="",this.cancelled=!1}emitIndicator(){return this.combinedIndicator}watchValue(){[this.selAvailableIndicator]=Object.keys(this.value),this.cancelled=!1,this.selAvailableIndicator&&this.value&&(this.selColor=this.value[this.selAvailableIndicator].color||Dt(),this.graphType=this.value[this.selAvailableIndicator].type||Et.line)}watchColor(){this.addNew||this.emitIndicator()}clickCancel(){this.cancelled=!0,this.emitIndicator()}get combinedIndicator(){return this.cancelled||!this.selAvailableIndicator?{}:{[this.selAvailableIndicator]:{color:this.selColor,type:this.graphType}}}newColor(){this.selColor=Dt()}};dt([$({required:!0})],et.prototype,"value",2);dt([$({required:!0})],et.prototype,"columns",2);dt([$({required:!0})],et.prototype,"addNew",2);dt([ui("input")],et.prototype,"emitIndicator",1);dt([lt("value")],et.prototype,"watchValue",1);dt([lt("selColor")],et.prototype,"watchColor",1);et=dt([Lt({})],et);var Zi=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[e.addNew?t("div",[t("b-form-group",{attrs:{label:"Add indicator","label-for":"indicatorSelector"}},[t("b-form-select",{attrs:{id:"indicatorSelector",options:e.columns,"select-size":4},model:{value:e.selAvailableIndicator,callback:function(a){e.selAvailableIndicator=a},expression:"selAvailableIndicator"}})],1)],1):e._e(),t("b-form-group",{attrs:{label:"Type","label-for":"plotTypeSelector"}},[t("b-form-select",{attrs:{id:"plotTypeSelector",size:"sm",options:e.availableGraphTypes},on:{change:function(a){return e.emitIndicator()}},model:{value:e.graphType,callback:function(a){e.graphType=a},expression:"graphType"}})],1),t("hr"),t("b-form-group",{attrs:{label:"Color","label-for":"colsel",size:"sm"}},[t("b-input-group",[t("b-input-group-prepend",[t("div",{staticClass:"colorbox mr-2",style:{"background-color":e.selColor}})]),t("b-form-input",{attrs:{id:"colsel",size:"sm"},model:{value:e.selColor,callback:function(a){e.selColor=a},expression:"selColor"}}),t("b-input-group-append",[t("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:e.newColor}},[e._v("\u21BB")])],1)],1)],1),t("div",{staticClass:"d-flex d-flex-columns"},[e.addNew?t("b-button",{staticClass:"flex-grow-1",attrs:{variant:"primary",title:"Add ",size:"sm"},on:{click:e.emitIndicator}},[e._v(" Save indicator ")]):e._e(),e.addNew?t("b-button",{staticClass:"ml-1 flex-grow-1",attrs:{variant:"primary",title:"Add ",size:"sm"},on:{click:e.clickCancel}},[e._v(" Cancel ")]):e._e()],1)],1)},hs=[];Zi._withStripped=!0;const oi={};var Ui=kt(et,Zi,hs,!1,ps,"a6bfa838",null,null);function ps(e){for(let i in oi)this[i]=oi[i]}Ui.options.__file="src/components/charts/PlotIndicator.vue";var ds=function(){return Ui.exports}(),fs=Object.defineProperty,gs=Object.getOwnPropertyDescriptor,j=(e,i,t,a)=>{for(var r=a>1?void 0:a?gs(i,t):i,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(a?o(i,t,r):o(r))||r);return a&&r&&fs(i,t,r),r},Hi,Yi,Ki;const At=Bt(Nt.ftbot),vs=Bt(Nt.alerts);let V=class extends Mt{constructor(){super(...arguments);this.plotConfig=qt,this.plotOptions=[{text:"Main Plot",value:"main_plot"},{text:"Subplots",value:"subplots"}],this.plotConfigNameLoc="default",this.newSubplotName="",this.selAvailableIndicator="",this.selIndicatorName="",this.addNewIndicator=!1,this.showConfig=!1,this.selSubPlot="main_plot",this.tempPlotConfig=void 0,this.tempPlotConfigValid=!0}emitPlotConfig(){return this.plotConfig}get selIndicator(){return this.addNewIndicator?{}:this.selIndicatorName?{[this.selIndicatorName]:this.currentPlotConfig[this.selIndicatorName]}:{}}set selIndicator(e){Object.keys(e)[0]&&e?this.addIndicator(e):this.addNewIndicator=!1}get plotConfigJson(){return JSON.stringify(this.plotConfig,null,2)}set plotConfigJson(e){try{this.tempPlotConfig=JSON.parse(e),this.tempPlotConfigValid=!0}catch{this.tempPlotConfigValid=!1}}get subplots(){return["main_plot",...Object.keys(this.plotConfig.subplots)]}get usedColumns(){return this.isMainPlot?Object.keys(this.plotConfig.main_plot):this.selSubPlot in this.plotConfig.subplots?Object.keys(this.plotConfig.subplots[this.selSubPlot]):[]}get isMainPlot(){return this.selSubPlot==="main_plot"}get currentPlotConfig(){return this.isMainPlot?this.plotConfig.main_plot:this.plotConfig.subplots[this.selSubPlot]}mounted(){console.log("Config Mounted",this.value),this.plotConfig=this.value,this.plotConfigNameLoc=this.plotConfigName}watchValue(){this.plotConfig=this.value,this.plotConfigNameLoc=this.plotConfigName}addIndicator(e){console.log(this.plotConfig);const{plotConfig:i}=this,t=Object.keys(e)[0],a=e[t];this.isMainPlot?(console.log(`Adding ${t} to MainPlot`),i.main_plot[t]=J({},a)):(console.log(`Adding ${t} to ${this.selSubPlot}`),i.subplots[this.selSubPlot][t]=J({},a)),this.plotConfig=J({},i),this.addNewIndicator=!1,this.emitPlotConfig()}removeIndicator(){console.log(this.plotConfig);const{plotConfig:e}=this;this.isMainPlot?(console.log(`Removing ${this.selIndicatorName} from MainPlot`),delete e.main_plot[this.selIndicatorName]):(console.log(`Removing ${this.selIndicatorName} from ${this.selSubPlot}`),delete e.subplots[this.selSubPlot][this.selIndicatorName]),this.plotConfig=J({},e),console.log(this.plotConfig),this.selIndicatorName="",this.emitPlotConfig()}addSubplot(){this.plotConfig.subplots=we(J({},this.plotConfig.subplots),{[this.newSubplotName]:{}}),this.selSubPlot=this.newSubplotName,this.newSubplotName="",console.log(this.plotConfig),this.emitPlotConfig()}delSubplot(){delete this.plotConfig.subplots[this.selSubPlot],this.plotConfig.subplots=J({},this.plotConfig.subplots),this.selSubPlot=""}savePlotConfig(){this.saveCustomPlotConfig({[this.plotConfigNameLoc]:this.plotConfig})}loadPlotConfig(){this.plotConfig=Xt(this.plotConfigNameLoc),console.log(this.plotConfig),console.log("loading config"),this.emitPlotConfig()}loadConfigFromString(){this.tempPlotConfig!==void 0&&this.tempPlotConfigValid&&(this.plotConfig=this.tempPlotConfig,this.emitPlotConfig())}resetConfig(){this.plotConfig=J({},qt)}async loadPlotConfigFromStrategy(){try{await this.getStrategyPlotConfig(),this.plotConfig=this.strategyPlotConfig,this.emitPlotConfig()}catch{this.addAlert({message:"Failed to load Plot configuration from Strategy."})}}};Hi=tt.strategyPlotConfig,Yi=tt.plotConfigName,Ki=va.addAlert;j([$({required:!0})],V.prototype,"value",2);j([$({required:!0})],V.prototype,"columns",2);j([$({required:!1,default:!0})],V.prototype,"asModal",2);j([ui("input")],V.prototype,"emitPlotConfig",1);j([At.Action],V.prototype,"getStrategyPlotConfig",2);j([At.Getter],V.prototype,Hi,2);j([At.Action],V.prototype,"saveCustomPlotConfig",2);j([At.Action],V.prototype,"updatePlotConfigName",2);j([At.Getter],V.prototype,Yi,2);j([vs.Action],V.prototype,Ki,2);j([lt("value")],V.prototype,"watchValue",1);V=j([Lt({components:{PlotIndicator:ds}})],V);var qi=function(){var e=this,i=e.$createElement,t=e._self._c||i;return e.columns?t("div",[t("b-form-group",{attrs:{label:"Plot config name","label-for":"idPlotConfigName"}},[t("b-form-input",{attrs:{id:"idPlotConfigName",size:"sm"},model:{value:e.plotConfigNameLoc,callback:function(a){e.plotConfigNameLoc=a},expression:"plotConfigNameLoc"}})],1),t("div",{staticClass:"col-mb-3"},[t("hr"),t("b-form-group",{attrs:{label:"Target","label-for":"FieldSel"}},[t("b-form-select",{attrs:{id:"FieldSel",options:e.subplots,"select-size":3},model:{value:e.selSubPlot,callback:function(a){e.selSubPlot=a},expression:"selSubPlot"}})],1)],1),t("b-form-group",{attrs:{label:"Add new plot","label-for":"newSubPlot"}},[t("b-input-group",{attrs:{size:"sm"}},[t("b-form-input",{staticClass:"addPlot",attrs:{id:"newSubPlot"},model:{value:e.newSubplotName,callback:function(a){e.newSubplotName=a},expression:"newSubplotName"}}),t("b-input-group-append",[t("b-button",{attrs:{disabled:!e.newSubplotName},on:{click:e.addSubplot}},[e._v("+")]),e.selSubPlot&&e.selSubPlot!="main_plot"?t("b-button",{on:{click:e.delSubplot}},[e._v("-")]):e._e()],1)],1)],1),t("hr"),t("div",[t("b-form-group",{attrs:{label:"Used indicators","label-for":"selectedIndicators"}},[t("b-form-select",{attrs:{id:"selectedIndicators",options:e.usedColumns,"select-size":4},model:{value:e.selIndicatorName,callback:function(a){e.selIndicatorName=a},expression:"selIndicatorName"}})],1)],1),t("div",[t("b-button",{attrs:{variant:"primary",title:"Add indicator to plot",size:"sm",disabled:e.addNewIndicator},on:{click:function(a){e.addNewIndicator=!e.addNewIndicator}}},[e._v(" Add new indicator ")]),t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",title:"Remove indicator to plot",size:"sm",disabled:!e.selIndicatorName},on:{click:e.removeIndicator}},[e._v(" Remove indicator ")])],1),e.selIndicatorName||e.addNewIndicator?t("PlotIndicator",{staticClass:"mt-1",attrs:{columns:e.columns,"add-new":e.addNewIndicator},model:{value:e.selIndicator,callback:function(a){e.selIndicator=a},expression:"selIndicator"}}):e._e(),t("hr"),t("div",[t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm"},on:{click:e.loadPlotConfig}},[e._v("Load")]),t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm"},on:{click:e.loadPlotConfigFromStrategy}},[e._v(" From strategy ")]),t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm","data-toggle":"tooltip",title:"Save configuration"},on:{click:e.savePlotConfig}},[e._v("Save")]),t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm",title:"Load configuration from text box below"},on:{click:e.resetConfig}},[e._v("Reset")]),t("b-button",{staticClass:"ml-1",attrs:{id:"showButton",variant:"primary",size:"sm",title:"Show configuration for easy transfer to a strategy"},on:{click:function(a){e.showConfig=!e.showConfig}}},[e._v("Show")]),e.showConfig?t("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm",title:"Load configuration from text box below"},on:{click:e.loadConfigFromString}},[e._v("Load from String")]):e._e()],1),e.showConfig?t("div",{staticClass:"col-mb-5 ml-1 mt-2"},[t("b-textarea",{staticClass:"textArea",attrs:{id:"TextArea",size:"sm",state:e.tempPlotConfigValid},model:{value:e.plotConfigJson,callback:function(a){e.plotConfigJson=a},expression:"plotConfigJson"}})],1):e._e()],1):e._e()},ms=[];qi._withStripped=!0;const si={};var Xi=kt(V,qi,ms,!1,ys,"c7638920",null,null);function ys(e){for(let i in si)this[i]=si[i]}Xi.options.__file="src/components/charts/PlotConfigurator.vue";var bs=function(){return Xi.exports}(),Ji={exports:{}};(function(e,i){(function(t,a){e.exports=a()})(typeof self!="undefined"?self:da,function(){return(()=>{var t={646:o=>{o.exports=function(s){if(Array.isArray(s)){for(var u=0,c=new Array(s.length);u<s.length;u++)c[u]=s[u];return c}}},713:o=>{o.exports=function(s,u,c){return u in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,s}},860:o=>{o.exports=function(s){if(Symbol.iterator in Object(s)||Object.prototype.toString.call(s)==="[object Arguments]")return Array.from(s)}},206:o=>{o.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},319:(o,s,u)=>{var c=u(646),h=u(860),p=u(206);o.exports=function(f){return c(f)||h(f)||p()}},8:o=>{function s(u){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o.exports=s=function(c){return typeof c}:o.exports=s=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},s(u)}o.exports=s}},a={};function r(o){var s=a[o];if(s!==void 0)return s.exports;var u=a[o]={exports:{}};return t[o](u,u.exports,r),u.exports}r.n=o=>{var s=o&&o.__esModule?()=>o.default:()=>o;return r.d(s,{a:s}),s},r.d=(o,s)=>{for(var u in s)r.o(s,u)&&!r.o(o,u)&&Object.defineProperty(o,u,{enumerable:!0,get:s[u]})},r.o=(o,s)=>Object.prototype.hasOwnProperty.call(o,s),r.r=o=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var n={};return(()=>{r.r(n),r.d(n,{VueSelect:()=>I,default:()=>k,mixins:()=>L});var o=r(319),s=r.n(o),u=r(8),c=r.n(u),h=r(713),p=r.n(h);const f={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer:function(){this.autoscroll&&this.maybeAdjustScroll()},open:function(l){var d=this;this.autoscroll&&l&&this.$nextTick(function(){return d.maybeAdjustScroll()})}},methods:{maybeAdjustScroll:function(){var l,d=((l=this.$refs.dropdownMenu)===null||l===void 0?void 0:l.children[this.typeAheadPointer])||!1;if(d){var v=this.getDropdownViewport(),x=d.getBoundingClientRect(),D=x.top,T=x.bottom,W=x.height;if(D<v.top)return this.$refs.dropdownMenu.scrollTop=d.offsetTop;if(T>v.bottom)return this.$refs.dropdownMenu.scrollTop=d.offsetTop-(v.height-W)}},getDropdownViewport:function(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},g={data:function(){return{typeAheadPointer:-1}},watch:{filteredOptions:function(){for(var l=0;l<this.filteredOptions.length;l++)if(this.selectable(this.filteredOptions[l])){this.typeAheadPointer=l;break}},open:function(l){l&&this.typeAheadToLastSelected()},selectedValue:function(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp:function(){for(var l=this.typeAheadPointer-1;l>=0;l--)if(this.selectable(this.filteredOptions[l])){this.typeAheadPointer=l;break}},typeAheadDown:function(){for(var l=this.typeAheadPointer+1;l<this.filteredOptions.length;l++)if(this.selectable(this.filteredOptions[l])){this.typeAheadPointer=l;break}},typeAheadSelect:function(){var l=this.filteredOptions[this.typeAheadPointer];l&&this.selectable(l)&&this.select(l)},typeAheadToLastSelected:function(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},m={props:{loading:{type:Boolean,default:!1}},data:function(){return{mutableLoading:!1}},watch:{search:function(){this.$emit("search",this.search,this.toggleLoading)},loading:function(l){this.mutableLoading=l}},methods:{toggleLoading:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.mutableLoading=l==null?!this.mutableLoading:l}}};function b(l,d,v,x,D,T,W,rt){var E,M=typeof l=="function"?l.options:l;if(d&&(M.render=d,M.staticRenderFns=v,M._compiled=!0),x&&(M.functional=!0),T&&(M._scopeId="data-v-"+T),W?(E=function(R){(R=R||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||typeof __VUE_SSR_CONTEXT__=="undefined"||(R=__VUE_SSR_CONTEXT__),D&&D.call(this,R),R&&R._registeredComponents&&R._registeredComponents.add(W)},M._ssrRegister=E):D&&(E=rt?function(){D.call(this,(M.functional?this.parent:this).$root.$options.shadowRoot)}:D),E)if(M.functional){M._injectStyles=E;var Z=M.render;M.render=function(R,q){return E.call(q),Z(R,q)}}else{var U=M.beforeCreate;M.beforeCreate=U?[].concat(U,E):[E]}return{exports:l,options:M}}const _={Deselect:b({},function(){var l=this.$createElement,d=this._self._c||l;return d("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"}},[d("path",{attrs:{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"}})])},[],!1,null,null,null).exports,OpenIndicator:b({},function(){var l=this.$createElement,d=this._self._c||l;return d("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"}},[d("path",{attrs:{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"}})])},[],!1,null,null,null).exports},y={inserted:function(l,d,v){var x=v.context;if(x.appendToBody){var D=x.$refs.toggle.getBoundingClientRect(),T=D.height,W=D.top,rt=D.left,E=D.width,M=window.scrollX||window.pageXOffset,Z=window.scrollY||window.pageYOffset;l.unbindPosition=x.calculatePosition(l,x,{width:E+"px",left:M+rt+"px",top:Z+W+T+"px"}),document.body.appendChild(l)}},unbind:function(l,d,v){v.context.appendToBody&&(l.unbindPosition&&typeof l.unbindPosition=="function"&&l.unbindPosition(),l.parentNode&&l.parentNode.removeChild(l))}},S=function(l){var d={};return Object.keys(l).sort().forEach(function(v){d[v]=l[v]}),JSON.stringify(d)};var C=0;const w=function(){return++C};function P(l,d){var v=Object.keys(l);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);d&&(x=x.filter(function(D){return Object.getOwnPropertyDescriptor(l,D).enumerable})),v.push.apply(v,x)}return v}function O(l){for(var d=1;d<arguments.length;d++){var v=arguments[d]!=null?arguments[d]:{};d%2?P(Object(v),!0).forEach(function(x){p()(l,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(v)):P(Object(v)).forEach(function(x){Object.defineProperty(l,x,Object.getOwnPropertyDescriptor(v,x))})}return l}const I=b({components:O({},_),directives:{appendToBody:y},mixins:[f,g,m],props:{value:{},components:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:function(l){return l}},selectable:{type:Function,default:function(l){return!0}},getOptionLabel:{type:Function,default:function(l){return c()(l)==="object"?l.hasOwnProperty(this.label)?l[this.label]:console.warn('[vue-select warn]: Label key "option.'.concat(this.label,'" does not')+" exist in options object ".concat(JSON.stringify(l),`.
`)+"https://vue-select.org/api/props.html#getoptionlabel"):l}},getOptionKey:{type:Function,default:function(l){if(c()(l)!=="object")return l;try{return l.hasOwnProperty("id")?l.id:S(l)}catch(d){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,l,d)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default:function(l,d,v){return(d||"").toLocaleLowerCase().indexOf(v.toLocaleLowerCase())>-1}},filter:{type:Function,default:function(l,d){var v=this;return l.filter(function(x){var D=v.getOptionLabel(x);return typeof D=="number"&&(D=D.toString()),v.filterBy(x,D,d)})}},createOption:{type:Function,default:function(l){return c()(this.optionList[0])==="object"?p()({},this.label,l):l}},resetOnOptionsChange:{default:!1,validator:function(l){return["function","boolean"].includes(c()(l))}},clearSearchOnBlur:{type:Function,default:function(l){var d=l.clearSearchOnSelect,v=l.multiple;return d&&!v}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:function(){return[13]}},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:function(l,d){return l}},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default:function(l,d,v){var x=v.width,D=v.top,T=v.left;l.style.top=D,l.style.left=T,l.style.width=x}},dropdownShouldOpen:{type:Function,default:function(l){var d=l.noDrop,v=l.open,x=l.mutableLoading;return!d&&v&&!x}},uid:{type:[String,Number],default:function(){return w()}}},data:function(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[]}},computed:{isTrackingValues:function(){return this.value===void 0||this.$options.propsData.hasOwnProperty("reduce")},selectedValue:function(){var l=this.value;return this.isTrackingValues&&(l=this.$data._value),l!=null&&l!==""?[].concat(l):[]},optionList:function(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl:function(){return this.$scopedSlots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope:function(){var l=this,d={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:O({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":"vs".concat(this.uid,"__combobox"),"aria-controls":"vs".concat(this.uid,"__listbox"),ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":"vs".concat(this.uid,"__option-").concat(this.typeAheadPointer)}:{}),events:{compositionstart:function(){return l.isComposing=!0},compositionend:function(){return l.isComposing=!1},keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:function(v){return l.search=v.target.value}}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:d,listFooter:d,header:O({},d,{deselect:this.deselect}),footer:O({},d,{deselect:this.deselect})}},childComponents:function(){return O({},_,{},this.components)},stateClasses:function(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching:function(){return!!this.search},dropdownOpen:function(){return this.dropdownShouldOpen(this)},searchPlaceholder:function(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions:function(){var l=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return l;var d=this.search.length?this.filter(l,this.search,this):l;if(this.taggable&&this.search.length){var v=this.createOption(this.search);this.optionExists(v)||d.unshift(v)}return d},isValueEmpty:function(){return this.selectedValue.length===0},showClearButton:function(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options:function(l,d){var v=this;!this.taggable&&(typeof v.resetOnOptionsChange=="function"?v.resetOnOptionsChange(l,d,v.selectedValue):v.resetOnOptionsChange)&&this.clearSelection(),this.value&&this.isTrackingValues&&this.setInternalValueFromOptions(this.value)},value:{immediate:!0,handler:function(l){this.isTrackingValues&&this.setInternalValueFromOptions(l)}},multiple:function(){this.clearSelection()},open:function(l){this.$emit(l?"open":"close")}},created:function(){this.mutableLoading=this.loading,this.$on("option:created",this.pushTag)},methods:{setInternalValueFromOptions:function(l){var d=this;Array.isArray(l)?this.$data._value=l.map(function(v){return d.findOptionFromReducedValue(v)}):this.$data._value=this.findOptionFromReducedValue(l)},select:function(l){this.$emit("option:selecting",l),this.isOptionSelected(l)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(l):(this.taggable&&!this.optionExists(l)&&this.$emit("option:created",l),this.multiple&&(l=this.selectedValue.concat(l)),this.updateValue(l),this.$emit("option:selected",l)),this.onAfterSelect(l)},deselect:function(l){var d=this;this.$emit("option:deselecting",l),this.updateValue(this.selectedValue.filter(function(v){return!d.optionComparator(v,l)})),this.$emit("option:deselected",l)},clearSelection:function(){this.updateValue(this.multiple?[]:null)},onAfterSelect:function(l){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue:function(l){var d=this;this.value===void 0&&(this.$data._value=l),l!==null&&(l=Array.isArray(l)?l.map(function(v){return d.reduce(v)}):this.reduce(l)),this.$emit("input",l)},toggleDropdown:function(l){var d=l.target!==this.searchEl;d&&l.preventDefault();var v=[].concat(s()(this.$refs.deselectButtons||[]),s()([this.$refs.clearButton]));this.searchEl===void 0||v.filter(Boolean).some(function(x){return x.contains(l.target)||x===l.target})?l.preventDefault():this.open&&d?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected:function(l){var d=this;return this.selectedValue.some(function(v){return d.optionComparator(v,l)})},isOptionDeselectable:function(l){return this.isOptionSelected(l)&&this.deselectFromDropdown},optionComparator:function(l,d){return this.getOptionKey(l)===this.getOptionKey(d)},findOptionFromReducedValue:function(l){var d=this,v=[].concat(s()(this.options),s()(this.pushedTags)).filter(function(x){return JSON.stringify(d.reduce(x))===JSON.stringify(l)});return v.length===1?v[0]:v.find(function(x){return d.optionComparator(x,d.$data._value)})||l},closeSearchOptions:function(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue:function(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){var l=null;this.multiple&&(l=s()(this.selectedValue.slice(0,this.selectedValue.length-1))),this.updateValue(l)}},optionExists:function(l){var d=this;return this.optionList.some(function(v){return d.optionComparator(v,l)})},normalizeOptionForSlot:function(l){return c()(l)==="object"?l:p()({},this.label,l)},pushTag:function(l){this.pushedTags.push(l)},onEscape:function(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur:function(){if(!this.mousedown||this.searching){var l=this.clearSearchOnSelect,d=this.multiple;return this.clearSearchOnBlur({clearSearchOnSelect:l,multiple:d})&&(this.search=""),void this.closeSearchOptions()}this.mousedown=!1,this.search.length!==0||this.options.length!==0||this.closeSearchOptions()},onSearchFocus:function(){this.open=!0,this.$emit("search:focus")},onMousedown:function(){this.mousedown=!0},onMouseUp:function(){this.mousedown=!1},onSearchKeyDown:function(l){var d=this,v=function(T){return T.preventDefault(),!d.isComposing&&d.typeAheadSelect()},x={8:function(T){return d.maybeDeleteValue()},9:function(T){return d.onTab()},27:function(T){return d.onEscape()},38:function(T){return T.preventDefault(),d.typeAheadUp()},40:function(T){return T.preventDefault(),d.typeAheadDown()}};this.selectOnKeyCodes.forEach(function(T){return x[T]=v});var D=this.mapKeydown(x,this);if(typeof D[l.keyCode]=="function")return D[l.keyCode](l)}}},function(){var l=this,d=l.$createElement,v=l._self._c||d;return v("div",{staticClass:"v-select",class:l.stateClasses,attrs:{dir:l.dir}},[l._t("header",null,null,l.scope.header),l._v(" "),v("div",{ref:"toggle",staticClass:"vs__dropdown-toggle",attrs:{id:"vs"+l.uid+"__combobox",role:"combobox","aria-expanded":l.dropdownOpen.toString(),"aria-owns":"vs"+l.uid+"__listbox","aria-label":"Search for option"},on:{mousedown:function(x){return l.toggleDropdown(x)}}},[v("div",{ref:"selectedOptions",staticClass:"vs__selected-options"},[l._l(l.selectedValue,function(x){return l._t("selected-option-container",[v("span",{key:l.getOptionKey(x),staticClass:"vs__selected"},[l._t("selected-option",[l._v(`
            `+l._s(l.getOptionLabel(x))+`
          `)],null,l.normalizeOptionForSlot(x)),l._v(" "),l.multiple?v("button",{ref:"deselectButtons",refInFor:!0,staticClass:"vs__deselect",attrs:{disabled:l.disabled,type:"button",title:"Deselect "+l.getOptionLabel(x),"aria-label":"Deselect "+l.getOptionLabel(x)},on:{click:function(D){return l.deselect(x)}}},[v(l.childComponents.Deselect,{tag:"component"})],1):l._e()],2)],{option:l.normalizeOptionForSlot(x),deselect:l.deselect,multiple:l.multiple,disabled:l.disabled})}),l._v(" "),l._t("search",[v("input",l._g(l._b({staticClass:"vs__search"},"input",l.scope.search.attributes,!1),l.scope.search.events))],null,l.scope.search)],2),l._v(" "),v("div",{ref:"actions",staticClass:"vs__actions"},[v("button",{directives:[{name:"show",rawName:"v-show",value:l.showClearButton,expression:"showClearButton"}],ref:"clearButton",staticClass:"vs__clear",attrs:{disabled:l.disabled,type:"button",title:"Clear Selected","aria-label":"Clear Selected"},on:{click:l.clearSelection}},[v(l.childComponents.Deselect,{tag:"component"})],1),l._v(" "),l._t("open-indicator",[l.noDrop?l._e():v(l.childComponents.OpenIndicator,l._b({tag:"component"},"component",l.scope.openIndicator.attributes,!1))],null,l.scope.openIndicator),l._v(" "),l._t("spinner",[v("div",{directives:[{name:"show",rawName:"v-show",value:l.mutableLoading,expression:"mutableLoading"}],staticClass:"vs__spinner"},[l._v("Loading...")])],null,l.scope.spinner)],2)]),l._v(" "),v("transition",{attrs:{name:l.transition}},[l.dropdownOpen?v("ul",{directives:[{name:"append-to-body",rawName:"v-append-to-body"}],key:"vs"+l.uid+"__listbox",ref:"dropdownMenu",staticClass:"vs__dropdown-menu",attrs:{id:"vs"+l.uid+"__listbox",role:"listbox",tabindex:"-1"},on:{mousedown:function(x){return x.preventDefault(),l.onMousedown(x)},mouseup:l.onMouseUp}},[l._t("list-header",null,null,l.scope.listHeader),l._v(" "),l._l(l.filteredOptions,function(x,D){return v("li",{key:l.getOptionKey(x),staticClass:"vs__dropdown-option",class:{"vs__dropdown-option--deselect":l.isOptionDeselectable(x)&&D===l.typeAheadPointer,"vs__dropdown-option--selected":l.isOptionSelected(x),"vs__dropdown-option--highlight":D===l.typeAheadPointer,"vs__dropdown-option--disabled":!l.selectable(x)},attrs:{id:"vs"+l.uid+"__option-"+D,role:"option","aria-selected":D===l.typeAheadPointer||null},on:{mouseover:function(T){l.selectable(x)&&(l.typeAheadPointer=D)},click:function(T){T.preventDefault(),T.stopPropagation(),l.selectable(x)&&l.select(x)}}},[l._t("option",[l._v(`
          `+l._s(l.getOptionLabel(x))+`
        `)],null,l.normalizeOptionForSlot(x))],2)}),l._v(" "),l.filteredOptions.length===0?v("li",{staticClass:"vs__no-options"},[l._t("no-options",[l._v(`
          Sorry, no matching options.
        `)],null,l.scope.noOptions)],2):l._e(),l._v(" "),l._t("list-footer",null,null,l.scope.listFooter)],2):v("ul",{staticStyle:{display:"none",visibility:"hidden"},attrs:{id:"vs"+l.uid+"__listbox",role:"listbox"}})]),l._v(" "),l._t("footer",null,null,l.scope.footer)],2)},[],!1,null,null,null).exports,L={ajax:m,pointer:g,pointerScroll:f},k=I})(),n})()})})(Ji);var _s=fa(Ji.exports),Cs=Object.defineProperty,xs=Object.getOwnPropertyDescriptor,z=(e,i,t,a)=>{for(var r=a>1?void 0:a?xs(i,t):i,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(a?o(i,t,r):o(r))||r);return a&&r&&Cs(i,t,r),r},Qi,ta,ea,ia,aa,ra,na;const at=Bt(Nt.ftbot),Ss=Bt(Nt.uiSettings);let N=class extends Mt{constructor(){super(...arguments);this.pair="",this.plotConfig=J({},qt),this.plotConfigName="",this.showPlotConfig=this.plotConfigModal}get dataset(){return this.historicView?this.history[`${this.pair}__${this.timeframe}`]:this.candleData[`${this.pair}__${this.timeframe}`]}get strategyName(){var e;return this.strategy||((e=this.dataset)==null?void 0:e.strategy)||""}get datasetColumns(){return this.dataset?this.dataset.columns:[]}get isLoadingDataset(){return this.historicView?this.historyStatus==="loading":this.candleDataStatus==="loading"}get noDatasetText(){switch(this.historicView?this.historyStatus:this.candleDataStatus){case"loading":return"Loading...";case"success":return"No data available";case"error":return"Failed to load data";default:return"Unknown"}}get hasDataset(){return!!this.dataset}mounted(){this.selectedPair?this.pair=this.selectedPair:this.availablePairs.length>0&&([this.pair]=this.availablePairs),this.plotConfigName=ma(),this.plotConfig=Xt(this.plotConfigName),this.hasDataset||this.refresh()}plotConfigChanged(){console.log("plotConfigChanged"),this.plotConfig=Xt(this.plotConfigName),this.setPlotConfigName(this.plotConfigName)}showConfigurator(){this.plotConfigModal?this.$bvModal.show("plotConfiguratorModal"):this.showPlotConfig=!this.showPlotConfig}refresh(){this.pair&&this.timeframe&&(this.historicView?this.getPairHistory({pair:this.pair,timeframe:this.timeframe,timerange:this.timerange,strategy:this.strategy}):this.getPairCandles({pair:this.pair,timeframe:this.timeframe,limit:500}))}watchAvailablePairs(){this.availablePairs.find(e=>e===this.pair)||([this.pair]=this.availablePairs,this.refresh())}watchSelectedPair(){this.pair=this.selectedPair,this.refresh()}};Qi=tt.availablePlotConfigNames,ta=tt.candleDataStatus,ea=tt.candleData,ia=tt.historyStatus,aa=tt.history,ra=tt.selectedPair,na=ya.timezone;z([$({required:!0})],N.prototype,"availablePairs",2);z([$({required:!0})],N.prototype,"timeframe",2);z([$({required:!1,default:()=>[]})],N.prototype,"trades",2);z([$({required:!1,default:!1})],N.prototype,"historicView",2);z([$({required:!1,default:!0})],N.prototype,"plotConfigModal",2);z([$({required:!1,default:!1})],N.prototype,"timerange",2);z([$({required:!1,default:!1})],N.prototype,"strategy",2);z([ga],N.prototype,"getChartTheme",2);z([at.Getter],N.prototype,Qi,2);z([at.Action],N.prototype,"setPlotConfigName",2);z([at.Getter],N.prototype,ta,2);z([at.Getter],N.prototype,ea,2);z([at.Getter],N.prototype,ia,2);z([at.Getter],N.prototype,aa,2);z([at.Getter],N.prototype,ra,2);z([at.Action],N.prototype,"getPairCandles",2);z([at.Action],N.prototype,"getPairHistory",2);z([Ss.Getter],N.prototype,na,2);z([lt("availablePairs")],N.prototype,"watchAvailablePairs",1);z([lt(tt.selectedPair)],N.prototype,"watchSelectedPair",1);N=z([Lt({components:{CandleChart:ls,PlotConfigurator:bs,vSelect:_s}})],N);var oa=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"d-flex h-100"},[t("div",{staticClass:"flex-fill container-fluid flex-column align-items-stretch d-flex h-100"},[e.plotConfigModal?t("b-modal",{attrs:{id:"plotConfiguratorModal",title:"Plot Configurator","ok-only":"","hide-backdrop":"","button-size":"sm"}},[t("PlotConfigurator",{attrs:{columns:e.datasetColumns},model:{value:e.plotConfig,callback:function(a){e.plotConfig=a},expression:"plotConfig"}})],1):e._e(),t("div",{staticClass:"row mr-0"},[t("div",{staticClass:"ml-2 d-flex flex-wrap flex-md-nowrap align-items-center"},[t("span",{staticClass:"ml-2 text-nowrap"},[e._v(e._s(e.strategyName)+" | "+e._s(e.timeframe||""))]),t("v-select",{staticClass:"ml-2",staticStyle:{"min-width":"7em"},attrs:{options:e.availablePairs,size:"sm",clearable:!1},on:{change:e.refresh},model:{value:e.pair,callback:function(a){e.pair=a},expression:"pair"}}),t("b-button",{staticClass:"ml-2",attrs:{disabled:!e.pair,size:"sm"},on:{click:e.refresh}},[e._v("\u21BB")]),e.dataset?t("small",{staticClass:"ml-2 text-nowrap"},[e._v("Buysignals: "+e._s(e.dataset.buy_signals))]):e._e(),e.dataset?t("small",{staticClass:"ml-2 text-nowrap"},[e._v("SellSignals: "+e._s(e.dataset.sell_signals))]):e._e(),e.dataset&&e.dataset.enter_short_signals?t("small",{staticClass:"ml-2 text-nowrap"},[e._v("Short entries: "+e._s(e.dataset.enter_short_signals))]):e._e(),e.dataset&&e.dataset.exit_short_signals?t("small",{staticClass:"ml-2 text-nowrap"},[e._v("Short exits: "+e._s(e.dataset.exit_short_signals))]):e._e()],1),t("div",{staticClass:"ml-auto mr-2"},[t("b-select",{attrs:{options:e.availablePlotConfigNames,size:"sm"},on:{change:e.plotConfigChanged},model:{value:e.plotConfigName,callback:function(a){e.plotConfigName=a},expression:"plotConfigName"}})],1),t("div",{staticClass:"mr-0 mr-md-1"},[t("b-button",{attrs:{size:"sm",title:"Plot configurator"},on:{click:e.showConfigurator}},[e._v("\u2699")])],1)]),t("div",{staticClass:"row mr-1 ml-1 h-100"},[e.hasDataset?t("CandleChart",{attrs:{dataset:e.dataset,trades:e.trades,"plot-config":e.plotConfig,"use-u-t-c":e.timezone==="UTC",theme:e.getChartTheme}}):t("div",{staticClass:"m-auto"},[e.isLoadingDataset?t("b-spinner",{attrs:{label:"Spinning"}}):t("div",{staticStyle:{"font-size":"1.5rem"}},[e._v(" "+e._s(e.noDatasetText)+" ")])],1)],1)],1),t("transition",{attrs:{name:"fade",mode:"in-out"}},[e.plotConfigModal?e._e():t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPlotConfig,expression:"showPlotConfig"}],staticClass:"w-25 config-sidebar"},[t("PlotConfigurator",{attrs:{columns:e.datasetColumns,"as-modal":!1},model:{value:e.plotConfig,callback:function(a){e.plotConfig=a},expression:"plotConfig"}})],1)])],1)},ws=[];oa._withStripped=!0;const li={};var sa=kt(N,oa,ws,!1,Ps,"cbd8e52c",null,null);function Ps(e){for(let i in li)this[i]=li[i]}sa.options.__file="src/components/charts/CandleChartContainer.vue";var Ms=function(){return sa.exports}();export{Ms as C};
//# sourceMappingURL=CandleChartContainer.1f5607a6.js.map
